import{$ as we,A as nf,B as et,C as Nn,D as An,E as of,F as rf,G as gi,H as sf,I as af,J as kn,K as bt,L as Ql,M as ff,N as hf,O as Zl,P as He,Q as jt,R as uf,S as vi,T as mf,U as Ln,V as pf,W as gf,X as _f,Y as vf,Z as Cf,_ as Fe,ba as yf,c as Lt,d as Yd,e as Xd,f as Pn,g as Qd,h as Zd,j as xe,k as Ul,l as Rn,m as Kd,n as Tn,o as $l,p as xt,q as Je,r as mi,s as Yl,t as le,u as pi,v as qd,w as Xl,x as Jd,y as ef,z as tf}from"./chunk-SR7FWXXD.js";import{c as _i,d as st,f as Te,g as Vn,h as Bt,i as lf,j as cf,k as df}from"./chunk-MXSECSWM.js";import{$ as Ct,$a as Ad,A as ze,Aa as li,Ab as di,B as Se,Ba as F,Bb as Ld,C as Vl,Ca as H,Cb as Ce,Db as Mn,E as Rd,Eb as G,Fb as R,Gb as be,H as Ne,Ha as Sn,Hb as Y,Ia as At,Ib as _e,J as ai,Jb as V,Kb as I,L as Ll,Lb as M,Mb as fi,Nb as W,Ob as ge,Pb as Vt,Qb as X,Rb as K,S as Bl,Sb as Bd,Tb as jd,U as Qe,Ub as zd,V as Nt,W as se,Wa as w,Wb as Hd,X as Td,Xa as u,Y as Nd,Ya as zl,Yb as Gd,Z as En,Za as Hl,_b as Re,a as z,aa as l,ac as ue,b as ye,ba as Ie,bb as kt,bc as Gl,d as pe,da as P,db as J,dc as Wl,eb as qe,f as ot,fa as c,ga as h,gb as ee,gc as me,hb as ke,i as Q,ic as Wd,ja as C,ka as T,kc as Fn,l as Od,la as Me,lb as $,lc as hi,m as f,ma as O,mb as te,mc as Ud,n as wn,nb as N,nc as $d,o as si,ob as yt,oc as ui,pb as re,qb as kd,qc as On,rb as Vd,s as rt,sa as he,sb as Z,ta as ne,tb as In,ua as oe,ub as Oe,va as Ae,vb as Pe,wa as Ze,wb as v,x as Pd,xa as jl,xb as y,y as Dn,ya as Ke,yb as B,z as kl,zb as ci}from"./chunk-N4MF34VC.js";var Ve=function(i){return i.ZOOM_IN="ZOOM_IN",i.ZOOM_OUT="ZOOM_OUT",i.ONE_TO_ONE="ONE_TO_ONE",i.FIT_TO_SCREEN="FIT_TO_SCREEN",i.TEST_CALL="TEST_CALL",i.SELECT_ALL="SELECT_ALL",i.DELETE_SELECTED="DELETE_SELECTED",i}(Ve||{});var Bn=class{constructor(n){this.value=n}};var Sf=(()=>{class i{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(t){return new(t||i)(u(kt),u(F))}}static{this.\u0275dir=O({type:i})}}return i})(),Iu=(()=>{class i extends Sf{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Ze(i)))(o||i)}})()}static{this.\u0275dir=O({type:i,features:[ee]})}}return i})(),Xn=new P("");var Mu={provide:Xn,useExisting:Ct(()=>lt),multi:!0};function Fu(){let i=Wl()?Wl().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var Ou=new P(""),lt=(()=>{class i extends Sf{constructor(e,t,o){super(e,t),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Fu())}writeValue(e){let t=e??"";this.setProperty("value",t)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(t){return new(t||i)(u(kt),u(F),u(Ou,8))}}static{this.\u0275dir=O({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,o){t&1&&G("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[X([Mu]),ee]})}}return i})();function at(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function If(i){return i!=null&&typeof i.length=="number"}var Jl=new P(""),ec=new P(""),Pu=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ht=class{static min(n){return Ru(n)}static max(n){return Tu(n)}static required(n){return Nu(n)}static requiredTrue(n){return Au(n)}static email(n){return ku(n)}static minLength(n){return Vu(n)}static maxLength(n){return Lu(n)}static pattern(n){return Bu(n)}static nullValidator(n){return Mf(n)}static compose(n){return Nf(n)}static composeAsync(n){return Af(n)}};function Ru(i){return n=>{if(at(n.value)||at(i))return null;let e=parseFloat(n.value);return!isNaN(e)&&e<i?{min:{min:i,actual:n.value}}:null}}function Tu(i){return n=>{if(at(n.value)||at(i))return null;let e=parseFloat(n.value);return!isNaN(e)&&e>i?{max:{max:i,actual:n.value}}:null}}function Nu(i){return at(i.value)?{required:!0}:null}function Au(i){return i.value===!0?null:{required:!0}}function ku(i){return at(i.value)||Pu.test(i.value)?null:{email:!0}}function Vu(i){return n=>at(n.value)||!If(n.value)?null:n.value.length<i?{minlength:{requiredLength:i,actualLength:n.value.length}}:null}function Lu(i){return n=>If(n.value)&&n.value.length>i?{maxlength:{requiredLength:i,actualLength:n.value.length}}:null}function Bu(i){if(!i)return Mf;let n,e;return typeof i=="string"?(e="",i.charAt(0)!=="^"&&(e+="^"),e+=i,i.charAt(i.length-1)!=="$"&&(e+="$"),n=new RegExp(e)):(e=i.toString(),n=i),t=>{if(at(t.value))return null;let o=t.value;return n.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}function Mf(i){return null}function Ff(i){return i!=null}function Of(i){return Hd(i)?wn(i):i}function Pf(i){let n={};return i.forEach(e=>{n=e!=null?z(z({},n),e):n}),Object.keys(n).length===0?null:n}function Rf(i,n){return n.map(e=>e(i))}function ju(i){return!i.validate}function Tf(i){return i.map(n=>ju(n)?n:e=>n.validate(e))}function Nf(i){if(!i)return null;let n=i.filter(Ff);return n.length==0?null:function(e){return Pf(Rf(e,n))}}function tc(i){return i!=null?Nf(Tf(i)):null}function Af(i){if(!i)return null;let n=i.filter(Ff);return n.length==0?null:function(e){let t=Rf(e,n).map(Of);return Dn(t).pipe(rt(Pf))}}function ic(i){return i!=null?Af(Tf(i)):null}function xf(i,n){return i===null?[n]:Array.isArray(i)?[...i,n]:[i,n]}function kf(i){return i._rawValidators}function Vf(i){return i._rawAsyncValidators}function Kl(i){return i?Array.isArray(i)?i:[i]:[]}function zn(i,n){return Array.isArray(i)?i.includes(n):i===n}function bf(i,n){let e=Kl(n);return Kl(i).forEach(o=>{zn(e,o)||e.push(o)}),e}function wf(i,n){return Kl(n).filter(e=>!zn(i,e))}var Hn=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=tc(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=ic(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return this.control?this.control.hasError(n,e):!1}getError(n,e){return this.control?this.control.getError(n,e):null}},Gt=class extends Hn{get formDirective(){return null}get path(){return null}},tt=class extends Hn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ql=class{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},zu={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},f0=ye(z({},zu),{"[class.ng-submitted]":"isSubmitted"}),Ge=(()=>{class i extends ql{constructor(e){super(e)}static{this.\u0275fac=function(t){return new(t||i)(u(tt,2))}}static{this.\u0275dir=O({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,o){t&2&&re("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[ee]})}}return i})();var Ci="VALID",jn="INVALID",zt="PENDING",yi="DISABLED";function Lf(i){return(Qn(i)?i.validators:i)||null}function Hu(i){return Array.isArray(i)?tc(i):i||null}function Bf(i,n){return(Qn(n)?n.asyncValidators:i)||null}function Gu(i){return Array.isArray(i)?ic(i):i||null}function Qn(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function Wu(i,n,e){let t=i.controls;if(!(n?Object.keys(t):t).length)throw new En(1e3,"");if(!t[e])throw new En(1001,"")}function Uu(i,n,e){i._forEachChild((t,o)=>{if(e[o]===void 0)throw new En(1002,"")})}var Gn=class{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Ci}get invalid(){return this.status===jn}get pending(){return this.status==zt}get disabled(){return this.status===yi}get enabled(){return this.status!==yi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(bf(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(bf(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(wf(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(wf(n,this._rawAsyncValidators))}hasValidator(n){return zn(this._rawValidators,n)}hasAsyncValidator(n){return zn(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=zt,n.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=yi,this.errors=null,this._forEachChild(t=>{t.disable(ye(z({},n),{onlySelf:!0}))}),this._updateValue(),n.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(z({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=Ci,this._forEachChild(t=>{t.enable(ye(z({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(ye(z({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ci||this.status===zt)&&this._runAsyncValidator(n.emitEvent)),n.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yi:Ci}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=zt,this._hasOwnPendingAsyncValidator=!0;let e=Of(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(e.emitEvent!==!1)}get(n){let e=n;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((t,o)=>t&&t._find(o),this)}getError(n,e){let t=e?this.get(e):this;return t&&t.errors?t.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new H,this.statusChanges=new H}_calculateStatus(){return this._allControlsDisabled()?yi:this.errors?jn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zt)?zt:this._anyControlsHaveStatus(jn)?jn:Ci}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Qn(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let e=this._parent&&this._parent.dirty;return!n&&!!e&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=Hu(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=Gu(this._rawAsyncValidators)}},Wt=class extends Gn{constructor(n,e,t){super(Lf(e),Bf(t,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,t={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){Uu(this,!0,n),Object.keys(n).forEach(t=>{Wu(this,!0,t),this.controls[t].setValue(n[t],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(Object.keys(n).forEach(t=>{let o=this.controls[t];o&&o.patchValue(n[t],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((t,o)=>{t.reset(n?n[o]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,t)=>(n[t]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,t)=>t._syncPendingControls()?!0:e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{let t=this.controls[e];t&&n(t,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[e,t]of Object.entries(this.controls))if(this.contains(e)&&n(t))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(e,t,o)=>((t.enabled||this.disabled)&&(e[o]=t.value),e))}_reduceChildren(n,e){let t=n;return this._forEachChild((o,r)=>{t=e(t,o,r)}),t}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var bi=new P("CallSetDisabledState",{providedIn:"root",factory:()=>Zn}),Zn="always";function Wn(i,n,e=Zn){nc(i,n),n.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&n.valueAccessor.setDisabledState?.(i.disabled),Yu(i,n),Qu(i,n),Xu(i,n),$u(i,n)}function Un(i,n,e=!0){let t=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(t),n.valueAccessor.registerOnTouched(t)),Yn(i,n),i&&(n._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function $n(i,n){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function $u(i,n){if(n.valueAccessor.setDisabledState){let e=t=>{n.valueAccessor.setDisabledState(t)};i.registerOnDisabledChange(e),n._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function nc(i,n){let e=kf(i);n.validator!==null?i.setValidators(xf(e,n.validator)):typeof e=="function"&&i.setValidators([e]);let t=Vf(i);n.asyncValidator!==null?i.setAsyncValidators(xf(t,n.asyncValidator)):typeof t=="function"&&i.setAsyncValidators([t]);let o=()=>i.updateValueAndValidity();$n(n._rawValidators,o),$n(n._rawAsyncValidators,o)}function Yn(i,n){let e=!1;if(i!==null){if(n.validator!==null){let o=kf(i);if(Array.isArray(o)&&o.length>0){let r=o.filter(s=>s!==n.validator);r.length!==o.length&&(e=!0,i.setValidators(r))}}if(n.asyncValidator!==null){let o=Vf(i);if(Array.isArray(o)&&o.length>0){let r=o.filter(s=>s!==n.asyncValidator);r.length!==o.length&&(e=!0,i.setAsyncValidators(r))}}}let t=()=>{};return $n(n._rawValidators,t),$n(n._rawAsyncValidators,t),e}function Yu(i,n){n.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&jf(i,n)})}function Xu(i,n){n.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&jf(i,n),i.updateOn!=="submit"&&i.markAsTouched()})}function jf(i,n){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Qu(i,n){let e=(t,o)=>{n.valueAccessor.writeValue(t),o&&n.viewToModelUpdate(t)};i.registerOnChange(e),n._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function zf(i,n){i==null,nc(i,n)}function Zu(i,n){return Yn(i,n)}function Ku(i,n){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(n,e.currentValue)}function qu(i){return Object.getPrototypeOf(i.constructor)===Iu}function Hf(i,n){i._syncPendingControls(),n.forEach(e=>{let t=e.control;t.updateOn==="submit"&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Ju(i,n){if(!n)return null;Array.isArray(n);let e,t,o;return n.forEach(r=>{r.constructor===lt?e=r:qu(r)?t=r:o=r}),o||t||e||null}function em(i,n){let e=i.indexOf(n);e>-1&&i.splice(e,1)}var tm={provide:Gt,useExisting:Ct(()=>wi)},xi=Promise.resolve(),wi=(()=>{class i extends Gt{constructor(e,t,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new H,this.form=new Wt({},tc(e),ic(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){xi.then(()=>{let t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),Wn(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){xi.then(()=>{let t=this._findContainer(e.path);t&&t.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){xi.then(()=>{let t=this._findContainer(e.path),o=new Wt({});zf(o,e),t.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){xi.then(()=>{let t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){xi.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Hf(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(t){return new(t||i)(u(Jl,10),u(ec,10),u(bi,8))}}static{this.\u0275dir=O({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,o){t&1&&G("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[C.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[X([tm]),ee]})}}return i})();function Df(i,n){let e=i.indexOf(n);e>-1&&i.splice(e,1)}function Ef(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var ct=class extends Gn{constructor(n=null,e,t){super(Lf(e),Bf(t,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qn(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Ef(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){Df(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){Df(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){Ef(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var im=i=>i instanceof ct;var Gf=new P(""),nm={provide:tt,useExisting:Ct(()=>Le)},Le=(()=>{class i extends tt{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,t,o,r,s){super(),this._ngModelWarningConfig=r,this.callSetDisabledState=s,this.update=new H,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(t),this.valueAccessor=Ju(this,o)}ngOnChanges(e){if(this._isControlChanged(e)){let t=e.form.previousValue;t&&Un(t,this,!1),Wn(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Ku(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Un(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}static{this.\u0275fac=function(t){return new(t||i)(u(Jl,10),u(ec,10),u(Xn,10),u(Gf,8),u(bi,8))}}static{this.\u0275dir=O({type:i,selectors:[["","formControl",""]],inputs:{form:[C.None,"formControl","form"],isDisabled:[C.None,"disabled","isDisabled"],model:[C.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[X([nm]),ee,he]})}}return i})(),om={provide:Gt,useExisting:Ct(()=>Di)},Di=(()=>{class i extends Gt{constructor(e,t,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new H,this._setValidators(e),this._setAsyncValidators(t)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Yn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let t=this.form.get(e.path);return Wn(t,e,this.callSetDisabledState),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){Un(e.control||null,e,!1),em(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,Hf(this.form,this.directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{let t=e.control,o=this.form.get(e.path);t!==o&&(Un(t||null,e),im(o)&&(Wn(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let t=this.form.get(e.path);zf(t,e),t.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let t=this.form.get(e.path);t&&Zu(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nc(this.form,this),this._oldForm&&Yn(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(t){return new(t||i)(u(Jl,10),u(ec,10),u(bi,8))}}static{this.\u0275dir=O({type:i,selectors:[["","formGroup",""]],hostBindings:function(t,o){t&1&&G("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{form:[C.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[X([om]),ee,he]})}}return i})();var Wf=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=Me({type:i})}static{this.\u0275inj=Ie({})}}return i})();var Uf=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:bi,useValue:e.callSetDisabledState??Zn}]}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=Me({type:i})}static{this.\u0275inj=Ie({imports:[Wf]})}}return i})(),We=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:Gf,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:bi,useValue:e.callSetDisabledState??Zn}]}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=Me({type:i})}static{this.\u0275inj=Ie({imports:[Wf]})}}return i})();var Kn=class{constructor(n,e){this.groups=n,this.form=e}};var qn=class{handle(n){let e=new Wt({}),t=[];return(n.value?.groups||[]).forEach(r=>{let s=this.mapControlModelToFormControl(r.controls,e),a=ye(z({},r),{controls:s});t.push(a)}),new Kn(t,e)}mapControlModelToFormControl(n,e){return n.map(o=>{let r=new ct(o.value);return e.addControl(o.key,r),ye(z({},o),{formControl:r})})}};var oc=class{constructor(n){this._box=n,this._destroyed=new Q,this._resizeSubject=new Q,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(n){return this._elementObservables.has(n)||this._elementObservables.set(n,new ot(e=>{let t=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(n,{box:this._box}),()=>{this._resizeObserver?.unobserve(n),t.unsubscribe(),this._elementObservables.delete(n)}}).pipe(Se(e=>e.some(t=>t.target===n)),Bl({bufferSize:1,refCount:!0}),se(this._destroyed))),this._elementObservables.get(n)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},$f=(()=>{class i{constructor(){this._observers=new Map,this._ngZone=h(J),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(e,t){let o=t?.box||"content-box";return this._observers.has(o)||this._observers.set(o,new oc(o)),this._observers.get(o).observe(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var rm=["notch"],sm=["matFormFieldNotchedOutline",""],am=["*"],lm=["textField"],cm=["iconPrefixContainer"],dm=["textPrefixContainer"],fm=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],hm=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function um(i,n){i&1&&B(0,"span",17)}function mm(i,n){if(i&1&&(v(0,"label",16),Y(1,1),$(2,um,1,0,"span",17),y()),i&2){let e=R(2);N("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),te("for",e._control.disableAutomaticLabeling?null:e._control.id),w(2),Z(2,!e.hideRequiredMarker&&e._control.required?2:-1)}}function pm(i,n){if(i&1&&$(0,mm,3,5,"label",16),i&2){let e=R();Z(0,e._hasFloatingLabel()?0:-1)}}function gm(i,n){i&1&&B(0,"div",5)}function _m(i,n){}function vm(i,n){if(i&1&&$(0,_m,0,0,"ng-template",11),i&2){R(2);let e=fi(1);N("ngTemplateOutlet",e)}}function Cm(i,n){if(i&1&&(v(0,"div",7),$(1,vm,1,1,null,11),y()),i&2){let e=R();N("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),w(),Z(1,e._forceDisplayInfixLabel()?-1:1)}}function ym(i,n){i&1&&(v(0,"div",8,2),Y(2,2),y())}function xm(i,n){i&1&&(v(0,"div",9,3),Y(2,3),y())}function bm(i,n){}function wm(i,n){if(i&1&&$(0,bm,0,0,"ng-template",11),i&2){R();let e=fi(1);N("ngTemplateOutlet",e)}}function Dm(i,n){i&1&&(v(0,"div",12),Y(1,4),y())}function Em(i,n){i&1&&(v(0,"div",13),Y(1,5),y())}function Sm(i,n){i&1&&B(0,"div",14)}function Im(i,n){if(i&1&&(v(0,"div",18),Y(1,6),y()),i&2){let e=R();N("@transitionMessages",e._subscriptAnimationState)}}function Mm(i,n){if(i&1&&(v(0,"mat-hint",20),W(1),y()),i&2){let e=R(2);N("id",e._hintLabelId),w(),ge(e.hintLabel)}}function Fm(i,n){if(i&1&&(v(0,"div",19),$(1,Mm,2,2,"mat-hint",20),Y(2,7),B(3,"div",21),Y(4,8),y()),i&2){let e=R();N("@transitionMessages",e._subscriptAnimationState),w(),Z(1,e.hintLabel?1:-1)}}var Yf=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=O({type:i,selectors:[["mat-label"]],standalone:!0})}}return i})();var Om=new P("MatError");var Pm=0,Xf=(()=>{class i{constructor(){this.align="start",this.id=`mat-mdc-hint-${Pm++}`}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=O({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(t,o){t&2&&(Mn("id",o.id),te("align",null),re("mat-mdc-form-field-hint-end",o.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0})}}return i})(),Rm=new P("MatPrefix");var Tm=new P("MatSuffix");var ih=new P("FloatingLabelParent"),Qf=(()=>{class i{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=h($f),this._ngZone=h(J),this._parent=h(ih),this._resizeSubscription=new pe}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return Nm(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static{this.\u0275fac=function(t){return new(t||i)(u(F))}}static{this.\u0275dir=O({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(t,o){t&2&&re("mdc-floating-label--float-above",o.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}}return i})();function Nm(i){let n=i;if(n.offsetParent!==null)return n.scrollWidth;let e=n.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let t=e.scrollWidth;return e.remove(),t}var Zf="mdc-line-ripple--active",Jn="mdc-line-ripple--deactivating",Kf=(()=>{class i{constructor(e,t){this._elementRef=e,this._handleTransitionEnd=o=>{let r=this._elementRef.nativeElement.classList,s=r.contains(Jn);o.propertyName==="opacity"&&s&&r.remove(Zf,Jn)},t.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(Jn),e.add(Zf)}deactivate(){this._elementRef.nativeElement.classList.add(Jn)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static{this.\u0275fac=function(t){return new(t||i)(u(F),u(J))}}static{this.\u0275dir=O({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}}return i})(),qf=(()=>{class i{constructor(e,t){this._elementRef=e,this._ngZone=t,this.open=!1}ngAfterViewInit(){let e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){!this.open||!e?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static{this.\u0275fac=function(t){return new(t||i)(u(F),u(J))}}static{this.\u0275cmp=T({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(t,o){if(t&1&&V(rm,5),t&2){let r;I(r=M())&&(o._notch=r.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(t,o){t&2&&re("mdc-notched-outline--notched",o.open)},inputs:{open:[C.None,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[K],attrs:sm,ngContentSelectors:am,decls:5,vars:0,consts:[["notch",""],[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(t,o){t&1&&(be(),B(0,"div",1),v(1,"div",2,0),Y(3),y(),B(4,"div",3))},encapsulation:2,changeDetection:0})}}return i})(),Am={transitionMessages:_i("transitionMessages",[Vn("enter",Te({opacity:1,transform:"translateY(0%)"})),Bt("void => enter",[Te({opacity:0,transform:"translateY(-5px)"}),st("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Si=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=O({type:i})}}return i})();var Ii=new P("MatFormField"),km=new P("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Jf=0,eh="fill",Vm="auto",th="fixed",Lm="translateY(-50%)",Ut=(()=>{class i{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Je(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||Vm}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){let t=this._appearance,o=e||this._defaults?.appearance||eh;this._appearance=o,this._appearance==="outline"&&this._appearance!==t&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||th}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||th}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,t,o,r,s,a,d,p){this._elementRef=e,this._changeDetectorRef=t,this._ngZone=o,this._dir=r,this._platform=s,this._defaults=a,this._animationMode=d,this._hideRequiredMarker=!1,this.color="primary",this._appearance=eh,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${Jf++}`,this._hintLabelId=`mat-mdc-hint-${Jf++}`,this._subscriptAnimationState="",this._destroyed=new Q,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){let e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(se(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),ze(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(se(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(se(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){let t=this._control?this._control.ngControl:null;return t&&t[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let t=this._hintChildren?this._hintChildren.find(r=>r.align==="start"):null,o=this._hintChildren?this._hintChildren.find(r=>r.align==="end"):null;t?e.push(t.id):this._hintLabel&&e.push(this._hintLabelId),o&&e.push(o.id)}else this._errorChildren&&e.push(...this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;let e=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){e.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdateOnStable=!0;return}let t=this._iconPrefixContainer?.nativeElement,o=this._textPrefixContainer?.nativeElement,r=t?.getBoundingClientRect().width??0,s=o?.getBoundingClientRect().width??0,a=this._dir.value==="rtl"?"-1":"1",d=`${r+s}px`,_=`calc(${a} * (${d} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;e.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${Lm} translateX(${_})
    )`}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let t=e.getRootNode();return t&&t!==e}return document.documentElement.contains(e)}static{this.\u0275fac=function(t){return new(t||i)(u(F),u(Re),u(J),u(et),u(xe),u(km,8),u(At,8),u(me))}}static{this.\u0275cmp=T({type:i,selectors:[["mat-form-field"]],contentQueries:function(t,o,r){if(t&1&&(_e(r,Yf,5),_e(r,Yf,7),_e(r,Si,5),_e(r,Rm,5),_e(r,Tm,5),_e(r,Om,5),_e(r,Xf,5)),t&2){let s;I(s=M())&&(o._labelChildNonStatic=s.first),I(s=M())&&(o._labelChildStatic=s.first),I(s=M())&&(o._formFieldControl=s.first),I(s=M())&&(o._prefixChildren=s),I(s=M())&&(o._suffixChildren=s),I(s=M())&&(o._errorChildren=s),I(s=M())&&(o._hintChildren=s)}},viewQuery:function(t,o){if(t&1&&(V(lm,5),V(cm,5),V(dm,5),V(Qf,5),V(qf,5),V(Kf,5)),t&2){let r;I(r=M())&&(o._textField=r.first),I(r=M())&&(o._iconPrefixContainer=r.first),I(r=M())&&(o._textPrefixContainer=r.first),I(r=M())&&(o._floatingLabel=r.first),I(r=M())&&(o._notchedOutline=r.first),I(r=M())&&(o._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(t,o){t&2&&re("mat-mdc-form-field-label-always-float",o._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",o._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",o._hasIconSuffix)("mat-form-field-invalid",o._control.errorState)("mat-form-field-disabled",o._control.disabled)("mat-form-field-autofilled",o._control.autofilled)("mat-form-field-no-animations",o._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",o.appearance=="fill")("mat-form-field-appearance-outline",o.appearance=="outline")("mat-form-field-hide-placeholder",o._hasFloatingLabel()&&!o._shouldLabelFloat())("mat-focused",o._control.focused)("mat-primary",o.color!=="accent"&&o.color!=="warn")("mat-accent",o.color==="accent")("mat-warn",o.color==="warn")("ng-untouched",o._shouldForward("untouched"))("ng-touched",o._shouldForward("touched"))("ng-pristine",o._shouldForward("pristine"))("ng-dirty",o._shouldForward("dirty"))("ng-valid",o._shouldForward("valid"))("ng-invalid",o._shouldForward("invalid"))("ng-pending",o._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[X([{provide:Ii,useExisting:i},{provide:ih,useExisting:i}]),K],ngContentSelectors:hm,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(t,o){if(t&1){let r=Ce();be(fm),$(0,pm,1,1,"ng-template",null,0,zd),v(2,"div",4,1),G("click",function(a){return ne(r),oe(o._control.onContainerClick(a))}),$(4,gm,1,0,"div",5),v(5,"div",6),$(6,Cm,2,2,"div",7)(7,ym,3,0,"div",8)(8,xm,3,0,"div",9),v(9,"div",10),$(10,wm,1,1,null,11),Y(11),y(),$(12,Dm,2,0,"div",12)(13,Em,2,0,"div",13),y(),$(14,Sm,1,0,"div",14),y(),v(15,"div",15),$(16,Im,2,1)(17,Fm,5,2),y()}if(t&2){let r;w(2),re("mdc-text-field--filled",!o._hasOutline())("mdc-text-field--outlined",o._hasOutline())("mdc-text-field--no-label",!o._hasFloatingLabel())("mdc-text-field--disabled",o._control.disabled)("mdc-text-field--invalid",o._control.errorState),w(2),Z(4,!o._hasOutline()&&!o._control.disabled?4:-1),w(2),Z(6,o._hasOutline()?6:-1),w(),Z(7,o._hasIconPrefix?7:-1),w(),Z(8,o._hasTextPrefix?8:-1),w(2),Z(10,!o._hasOutline()||o._forceDisplayInfixLabel()?10:-1),w(2),Z(12,o._hasTextSuffix?12:-1),w(),Z(13,o._hasIconSuffix?13:-1),w(),Z(14,o._hasOutline()?-1:14),w(),re("mat-mdc-form-field-subscript-dynamic-size",o.subscriptSizing==="dynamic"),w(),Z(16,(r=o._getDisplayedMessages())==="error"?16:r==="hint"?17:-1)}},dependencies:[Qf,qf,Ud,Kf,Xf],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 96px/0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px*2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-hover-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-hover-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-hover-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-hover-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(.75*var(--mdc-outlined-text-field-label-text-size))}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mdc-outlined-text-field-label-text-size)}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color)}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color)}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color)}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[Am.transitionMessages]},changeDetection:0})}}return i})();var nh=Rn({passive:!0}),oh=(()=>{class i{constructor(e,t){this._platform=e,this._ngZone=t,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Od;let t=pi(e),o=this._monitoredElements.get(t);if(o)return o.subject;let r=new Q,s="cdk-text-field-autofilled",a=d=>{d.animationName==="cdk-text-field-autofill-start"&&!t.classList.contains(s)?(t.classList.add(s),this._ngZone.run(()=>r.next({target:d.target,isAutofilled:!0}))):d.animationName==="cdk-text-field-autofill-end"&&t.classList.contains(s)&&(t.classList.remove(s),this._ngZone.run(()=>r.next({target:d.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{t.addEventListener("animationstart",a,nh),t.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(t,{subject:r,unlisten:()=>{t.removeEventListener("animationstart",a,nh)}}),r}stopMonitoring(e){let t=pi(e),o=this._monitoredElements.get(t);o&&(o.unlisten(),o.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}ngOnDestroy(){this._monitoredElements.forEach((e,t)=>this.stopMonitoring(t))}static{this.\u0275fac=function(t){return new(t||i)(c(xe),c(J))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Gm=new P("MAT_INPUT_VALUE_ACCESSOR"),Wm=["button","checkbox","file","hidden","image","radio","range","reset","submit"],Um=0,eo=(()=>{class i{get disabled(){return this._disabled}set disabled(e){this._disabled=Je(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Ht.required)??!1}set required(e){this._required=Je(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&Ul().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Je(e)}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,t,o,r,s,a,d,p,_,x){this._elementRef=e,this._platform=t,this.ngControl=o,this._autofillMonitor=p,this._formField=x,this._uid=`mat-input-${Um++}`,this.focused=!1,this.stateChanges=new Q,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(j=>Ul().has(j)),this._iOSKeyupListener=j=>{let ie=j.target;!ie.value&&ie.selectionStart===0&&ie.selectionEnd===0&&(ie.setSelectionRange(1,1),ie.setSelectionRange(0,0))};let k=this._elementRef.nativeElement,L=k.nodeName.toLowerCase();this._inputValueAccessor=d||k,this._previousNativeValue=this.value,this.id=this.id,t.IOS&&_.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new Nn(a,o,s,r,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=L==="select",this._isTextarea=L==="textarea",this._isInFormField=!!x,this._isNativeSelect&&(this.controlType=k.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let t=this._elementRef.nativeElement;this._previousPlaceholder=e,e?t.setAttribute("placeholder",e):t.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Wm.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}else return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}static{this.\u0275fac=function(t){return new(t||i)(u(F),u(xe),u(tt,10),u(wi,8),u(Di,8),u(An),u(Gm,10),u(oh),u(J),u(Ii,8))}}static{this.\u0275dir=O({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(t,o){t&1&&G("focus",function(){return o._focusChanged(!0)})("blur",function(){return o._focusChanged(!1)})("input",function(){return o._onInput()}),t&2&&(Mn("id",o.id)("disabled",o.disabled)("required",o.required),te("name",o.name||null)("readonly",o.readonly&&!o._isNativeSelect||null)("aria-invalid",o.empty&&o.required?null:o.errorState)("aria-required",o.required)("id",o.id),re("mat-input-server",o._isServer)("mat-mdc-form-field-textarea-control",o._isInFormField&&o._isTextarea)("mat-mdc-form-field-input-control",o._isInFormField)("mdc-text-field__input",o._isInFormField)("mat-mdc-native-select-inline",o._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[C.None,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[X([{provide:Si,useExisting:i}]),he]})}}return i})();function $m(i,n){if(i&1&&(v(0,"mat-form-field"),B(1,"input",0),y()),i&2){let e=R();w(),N("placeholder",e.viewModel.name)("formControl",e.viewModel.formControl)}}var rh=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["input-control"]],inputs:{viewModel:"viewModel"},standalone:!0,features:[K],decls:1,vars:1,consts:[["matInput","",3,"placeholder","formControl"]],template:function(t,o){t&1&&$(0,$m,2,2,"mat-form-field"),t&2&&Z(0,o.viewModel?0:-1)},dependencies:[Ut,eo,We,lt,Ge,Le],encapsulation:2,changeDetection:0})}}return i})();function Ym(i,n){if(i&1&&(v(0,"mat-form-field"),B(1,"textarea",0),y()),i&2){let e=R();w(),N("placeholder",e.viewModel.name)("formControl",e.viewModel.formControl)}}var sh=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["textarea-control"]],inputs:{viewModel:"viewModel"},standalone:!0,features:[K],decls:1,vars:1,consts:[["matInput","",3,"placeholder","formControl"]],template:function(t,o){t&1&&$(0,Ym,2,2,"mat-form-field"),t&2&&Z(0,o.viewModel?0:-1)},dependencies:[Ut,eo,We,lt,Ge,Le],encapsulation:2,changeDetection:0})}}return i})();var to=class{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(n=!1,e,t=!0,o){this._multiple=n,this._emitChanges=t,this.compareWith=o,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Q,e&&e.length&&(n?e.forEach(r=>this._markSelected(r)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(t=>this._markSelected(t));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...n){this._verifyValueAssignment(n),n.forEach(t=>this._unmarkSelected(t));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...n){this._verifyValueAssignment(n);let e=this.selected,t=new Set(n);n.forEach(r=>this._markSelected(r)),e.filter(r=>!t.has(this._getConcreteValue(r,t))).forEach(r=>this._unmarkSelected(r));let o=this._hasQueuedChanges();return this._emitChangeEvent(),o}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();let e=this._hasQueuedChanges();return n&&this._emitChangeEvent(),e}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){n.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(n,e){if(this.compareWith){e=e??this._selection;for(let t of e)if(this.compareWith(n,t))return t;return n}else return n}};var Qm=20,Mi=(()=>{class i{constructor(e,t,o){this._ngZone=e,this._platform=t,this._scrolled=new Q,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=Qm){return this._platform.isBrowser?new ot(t=>{this._globalSubscription||this._addGlobalListener();let o=e>0?this._scrolled.pipe(Vl(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):si()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){let o=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Se(r=>!r||o.indexOf(r)>-1))}getAncestorScrollContainers(e){let t=[];return this.scrollContainers.forEach((o,r)=>{this._scrollableContainsElement(r,e)&&t.push(r)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let o=pi(t),r=e.getElementRef().nativeElement;do if(o==r)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return kl(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(t){return new(t||i)(c(J),c(xe),c(me,8))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Zm=20,$t=(()=>{class i{constructor(e,t,o){this._platform=e,this._change=new Q,this._changeListener=r=>{this._change.next(r)},this._document=o,t.runOutsideAngular(()=>{if(e.isBrowser){let r=this._getWindow();r.addEventListener("resize",this._changeListener),r.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:t,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+t,height:o,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,t=this._getWindow(),o=e.documentElement,r=o.getBoundingClientRect(),s=-r.top||e.body.scrollTop||t.scrollY||o.scrollTop||0,a=-r.left||e.body.scrollLeft||t.scrollX||o.scrollLeft||0;return{top:s,left:a}}change(e=Zm){return e>0?this._change.pipe(Vl(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(t){return new(t||i)(c(xe),c(J),c(me,8))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Fi=class{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;n!=null&&(this._attachedHost=null,n.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(n){this._attachedHost=n}},Oi=class extends Fi{constructor(n,e,t,o,r){super(),this.component=n,this.viewContainerRef=e,this.injector=t,this.componentFactoryResolver=o,this.projectableNodes=r}},Pi=class extends Fi{constructor(n,e,t,o){super(),this.templateRef=n,this.viewContainerRef=e,this.context=t,this.injector=o}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}},sc=class extends Fi{constructor(n){super(),this.element=n instanceof F?n.nativeElement:n}},ac=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){if(n instanceof Oi)return this._attachedPortal=n,this.attachComponentPortal(n);if(n instanceof Pi)return this._attachedPortal=n,this.attachTemplatePortal(n);if(this.attachDomPortal&&n instanceof sc)return this._attachedPortal=n,this.attachDomPortal(n)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var io=class extends ac{constructor(n,e,t,o,r){super(),this.outletElement=n,this._componentFactoryResolver=e,this._appRef=t,this._defaultInjector=o,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let d=this._document.createComment("dom-portal");a.parentNode.insertBefore(d,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(a,d)})},this._document=r}attachComponentPortal(n){let t=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component),o;return n.viewContainerRef?(o=n.viewContainerRef.createComponent(t,n.viewContainerRef.length,n.injector||n.viewContainerRef.injector,n.projectableNodes||void 0),this.setDisposeFn(()=>o.destroy())):(o=t.create(n.injector||this._defaultInjector||Ke.NULL),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(o.hostView),o.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(o)),this._attachedPortal=n,o}attachTemplatePortal(n){let e=n.viewContainerRef,t=e.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return t.rootNodes.forEach(o=>this.outletElement.appendChild(o)),t.detectChanges(),this.setDisposeFn(()=>{let o=e.indexOf(t);o!==-1&&e.remove(o)}),this._attachedPortal=n,t}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}};var lh=Kd(),lc=class{constructor(n,e){this._viewportRuler=n,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=le(-this._previousScrollPosition.left),n.style.top=le(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let n=this._document.documentElement,e=this._document.body,t=n.style,o=e.style,r=t.scrollBehavior||"",s=o.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),lh&&(t.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),lh&&(t.scrollBehavior=r,o.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}};var cc=class{constructor(n,e,t,o){this._scrollDispatcher=n,this._ngZone=e,this._viewportRuler=t,this._config=o,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(this._scrollSubscription)return;let n=this._scrollDispatcher.scrolled(0).pipe(Se(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},no=class{enable(){}disable(){}attach(){}};function dc(i,n){return n.some(e=>{let t=i.bottom<e.top,o=i.top>e.bottom,r=i.right<e.left,s=i.left>e.right;return t||o||r||s})}function ch(i,n){return n.some(e=>{let t=i.top<e.top,o=i.bottom>e.bottom,r=i.left<e.left,s=i.right>e.right;return t||o||r||s})}var fc=class{constructor(n,e,t,o){this._scrollDispatcher=n,this._viewportRuler=e,this._ngZone=t,this._config=o,this._scrollSubscription=null}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(!this._scrollSubscription){let n=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(n).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:o}=this._viewportRuler.getViewportSize();dc(e,[{width:t,height:o,bottom:o,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},qm=(()=>{class i{constructor(e,t,o,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=o,this.noop=()=>new no,this.close=s=>new cc(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new lc(this._viewportRuler,this._document),this.reposition=s=>new fc(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=r}static{this.\u0275fac=function(t){return new(t||i)(c(Mi),c($t),c(J),c(me))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),oo=class{constructor(n){if(this.scrollStrategy=new no,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,n){let e=Object.keys(n);for(let t of e)n[t]!==void 0&&(this[t]=n[t])}}};var hc=class{constructor(n,e){this.connectionPair=n,this.scrollableViewProperties=e}};var mh=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(t){return new(t||i)(c(me))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Jm=(()=>{class i extends mh{constructor(e,t){super(e),this._ngZone=t,this._keydownListener=o=>{let r=this._attachedOverlays;for(let s=r.length-1;s>-1;s--)if(r[s]._keydownEvents.observers.length>0){let a=r[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(o)):a.next(o);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(t){return new(t||i)(c(me),c(J,8))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ep=(()=>{class i extends mh{constructor(e,t,o){super(e),this._platform=t,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=Tn(r)},this._clickListener=r=>{let s=Tn(r),a=r.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;let d=this._attachedOverlays.slice();for(let p=d.length-1;p>-1;p--){let _=d[p];if(_._outsidePointerEvents.observers.length<1||!_.hasAttached())continue;if(_.overlayElement.contains(s)||_.overlayElement.contains(a))break;let x=_._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>x.next(r)):x.next(r)}}}add(e){if(super.add(e),!this._isAttached){let t=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(t)):this._addEventListeners(t),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=t.style.cursor,t.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(t){return new(t||i)(c(me),c(xe),c(J,8))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ph=(()=>{class i{constructor(e,t){this._platform=t,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||$l()){let o=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let r=0;r<o.length;r++)o[r].remove()}let t=this._document.createElement("div");t.classList.add(e),$l()?t.setAttribute("platform","test"):this._platform.isBrowser||t.setAttribute("platform","server"),this._document.body.appendChild(t),this._containerElement=t}static{this.\u0275fac=function(t){return new(t||i)(c(me),c(xe))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),uc=class{constructor(n,e,t,o,r,s,a,d,p,_=!1){this._portalOutlet=n,this._host=e,this._pane=t,this._config=o,this._ngZone=r,this._keyboardDispatcher=s,this._document=a,this._location=d,this._outsideClickDispatcher=p,this._animationsDisabled=_,this._backdropElement=null,this._backdropClick=new Q,this._attachments=new Q,this._detachments=new Q,this._locationChanges=pe.EMPTY,this._backdropClickHandler=x=>this._backdropClick.next(x),this._backdropTransitionendHandler=x=>{this._disposeBackdrop(x.target)},this._keydownEvents=new Q,this._outsidePointerEvents=new Q,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ne(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){let n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config=z(z({},this._config),n),this._updateElementSize()}setDirection(n){this._config=ye(z({},this._config),{direction:n}),this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){let n=this._config.direction;return n?typeof n=="string"?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let n=this._pane.style;n.width=le(this._config.width),n.height=le(this._config.height),n.minWidth=le(this._config.minWidth),n.minHeight=le(this._config.minHeight),n.maxWidth=le(this._config.maxWidth),n.maxHeight=le(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){let n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let n=this._backdropElement;if(n){if(this._animationsDisabled){this._disposeBackdrop(n);return}n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",this._backdropTransitionendHandler)}),n.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(n)},500))}}_toggleClasses(n,e,t){let o=Yl(e||[]).filter(r=>!!r);o.length&&(t?n.classList.add(...o):n.classList.remove(...o))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let n=this._ngZone.onStable.pipe(se(ze(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){let n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",this._backdropTransitionendHandler),n.remove(),this._backdropElement===n&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},dh="cdk-overlay-connected-position-bounding-box",tp=/([A-Za-z%]+)$/,mc=class{get positions(){return this._preferredPositions}constructor(n,e,t,o,r){this._viewportRuler=e,this._document=t,this._platform=o,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Q,this._resizeSubscription=pe.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(n)}attach(n){this._overlayRef&&this._overlayRef,this._validatePositions(),n.hostElement.classList.add(dh),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._originRect,e=this._overlayRect,t=this._viewportRect,o=this._containerRect,r=[],s;for(let a of this._preferredPositions){let d=this._getOriginPoint(n,o,a),p=this._getOverlayPoint(d,e,a),_=this._getOverlayFit(p,e,t,a);if(_.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,d);return}if(this._canFitWithFlexibleDimensions(_,p,t)){r.push({position:a,origin:d,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(d,a)});continue}(!s||s.overlayFit.visibleArea<_.visibleArea)&&(s={overlayFit:_,overlayPoint:p,originPoint:d,position:a,overlayRect:e})}if(r.length){let a=null,d=-1;for(let p of r){let _=p.boundingBoxRect.width*p.boundingBoxRect.height*(p.position.weight||1);_>d&&(d=_,a=p)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Dt(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(dh),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,e)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,n.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,e,t){let o;if(t.originX=="center")o=n.left+n.width/2;else{let s=this._isRtl()?n.right:n.left,a=this._isRtl()?n.left:n.right;o=t.originX=="start"?s:a}e.left<0&&(o-=e.left);let r;return t.originY=="center"?r=n.top+n.height/2:r=t.originY=="top"?n.top:n.bottom,e.top<0&&(r-=e.top),{x:o,y:r}}_getOverlayPoint(n,e,t){let o;t.overlayX=="center"?o=-e.width/2:t.overlayX==="start"?o=this._isRtl()?-e.width:0:o=this._isRtl()?0:-e.width;let r;return t.overlayY=="center"?r=-e.height/2:r=t.overlayY=="top"?0:-e.height,{x:n.x+o,y:n.y+r}}_getOverlayFit(n,e,t,o){let r=hh(e),{x:s,y:a}=n,d=this._getOffset(o,"x"),p=this._getOffset(o,"y");d&&(s+=d),p&&(a+=p);let _=0-s,x=s+r.width-t.width,k=0-a,L=a+r.height-t.height,j=this._subtractOverflows(r.width,_,x),ie=this._subtractOverflows(r.height,k,L),fe=j*ie;return{visibleArea:fe,isCompletelyWithinViewport:r.width*r.height===fe,fitsInViewportVertically:ie===r.height,fitsInViewportHorizontally:j==r.width}}_canFitWithFlexibleDimensions(n,e,t){if(this._hasFlexibleDimensions){let o=t.bottom-e.y,r=t.right-e.x,s=fh(this._overlayRef.getConfig().minHeight),a=fh(this._overlayRef.getConfig().minWidth),d=n.fitsInViewportVertically||s!=null&&s<=o,p=n.fitsInViewportHorizontally||a!=null&&a<=r;return d&&p}return!1}_pushOverlayOnScreen(n,e,t){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};let o=hh(e),r=this._viewportRect,s=Math.max(n.x+o.width-r.width,0),a=Math.max(n.y+o.height-r.height,0),d=Math.max(r.top-t.top-n.y,0),p=Math.max(r.left-t.left-n.x,0),_=0,x=0;return o.width<=r.width?_=p||-s:_=n.x<this._viewportMargin?r.left-t.left-n.x:0,o.height<=r.height?x=d||-a:x=n.y<this._viewportMargin?r.top-t.top-n.y:0,this._previousPushAmount={x:_,y:x},{x:n.x+_,y:n.y+x}}_applyPosition(n,e){if(this._setTransformOrigin(n),this._setOverlayElementStyles(e,n),this._setBoundingBoxStyles(e,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._positionChanges.observers.length){let t=this._getScrollVisibility();if(n!==this._lastPosition||!this._lastScrollVisibility||!ip(this._lastScrollVisibility,t)){let o=new hc(n,t);this._positionChanges.next(o)}this._lastScrollVisibility=t}this._lastPosition=n,this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),t,o=n.overlayY;n.overlayX==="center"?t="center":this._isRtl()?t=n.overlayX==="start"?"right":"left":t=n.overlayX==="start"?"left":"right";for(let r=0;r<e.length;r++)e[r].style.transformOrigin=`${t} ${o}`}_calculateBoundingBoxRect(n,e){let t=this._viewportRect,o=this._isRtl(),r,s,a;if(e.overlayY==="top")s=n.y,r=t.height-s+this._viewportMargin;else if(e.overlayY==="bottom")a=t.height-n.y+this._viewportMargin*2,r=t.height-a+this._viewportMargin;else{let L=Math.min(t.bottom-n.y+t.top,n.y),j=this._lastBoundingBoxSize.height;r=L*2,s=n.y-L,r>j&&!this._isInitialRender&&!this._growAfterOpen&&(s=n.y-j/2)}let d=e.overlayX==="start"&&!o||e.overlayX==="end"&&o,p=e.overlayX==="end"&&!o||e.overlayX==="start"&&o,_,x,k;if(p)k=t.width-n.x+this._viewportMargin*2,_=n.x-this._viewportMargin;else if(d)x=n.x,_=t.right-n.x;else{let L=Math.min(t.right-n.x+t.left,n.x),j=this._lastBoundingBoxSize.width;_=L*2,x=n.x-L,_>j&&!this._isInitialRender&&!this._growAfterOpen&&(x=n.x-j/2)}return{top:s,left:x,bottom:a,right:k,width:_,height:r}}_setBoundingBoxStyles(n,e){let t=this._calculateBoundingBoxRect(n,e);!this._isInitialRender&&!this._growAfterOpen&&(t.height=Math.min(t.height,this._lastBoundingBoxSize.height),t.width=Math.min(t.width,this._lastBoundingBoxSize.width));let o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{let r=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;o.height=le(t.height),o.top=le(t.top),o.bottom=le(t.bottom),o.width=le(t.width),o.left=le(t.left),o.right=le(t.right),e.overlayX==="center"?o.alignItems="center":o.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?o.justifyContent="center":o.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",r&&(o.maxHeight=le(r)),s&&(o.maxWidth=le(s))}this._lastBoundingBoxSize=t,Dt(this._boundingBox.style,o)}_resetBoundingBoxStyles(){Dt(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Dt(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,e){let t={},o=this._hasExactPosition(),r=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(o){let _=this._viewportRuler.getViewportScrollPosition();Dt(t,this._getExactOverlayY(e,n,_)),Dt(t,this._getExactOverlayX(e,n,_))}else t.position="static";let a="",d=this._getOffset(e,"x"),p=this._getOffset(e,"y");d&&(a+=`translateX(${d}px) `),p&&(a+=`translateY(${p}px)`),t.transform=a.trim(),s.maxHeight&&(o?t.maxHeight=le(s.maxHeight):r&&(t.maxHeight="")),s.maxWidth&&(o?t.maxWidth=le(s.maxWidth):r&&(t.maxWidth="")),Dt(this._pane.style,t)}_getExactOverlayY(n,e,t){let o={top:"",bottom:""},r=this._getOverlayPoint(e,this._overlayRect,n);if(this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,t)),n.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;o.bottom=`${s-(r.y+this._overlayRect.height)}px`}else o.top=le(r.y);return o}_getExactOverlayX(n,e,t){let o={left:"",right:""},r=this._getOverlayPoint(e,this._overlayRect,n);this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,t));let s;if(this._isRtl()?s=n.overlayX==="end"?"left":"right":s=n.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;o.right=`${a-(r.x+this._overlayRect.width)}px`}else o.left=le(r.x);return o}_getScrollVisibility(){let n=this._getOriginRect(),e=this._pane.getBoundingClientRect(),t=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ch(n,t),isOriginOutsideView:dc(n,t),isOverlayClipped:ch(e,t),isOverlayOutsideView:dc(e,t)}}_subtractOverflows(n,...e){return e.reduce((t,o)=>t-Math.max(o,0),n)}_getNarrowedViewportRect(){let n=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,t=this._viewportRuler.getViewportScrollPosition();return{top:t.top+this._viewportMargin,left:t.left+this._viewportMargin,right:t.left+n-this._viewportMargin,bottom:t.top+e-this._viewportMargin,width:n-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,e){return e==="x"?n.offsetX==null?this._offsetX:n.offsetX:n.offsetY==null?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&Yl(n).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){let n=this._origin;if(n instanceof F)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();let e=n.width||0,t=n.height||0;return{top:n.y,bottom:n.y+t,left:n.x,right:n.x+e,height:t,width:e}}};function Dt(i,n){for(let e in n)n.hasOwnProperty(e)&&(i[e]=n[e]);return i}function fh(i){if(typeof i!="number"&&i!=null){let[n,e]=i.split(tp);return!e||e==="px"?parseFloat(n):null}return i||null}function hh(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}function ip(i,n){return i===n?!0:i.isOriginClipped===n.isOriginClipped&&i.isOriginOutsideView===n.isOriginOutsideView&&i.isOverlayClipped===n.isOverlayClipped&&i.isOverlayOutsideView===n.isOverlayOutsideView}var uh="cdk-global-overlay-wrapper",pc=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(n){let e=n.getConfig();this._overlayRef=n,this._width&&!e.width&&n.updateSize({width:this._width}),this._height&&!e.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(uh),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,t=this._overlayRef.getConfig(),{width:o,height:r,maxWidth:s,maxHeight:a}=t,d=(o==="100%"||o==="100vw")&&(!s||s==="100%"||s==="100vw"),p=(r==="100%"||r==="100vh")&&(!a||a==="100%"||a==="100vh"),_=this._xPosition,x=this._xOffset,k=this._overlayRef.getConfig().direction==="rtl",L="",j="",ie="";d?ie="flex-start":_==="center"?(ie="center",k?j=x:L=x):k?_==="left"||_==="end"?(ie="flex-end",L=x):(_==="right"||_==="start")&&(ie="flex-start",j=x):_==="left"||_==="start"?(ie="flex-start",L=x):(_==="right"||_==="end")&&(ie="flex-end",j=x),n.position=this._cssPosition,n.marginLeft=d?"0":L,n.marginTop=p?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=d?"0":j,e.justifyContent=ie,e.alignItems=p?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,t=e.style;e.classList.remove(uh),t.justifyContent=t.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}},np=(()=>{class i{constructor(e,t,o,r){this._viewportRuler=e,this._document=t,this._platform=o,this._overlayContainer=r}global(){return new pc}flexibleConnectedTo(e){return new mc(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(t){return new(t||i)(c($t),c(me),c(xe),c(ph))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),op=0,dt=(()=>{class i{constructor(e,t,o,r,s,a,d,p,_,x,k,L){this.scrollStrategies=e,this._overlayContainer=t,this._componentFactoryResolver=o,this._positionBuilder=r,this._keyboardDispatcher=s,this._injector=a,this._ngZone=d,this._document=p,this._directionality=_,this._location=x,this._outsideClickDispatcher=k,this._animationsModuleType=L}create(e){let t=this._createHostElement(),o=this._createPaneElement(t),r=this._createPortalOutlet(o),s=new oo(e);return s.direction=s.direction||this._directionality.value,new uc(r,t,o,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(e){let t=this._document.createElement("div");return t.id=`cdk-overlay-${op++}`,t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Gd)),new io(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(t){return new(t||i)(c(qm),c(ph),c(Ad),c(np),c(Jm),c(Ke),c(J),c(me),c(et),c(Wd),c(ep),c(At,8))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),rp=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],sp=new P("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let i=h(dt);return()=>i.scrollStrategies.reposition()}}),Ri=(()=>{class i{constructor(e){this.elementRef=e}static{this.\u0275fac=function(t){return new(t||i)(u(F))}}static{this.\u0275dir=O({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0})}}return i})(),_c=(()=>{class i{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}constructor(e,t,o,r,s){this._overlay=e,this._dir=s,this._backdropSubscription=pe.EMPTY,this._attachSubscription=pe.EMPTY,this._detachSubscription=pe.EMPTY,this._positionSubscription=pe.EMPTY,this._disposeOnNavigation=!1,this._ngZone=h(J),this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new H,this.positionChange=new H,this.attach=new H,this.detach=new H,this.overlayKeydown=new H,this.overlayOutsideClick=new H,this._templatePortal=new Pi(t,o),this._scrollStrategyFactory=r,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=rp);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(t=>{this.overlayKeydown.next(t),t.keyCode===27&&!this.disableClose&&!xt(t)&&(t.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(t=>{let o=this._getOriginElement(),r=Tn(t);(!o||o!==r&&!o.contains(r))&&this.overlayOutsideClick.next(t)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),t=new oo({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(t.width=this.width),(this.height||this.height===0)&&(t.height=this.height),(this.minWidth||this.minWidth===0)&&(t.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(t.minHeight=this.minHeight),this.backdropClass&&(t.backdropClass=this.backdropClass),this.panelClass&&(t.panelClass=this.panelClass),t}_updatePositionStrategy(e){let t=this.positions.map(o=>({originX:o.originX,originY:o.originY,overlayX:o.overlayX,overlayY:o.overlayY,offsetX:o.offsetX||this.offsetX,offsetY:o.offsetY||this.offsetY,panelClass:o.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(t).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof Ri?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof Ri?this.origin.elementRef.nativeElement:this.origin instanceof F?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(Td(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)(u(dt),u(Hl),u(qe),u(sp),u(et,8))}}static{this.\u0275dir=O({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[C.None,"cdkConnectedOverlayOrigin","origin"],positions:[C.None,"cdkConnectedOverlayPositions","positions"],positionStrategy:[C.None,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[C.None,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[C.None,"cdkConnectedOverlayOffsetY","offsetY"],width:[C.None,"cdkConnectedOverlayWidth","width"],height:[C.None,"cdkConnectedOverlayHeight","height"],minWidth:[C.None,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[C.None,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[C.None,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[C.None,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[C.None,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[C.None,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[C.None,"cdkConnectedOverlayOpen","open"],disableClose:[C.None,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[C.None,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[C.HasDecoratorInputTransform,"cdkConnectedOverlayHasBackdrop","hasBackdrop",ue],lockPosition:[C.HasDecoratorInputTransform,"cdkConnectedOverlayLockPosition","lockPosition",ue],flexibleDimensions:[C.HasDecoratorInputTransform,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",ue],growAfterOpen:[C.HasDecoratorInputTransform,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",ue],push:[C.HasDecoratorInputTransform,"cdkConnectedOverlayPush","push",ue],disposeOnNavigation:[C.HasDecoratorInputTransform,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",ue]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[ke,he]})}}return i})();var hp=["trigger"],up=["panel"],mp=[[["mat-select-trigger"]],"*"],pp=["mat-select-trigger","*"];function gp(i,n){if(i&1&&(v(0,"span",4),W(1),y()),i&2){let e=R();w(),ge(e.placeholder)}}function _p(i,n){i&1&&Y(0)}function vp(i,n){if(i&1&&(v(0,"span",11),W(1),y()),i&2){let e=R(2);w(),ge(e.triggerValue)}}function Cp(i,n){if(i&1&&(v(0,"span",10),$(1,_p,1,0)(2,vp,2,1),y()),i&2){let e=R();w(),Z(1,e.customTrigger?1:2)}}function yp(i,n){if(i&1){let e=Ce();v(0,"div",12,1),G("@transformPanel.done",function(o){ne(e);let r=R();return oe(r._panelDoneAnimatingStream.next(o.toState))})("keydown",function(o){ne(e);let r=R();return oe(r._handleKeydown(o))}),Y(2,1),y()}if(i&2){let e=R();Vd("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),N("ngClass",e.panelClass)("@transformPanel","showing"),te("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var xp={transformPanelWrap:_i("transformPanelWrap",[Bt("* => void",cf("@transformPanel",[lf()],{optional:!0}))]),transformPanel:_i("transformPanel",[Vn("void",Te({opacity:0,transform:"scale(1, 0.8)"})),Bt("void => showing",st("120ms cubic-bezier(0, 0, 0.2, 1)",Te({opacity:1,transform:"scale(1, 1)"}))),Bt("* => void",st("100ms linear",Te({opacity:0})))])};var yh=0,bp=new P("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let i=h(dt);return()=>i.scrollStrategies.reposition()}});var wp=new P("MAT_SELECT_CONFIG");var Dp=new P("MatSelectTrigger"),vc=class{constructor(n,e){this.source=n,this.value=e}},bh=(()=>{class i{_scrollOptionIntoView(e){let t=this.options.toArray()[e];if(t){let o=this.panel.nativeElement,r=sf(e,this.options,this.optionGroups),s=t._getHostElement();e===0&&r===1?o.scrollTop=0:o.scrollTop=af(s.offsetTop,s.offsetHeight,o.scrollTop,o.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new vc(this,e)}get focused(){return this._focused||this._panelOpen}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Ht.required)??!1}set required(e){this._required=e,this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,t,o,r,s,a,d,p,_,x,k,L,j,ie){this._viewportRuler=e,this._changeDetectorRef=t,this._elementRef=s,this._dir=a,this._parentFormField=_,this.ngControl=x,this._liveAnnouncer=j,this._defaultOptions=ie,this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._panelOpen=!1,this._compareWith=(fe,Pt)=>fe===Pt,this._uid=`mat-select-${yh++}`,this._triggerAriaLabelledBy=null,this._destroy=new Q,this.stateChanges=new Q,this.disableAutomaticLabeling=!0,this._onChange=()=>{},this._onTouched=()=>{},this._valueId=`mat-select-value-${yh++}`,this._panelDoneAnimatingStream=new Q,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._multiple=!1,this.disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this._initialized=new Q,this.optionSelectionChanges=Pd(()=>{let fe=this.options;return fe?fe.changes.pipe(Qe(fe),Nt(()=>ze(...fe.map(Pt=>Pt.onSelectionChange)))):this._initialized.pipe(Nt(()=>this.optionSelectionChanges))}),this.openedChange=new H,this._openedStream=this.openedChange.pipe(Se(fe=>fe),rt(()=>{})),this._closedStream=this.openedChange.pipe(Se(fe=>!fe),rt(()=>{})),this.selectionChange=new H,this.valueChange=new H,this._trackedModal=null,this._skipPredicate=fe=>this.panelOpen?!1:fe.disabled,this.ngControl&&(this.ngControl.valueAccessor=this),ie?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=ie.typeaheadDebounceInterval),this._errorStateTracker=new Nn(r,x,p,d,this.stateChanges),this._scrollStrategyFactory=L,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(k)||0,this.id=this.id}ngOnInit(){this._selectionModel=new to(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(ai(),se(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(se(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(se(this._destroy)).subscribe(e=>{e.added.forEach(t=>t.select()),e.removed.forEach(t=>t.deselect())}),this.options.changes.pipe(Qe(null),se(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),t=this.ngControl;if(e!==this._triggerAriaLabelledBy){let o=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?o.setAttribute("aria-labelledby",e):o.removeAttribute("aria-labelledby")}t&&(this._previousControl!==t.control&&(this._previousControl!==void 0&&t.disabled!==null&&t.disabled!==this.disabled&&(this.disabled=t.disabled),this._previousControl=t.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let t=`${this.id}-panel`;this._trackedModal&&Xl(this._trackedModal,"aria-owns",t),qd(e,"aria-owns",t),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;Xl(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(t=>t.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let t=e.keyCode,o=t===40||t===38||t===37||t===39,r=t===13||t===32,s=this._keyManager;if(!s.isTyping()&&r&&!xt(e)||(this.multiple||e.altKey)&&o)e.preventDefault(),this.open();else if(!this.multiple){let a=this.selected;s.onKeydown(e);let d=this.selected;d&&a!==d&&this._liveAnnouncer.announce(d.viewValue,1e4)}}_handleOpenKeydown(e){let t=this._keyManager,o=e.keyCode,r=o===40||o===38,s=t.isTyping();if(r&&e.altKey)e.preventDefault(),this.close();else if(!s&&(o===13||o===32)&&t.activeItem&&!xt(e))e.preventDefault(),t.activeItem._selectViaInteraction();else if(!s&&this._multiple&&o===65&&e.ctrlKey){e.preventDefault();let a=this.options.some(d=>!d.disabled&&!d.selected);this.options.forEach(d=>{d.disabled||(a?d.select():d.deselect())})}else{let a=t.activeItemIndex;t.onKeydown(e),this._multiple&&r&&e.shiftKey&&t.activeItem&&t.activeItemIndex!==a&&t.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Ne(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(t=>t.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(t=>this._selectOptionByValue(t)),this._sortValues();else{let t=this._selectOptionByValue(e);t?this._keyManager.updateActiveItem(t):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let t=this.options.find(o=>{if(this._selectionModel.isSelected(o))return!1;try{return o.value!=null&&this._compareWith(o.value,e)}catch{return!1}});return t&&this._selectionModel.select(t),t}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof Ri?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new ef(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=ze(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(se(e)).subscribe(t=>{this._onSelect(t.source,t.isUserInput),t.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),ze(...this.options.map(t=>t._stateChanges)).pipe(se(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,t){let o=this._selectionModel.isSelected(e);e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(o!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),t&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),t&&this.focus())),o!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((t,o)=>this.sortComparator?this.sortComparator(t,o,e):e.indexOf(t)-e.indexOf(o)),this.stateChanges.next()}}_propagateChanges(e){let t;this.multiple?t=this.selected.map(o=>o.value):t=this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this._onChange(t),this.selectionChange.emit(this._getChangeEvent(t)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let t=0;t<this.options.length;t++)if(!this.options.get(t).disabled){e=t;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),t=e?e+" ":"";return this.ariaLabelledby?t+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),t=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(t+=" "+this.ariaLabelledby),t}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static{this.\u0275fac=function(t){return new(t||i)(u($t),u(Re),u(J),u(An),u(F),u(et,8),u(wi,8),u(Di,8),u(Ii,8),u(tt,10),jl("tabindex"),u(bp),u(tf),u(wp,8))}}static{this.\u0275cmp=T({type:i,selectors:[["mat-select"]],contentQueries:function(t,o,r){if(t&1&&(_e(r,Dp,5),_e(r,gi,5),_e(r,rf,5)),t&2){let s;I(s=M())&&(o.customTrigger=s.first),I(s=M())&&(o.options=s),I(s=M())&&(o.optionGroups=s)}},viewQuery:function(t,o){if(t&1&&(V(hp,5),V(up,5),V(_c,5)),t&2){let r;I(r=M())&&(o.trigger=r.first),I(r=M())&&(o.panel=r.first),I(r=M())&&(o._overlayDir=r.first)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(t,o){t&1&&G("keydown",function(s){return o._handleKeydown(s)})("focus",function(){return o._onFocus()})("blur",function(){return o._onBlur()}),t&2&&(te("id",o.id)("tabindex",o.disabled?-1:o.tabIndex)("aria-controls",o.panelOpen?o.id+"-panel":null)("aria-expanded",o.panelOpen)("aria-label",o.ariaLabel||null)("aria-required",o.required.toString())("aria-disabled",o.disabled.toString())("aria-invalid",o.errorState)("aria-activedescendant",o._getAriaActiveDescendant()),re("mat-mdc-select-disabled",o.disabled)("mat-mdc-select-invalid",o.errorState)("mat-mdc-select-required",o.required)("mat-mdc-select-empty",o.empty)("mat-mdc-select-multiple",o.multiple))},inputs:{userAriaDescribedBy:[C.None,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[C.HasDecoratorInputTransform,"disabled","disabled",ue],disableRipple:[C.HasDecoratorInputTransform,"disableRipple","disableRipple",ue],tabIndex:[C.HasDecoratorInputTransform,"tabIndex","tabIndex",e=>e==null?0:Gl(e)],hideSingleSelectionIndicator:[C.HasDecoratorInputTransform,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",ue],placeholder:"placeholder",required:[C.HasDecoratorInputTransform,"required","required",ue],multiple:[C.HasDecoratorInputTransform,"multiple","multiple",ue],disableOptionCentering:[C.HasDecoratorInputTransform,"disableOptionCentering","disableOptionCentering",ue],compareWith:"compareWith",value:"value",ariaLabel:[C.None,"aria-label","ariaLabel"],ariaLabelledby:[C.None,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[C.HasDecoratorInputTransform,"typeaheadDebounceInterval","typeaheadDebounceInterval",Gl],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],standalone:!0,features:[X([{provide:Si,useExisting:i},{provide:of,useExisting:i}]),ke,he,K],ngContentSelectors:pp,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(t,o){if(t&1){let r=Ce();be(mp),v(0,"div",2,0),G("click",function(){return ne(r),oe(o.open())}),v(3,"div",3),$(4,gp,2,1,"span",4)(5,Cp,3,1),y(),v(6,"div",5)(7,"div",6),Ae(),v(8,"svg",7),B(9,"path",8),y()()()(),$(10,yp,3,9,"ng-template",9),G("backdropClick",function(){return ne(r),oe(o.close())})("attach",function(){return ne(r),oe(o._onAttached())})("detach",function(){return ne(r),oe(o.close())})}if(t&2){let r=fi(1);w(3),te("id",o._valueId),w(),Z(4,o.empty?4:5),w(6),N("cdkConnectedOverlayPanelClass",o._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",o._scrollStrategy)("cdkConnectedOverlayOrigin",o._preferredOverlayOrigin||r)("cdkConnectedOverlayOpen",o.panelOpen)("cdkConnectedOverlayPositions",o._positions)("cdkConnectedOverlayWidth",o._overlayWidth)}},dependencies:[Ri,_c,Fn],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color);font-family:var(--mat-select-trigger-text-font);line-height:var(--mat-select-trigger-text-line-height);font-size:var(--mat-select-trigger-text-size);font-weight:var(--mat-select-trigger-text-weight);letter-spacing:var(--mat-select-trigger-text-tracking)}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color)}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color)}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color)}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform)}'],encapsulation:2,data:{animation:[xp.transformPanel]},changeDetection:0})}}return i})();function Ep(i,n){if(i&1&&(v(0,"mat-option",1),W(1),y()),i&2){let e=n.$implicit;N("value",e.key),w(),ge(e.name)}}function Sp(i,n){if(i&1&&(v(0,"mat-form-field")(1,"mat-select",0),Oe(2,Ep,2,2,"mat-option",1,In),y()()),i&2){let e=R();w(),N("placeholder",e.viewModel.name)("formControl",e.viewModel.formControl),w(),Pe(e.options)}}var wh=(()=>{class i{constructor(){this.options=[{key:1,name:"1"},{key:2,name:"2"},{key:3,name:"3"},{key:4,name:"4"},{key:5,name:"5"},{key:6,name:"6"},{key:7,name:"7"},{key:8,name:"8"},{key:9,name:"9"}]}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["outputs-select-control"]],inputs:{viewModel:"viewModel"},standalone:!0,features:[K],decls:1,vars:1,consts:[[3,"placeholder","formControl"],[3,"value"]],template:function(t,o){t&1&&$(0,Sp,4,2,"mat-form-field"),t&2&&Z(0,o.viewModel?0:-1)},dependencies:[Ut,We,Ge,Le,gi,bh],encapsulation:2,changeDetection:0})}}return i})();var Dh={[bt.INPUT]:rh,[bt.OUTPUTS_SELECT]:wh,[bt.TEXTAREA]:sh};var Ip=["containerRef"];function Mp(i,n){if(i&1&&(v(0,"div",3),W(1),y()),i&2){let e=R();w(),ge(e.viewModel==null?null:e.viewModel.name)}}var Eh=(()=>{class i{render(e){if(this.viewModel=e,!this.viewContainer)throw new Error("View container not found "+e.name);this.viewContainer.clear(),e.controls.forEach(t=>{let o=this.viewContainer.createComponent(Dh[t.type]);o.instance.viewModel=t})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["group-control"]],viewQuery:function(t,o){if(t&1&&V(Ip,7,qe),t&2){let r;I(r=M())&&(o.viewContainer=r.first)}},standalone:!0,features:[K],decls:4,vars:1,consts:[["containerRef",""],["class","f-group-name",4,"ngIf"],[1,"f-group-content"],[1,"f-group-name"]],template:function(t,o){t&1&&($(0,Mp,2,1,"div",1),v(1,"div",2),Ld(2,null,0),y()),t&2&&N("ngIf",o.viewModel==null?null:o.viewModel.name)},dependencies:[hi],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .f-group-name[_ngcontent-%COMP%]{font-size:12px;color:#666}[_nghost-%COMP%]   .f-group-content[_ngcontent-%COMP%]{padding:4px 2px 8px}"],changeDetection:0})}}return i})();var ro=class{handle(n){return{groups:n.formBuilderValue.groups.map(e=>({name:e.name,controls:e.controls.map(t=>({key:t.key,name:t.name,type:t.type,value:t.formControl.value}))}))}}};var so=class{constructor(n){this.formBuilderValue=n}};var Sh=(()=>{class i{set value(e){this._value!==e&&this.rebuild(e),this._value=e}get value(){return this._value}constructor(e){this.container=e,this.subscription$=pe.EMPTY,this._value=null,this.onChange=()=>{},this.onTouch=()=>{}}ngOnInit(){this.rebuild(this._value)}rebuild(e){let t=new qn().handle(new Bn(e));this.viewModel=t,this.subscription$.unsubscribe(),this.subscription$=this.subscribeOnFormChanges(t),this.render(t.groups)}render(e){this.dispose(),e.forEach(t=>{this.container.createComponent(Eh).instance.render(t)})}subscribeOnFormChanges(e){return e.form.valueChanges.subscribe(()=>{let t=new ro().handle(new so(e));this.onChange(t),this.onTouch()})}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouch=e}writeValue(e){e!==this.value&&(this.value=e)}dispose(){this.container.clear()}ngOnDestroy(){this.dispose(),this.subscription$.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)(u(qe))}}static{this.\u0275dir=O({type:i,selectors:[["","formBuilder",""]],inputs:{value:"value"},standalone:!0,features:[X([{provide:Xn,useExisting:Ct(()=>i),multi:!0}])]})}}return i})();var Fp=["icon-button",""],Op=["*"],Yt=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["button","icon-button",""]],standalone:!0,features:[K],attrs:Fp,ngContentSelectors:Op,decls:2,vars:0,template:function(t,o){t&1&&(be(),v(0,"mat-icon"),Y(1),y())},dependencies:[kn],styles:["[_nghost-%COMP%]{outline:none;-webkit-user-select:none;user-select:none;border:none;background:none;color:var(--gray6);width:22px;height:22px;border-radius:3px;padding:3px}[_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:block;font-size:16px;width:16px;height:16px;color:inherit}[_nghost-%COMP%]:not([disabled]){cursor:pointer}[_nghost-%COMP%]:not([disabled]):hover{background-color:var(--gray12)}[_nghost-%COMP%]:not([disabled]):active{background-color:var(--gray11)}[disabled][_nghost-%COMP%]{color:var(--gray8)}"],changeDetection:0})}}return i})();var Pp=["tooltip"],Rp=20;var Tp=new P("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let i=h(dt);return()=>i.scrollStrategies.reposition({scrollThrottle:Rp})}});function Np(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var Ap=new P("mat-tooltip-default-options",{providedIn:"root",factory:Np});var Ih="tooltip-panel",Mh=Rn({passive:!0}),kp=8,Vp=8,Lp=24,Bp=200,ao=(()=>{class i{get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=Je(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Je(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=mi(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=mi(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=e!=null?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(e,t,o,r,s,a,d,p,_,x,k,L){this._overlay=e,this._elementRef=t,this._scrollDispatcher=o,this._viewContainerRef=r,this._ngZone=s,this._platform=a,this._ariaDescriber=d,this._focusMonitor=p,this._dir=x,this._defaultOptions=k,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=jp,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Q,this._scrollStrategy=_,this._document=L,k&&(this._showDelay=k.showDelay,this._hideDelay=k.hideDelay,k.position&&(this.position=k.position),k.positionAtOrigin&&(this.positionAtOrigin=k.positionAtOrigin),k.touchGestures&&(this.touchGestures=k.touchGestures)),x.change.pipe(se(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=kp}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(se(this._destroyed)).subscribe(e=>{e?e==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([t,o])=>{e.removeEventListener(t,o,Mh)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,t){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let o=this._createOverlay(t);this._detach(),this._portal=this._portal||new Oi(this._tooltipComponent,this._viewContainerRef);let r=this._tooltipInstance=o.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe(se(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(e)}hide(e=this.hideDelay){let t=this._tooltipInstance;t&&(t.isVisible()?t.hide(e):(t._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){let r=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&r._origin instanceof F)return this._overlayRef;this._detach()}let t=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),o=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin?e||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(t);return o.positionChanges.pipe(se(this._destroyed)).subscribe(r=>{this._updateCurrentPositionClass(r.connectionPair),this._tooltipInstance&&r.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:o,panelClass:`${this._cssClassPrefix}-${Ih}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(se(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(se(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(se(this._destroyed)).subscribe(r=>{this._isTooltipVisible()&&r.keyCode===27&&!xt(r)&&(r.preventDefault(),r.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){let t=e.getConfig().positionStrategy,o=this._getOrigin(),r=this._getOverlayPosition();t.withPositions([this._addOffset(z(z({},o.main),r.main)),this._addOffset(z(z({},o.fallback),r.fallback))])}_addOffset(e){let t=Vp,o=!this._dir||this._dir.value=="ltr";return e.originY==="top"?e.offsetY=-t:e.originY==="bottom"?e.offsetY=t:e.originX==="start"?e.offsetX=o?-t:t:e.originX==="end"&&(e.offsetX=o?t:-t),e}_getOrigin(){let e=!this._dir||this._dir.value=="ltr",t=this.position,o;t=="above"||t=="below"?o={originX:"center",originY:t=="above"?"top":"bottom"}:t=="before"||t=="left"&&e||t=="right"&&!e?o={originX:"start",originY:"center"}:(t=="after"||t=="right"&&e||t=="left"&&!e)&&(o={originX:"end",originY:"center"});let{x:r,y:s}=this._invertPosition(o.originX,o.originY);return{main:o,fallback:{originX:r,originY:s}}}_getOverlayPosition(){let e=!this._dir||this._dir.value=="ltr",t=this.position,o;t=="above"?o={overlayX:"center",overlayY:"bottom"}:t=="below"?o={overlayX:"center",overlayY:"top"}:t=="before"||t=="left"&&e||t=="right"&&!e?o={overlayX:"end",overlayY:"center"}:(t=="after"||t=="right"&&e||t=="left"&&!e)&&(o={overlayX:"start",overlayY:"center"});let{x:r,y:s}=this._invertPosition(o.overlayX,o.overlayY);return{main:o,fallback:{overlayX:r,overlayY:s}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Ne(1),se(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,t){return this.position==="above"||this.position==="below"?t==="top"?t="bottom":t==="bottom"&&(t="top"):e==="end"?e="start":e==="start"&&(e="end"),{x:e,y:t}}_updateCurrentPositionClass(e){let{overlayY:t,originX:o,originY:r}=e,s;if(t==="center"?this._dir&&this._dir.value==="rtl"?s=o==="end"?"left":"right":s=o==="start"?"left":"right":s=t==="bottom"&&r==="top"?"above":"below",s!==this._currentPosition){let a=this._overlayRef;if(a){let d=`${this._cssClassPrefix}-${Ih}-`;a.removePanelClass(d+this._currentPosition),a.addPanelClass(d+s)}this._currentPosition=s}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{this._setupPointerExitEventsIfNeeded();let t;e.x!==void 0&&e.y!==void 0&&(t=e),this.show(void 0,t)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{let t=e.targetTouches?.[0],o=t?{x:t.clientX,y:t.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout);let r=500;this._touchstartTimeout=setTimeout(()=>this.show(void 0,o),this._defaultOptions.touchLongPressShowDelay??r)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",t=>{let o=t.relatedTarget;(!o||!this._overlayRef?.overlayElement.contains(o))&&this.hide()}],["wheel",t=>this._wheelListener(t)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let t=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",t],["touchcancel",t])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([t,o])=>{this._elementRef.nativeElement.addEventListener(t,o,Mh)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){let t=this._document.elementFromPoint(e.clientX,e.clientY),o=this._elementRef.nativeElement;t!==o&&!o.contains(t)&&this.hide()}}_disableNativeGesturesIfNecessary(){let e=this.touchGestures;if(e!=="off"){let t=this._elementRef.nativeElement,o=t.style;(e==="on"||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA")&&(o.userSelect=o.msUserSelect=o.webkitUserSelect=o.MozUserSelect="none"),(e==="on"||!t.draggable)&&(o.webkitUserDrag="none"),o.touchAction="none",o.webkitTapHighlightColor="transparent"}}static{this.\u0275fac=function(t){return new(t||i)(u(dt),u(F),u(Mi),u(qe),u(J),u(xe),u(Jd),u(nf),u(Tp),u(et),u(Ap,8),u(me))}}static{this.\u0275dir=O({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(t,o){t&2&&re("mat-mdc-tooltip-disabled",o.disabled)},inputs:{position:[C.None,"matTooltipPosition","position"],positionAtOrigin:[C.None,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[C.None,"matTooltipDisabled","disabled"],showDelay:[C.None,"matTooltipShowDelay","showDelay"],hideDelay:[C.None,"matTooltipHideDelay","hideDelay"],touchGestures:[C.None,"matTooltipTouchGestures","touchGestures"],message:[C.None,"matTooltip","message"],tooltipClass:[C.None,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0})}}return i})(),jp=(()=>{class i{constructor(e,t,o){this._changeDetectorRef=e,this._elementRef=t,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Q,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled=o==="NoopAnimations"}show(e){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>Lp&&e.width>=Bp}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){let t=this._tooltip.nativeElement,o=this._showAnimation,r=this._hideAnimation;if(t.classList.remove(e?r:o),t.classList.add(e?o:r),this._isVisible!==e&&(this._isVisible=e,this._changeDetectorRef.markForCheck()),e&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let s=getComputedStyle(t);(s.getPropertyValue("animation-duration")==="0s"||s.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(t.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}static{this.\u0275fac=function(t){return new(t||i)(u(Re),u(F),u(At,8))}}static{this.\u0275cmp=T({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(t,o){if(t&1&&V(Pp,7),t&2){let r;I(r=M())&&(o._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,o){t&1&&G("mouseleave",function(s){return o._handleMouseLeave(s)}),t&2&&yt("zoom",o.isVisible()?1:null)},standalone:!0,features:[K],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(t,o){if(t&1){let r=Ce();v(0,"div",1,0),G("animationend",function(a){return ne(r),oe(o._handleAnimationEnd(a))}),v(2,"div",2),W(3),y()()}t&2&&(re("mdc-tooltip--multiline",o._isMultiline),N("ngClass",o.tooltipClass),w(3),ge(o.message))},dependencies:[Fn],styles:['.mdc-tooltip__surface{word-break:break-all;word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip--showing-transition .mdc-tooltip__surface-animation{transition:opacity 150ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-tooltip--hide-transition .mdc-tooltip__surface-animation{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - 2*8px);margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - 2*8px);align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mat-mdc-tooltip .mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color)}.mat-mdc-tooltip .mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__caret-surface-top,.mat-mdc-tooltip .mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color)}.mat-mdc-tooltip .mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font);line-height:var(--mdc-plain-tooltip-supporting-text-line-height);font-size:var(--mdc-plain-tooltip-supporting-text-size);font-weight:var(--mdc-plain-tooltip-supporting-text-weight);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}}return i})();var Fh=(()=>{class i{constructor(){this.eEventType=Ve,this.request=new H}onClick(e){this.request.emit(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["workflow-action-panel"]],outputs:{request:"request"},standalone:!0,features:[K],decls:12,vars:0,consts:[["icon-button","","matTooltip","Delete","matTooltipPosition","below",3,"click"],["icon-button","","matTooltip","Select All","matTooltipPosition","below",3,"click"],["icon-button","","matTooltip","Zoom In","matTooltipPosition","below",3,"click"],["icon-button","","matTooltip","Zoom Out","matTooltipPosition","below",3,"click"],["icon-button","","matTooltip","Fit to Screen","matTooltipPosition","below",3,"click"],["icon-button","","matTooltip","1:1","matTooltipPosition","below",3,"click"]],template:function(t,o){t&1&&(v(0,"button",0),G("click",function(){return o.onClick(o.eEventType.DELETE_SELECTED)}),W(1,` delete
`),y(),v(2,"button",1),G("click",function(){return o.onClick(o.eEventType.SELECT_ALL)}),W(3,` select_all
`),y(),v(4,"button",2),G("click",function(){return o.onClick(o.eEventType.ZOOM_IN)}),W(5,` zoom_in
`),y(),v(6,"button",3),G("click",function(){return o.onClick(o.eEventType.ZOOM_OUT)}),W(7,` zoom_out
`),y(),v(8,"button",4),G("click",function(){return o.onClick(o.eEventType.FIT_TO_SCREEN)}),W(9,` zoom_in_map
`),y(),v(10,"button",5),G("click",function(){return o.onClick(o.eEventType.ONE_TO_ONE)}),W(11,` center_focus_strong
`),y())},dependencies:[Yt,ao],styles:["[_nghost-%COMP%]{display:flex;position:absolute;right:16px;top:16px;gap:12px;z-index:10}button[_ngcontent-%COMP%]{background-color:var(--gray12)!important;width:26px;height:26px;padding:5px}button[_ngcontent-%COMP%]:hover{background-color:var(--gray11)!important}"],changeDetection:0})}}return i})();var Et=class{constructor(n,e,t,o,r){this.center=n,this.radiusX=e,this.radiusY=t,this.startAngle=o,this.endAngle=r}},b=class i{static castToPoint(n){return n||i.initialize()}static initialize(n=0,e=0){return{x:n,y:e}}static copy(n){return i.initialize(n.x,n.y)}static isEqual(n,e){return n.x===e.x&&n.y===e.y}static sum(n,e){return{x:n.x+e.x,y:n.y+e.y}}static sub(n,e){return{x:n.x-e.x,y:n.y-e.y}}static div(n,e){return{x:n.x/e,y:n.y/e}}static mult(n,e){return{x:n.x*e,y:n.y*e}}static interpolatePoints(n,e,t){let o=1-t;return i.initialize(n.x*o+e.x*t,n.y*o+e.y*t)}static roundTo(n,e){let t=Math.trunc(n.x/e),o=Math.trunc(n.y/e);return{x:t*e,y:o*e}}static hypotenuse(n,e){let t=e.x-n.x,o=e.y-n.y;return Math.abs(Math.sqrt(t*t+o*o))}static distance(n,e){let t=n.x-e.x,o=n.y-e.y;return Math.sqrt(t*t+o*o)}static getMinimum(n,e){return i.initialize(Math.min(n.x,e.x),Math.min(n.y,e.y))}static getMaximum(n,e){return i.initialize(Math.max(n.x,e.x),Math.max(n.y,e.y))}static matrixTransform(n,e){let t=i.initialize(n.x,n.y),o=e.getScreenCTM();if(o){let r=e.createSVGPoint();r.x=n.x,r.y=n.y,t=r.matrixTransform(o.inverse())}return t}static elementTransform(n,e){let t=i.initialize(n.x,n.y),o=e.getBoundingClientRect();return t=i.sub(t,i.initialize(o.left,o.top)),t}},A=class i{constructor(n=0,e=0){this.x=n,this.y=e}static fromPoint(n){return new i(n.x,n.y)}add(n){let e=b.sum(this,n);return i.fromPoint(e)}sub(n){let e=b.sub(this,n);return i.fromPoint(e)}subNumber(n){let e=b.sub(this,new i(n,n));return i.fromPoint(e)}div(n){let e=b.div(this,n);return i.fromPoint(e)}mult(n){let e=b.mult(this,n);return i.fromPoint(e)}matrixTransform(n){let e=b.matrixTransform(this,n);return i.fromPoint(e)}elementTransform(n){let e=b.elementTransform(this,n);return i.fromPoint(e)}},Ti=class{static initialize(n=b.initialize(),e=b.initialize()){return{point1:n,point2:e}}static copy(n){return{point1:n.point1,point2:n.point2}}static hypotenuse(n){return Math.sqrt(Math.pow(n.point1.x-n.point2.x,2)+Math.pow(n.point1.y-n.point2.y,2))}},St=class{constructor(n,e){this.point1=n,this.point2=e}},E=class i{static initialize(n=0,e=0,t=0,o=0){t<0&&(n=n+t,t=-t),o<0&&(e=e+o,o=-o);let r=b.initialize(n+t/2,e+o/2);return{x:n,y:e,width:t,height:o,gravityCenter:r}}static copy(n){return i.initialize(n.x,n.y,n.width,n.height)}static fromElement(n){let{x:e,y:t,width:o,height:r}=n.getBoundingClientRect();return i.initialize(e,t,o,r)}static isIncludePoint(n,e){return e.x>=i.left(n)&&e.x<=i.right(n)&&e.y>=i.top(n)&&e.y<=i.bottom(n)}static intersectionWithRect(n,e){return!(n.x+n.width<e.x||e.x+e.width<n.x||n.y+n.height<e.y||e.y+e.height<n.y)}static left(n){return n.x}static top(n){return n.y}static right(n){return n.x+n.width}static bottom(n){return n.y+n.height}static addPoint(n,e){let t=i.copy(n);return t.x+=e.x,t.y+=e.y,this.initialize(t.x,t.y,t.width,t.height)}static mult(n,e){let t=i.copy(n);return t.x*=e,t.y*=e,t.width*=e,t.height*=e,this.initialize(t.x,t.y,t.width,t.height)}static div(n,e){let t=i.copy(n);return t.x/=e,t.y/=e,t.width/=e,t.height/=e,this.initialize(t.x,t.y,t.width,t.height)}static addPointToSize(n,e){let t=i.copy(n);return t.width+=e.x,t.height+=e.y,this.initialize(t.x,t.y,t.width,t.height)}static union(n){return!n||n.length===0?null:n.reduce((e,t)=>{let o=Math.min(e.x,t.x),r=Math.min(e.y,t.y),s=Math.max(e.x+e.width,t.x+t.width),a=Math.max(e.y+e.height,t.y+t.height);return i.initialize(o,r,s-o,a-r)},n[0])}static elementTransform(n,e){let t=e.getBoundingClientRect(),o=b.sub(n,b.initialize(t.left,t.top));return i.initialize(o.x,o.y,n.width,n.height)}static updateIsNotFinite(n){return!Number.isFinite(n.width)||!Number.isFinite(n.height)||!Number.isFinite(n.x)||!Number.isFinite(n.y)?i.initialize(0,0,0,0):n}};function Oh(i,n){let e=Math.max(i.width,n),t=Math.max(i.height,n),o=(e-i.width)/2,r=(t-i.height)/2;return E.initialize(i.x-o,i.y-r,e,t)}function Ph(i,n,e=10){let t,o,r,s;for(let a of i){let d=n.gravityCenter.x,p=n.gravityCenter.y,_=a.x+a.width,x=a.y+a.height,k={x:[{value:a.x,distance:n.x-a.x},{value:_,distance:n.x-_},{value:a.gravityCenter.x,distance:d-a.gravityCenter.x},{value:a.x,distance:n.x+n.width-a.x},{value:_,distance:n.x+n.width-_}],y:[{value:a.y,distance:n.y-a.y},{value:x,distance:n.y-x},{value:a.gravityCenter.y,distance:p-a.gravityCenter.y},{value:a.y,distance:n.y+n.height-a.y},{value:x,distance:n.y+n.height-x}]};for(let{value:L,distance:j}of k.x)Math.abs(j)<=e&&(o===void 0||Math.abs(j)<Math.abs(o))&&(o=j,t=L);for(let{value:L,distance:j}of k.y)Math.abs(j)<=e&&(s===void 0||Math.abs(j)<Math.abs(s))&&(s=j,r=L)}return{xResult:{value:t,distance:o},yResult:{value:r,distance:s}}}function Rh(i,n){i=E.updateIsNotFinite(i),n.setAttribute("x",i.x.toString()),n.setAttribute("y",i.y.toString()),n.setAttribute("width",i.width.toString()),n.setAttribute("height",i.height.toString())}var Ee=class i{constructor(n=0,e=0,t=0,o=0,r=0,s=0,a=0,d=0){this.x=n,this.y=e,this.width=t,this.height=o,this.radius1=r,this.radius2=s,this.radius3=a,this.radius4=d,this.gravityCenter=b.initialize(),this.gravityCenter=this.calculateGravityCenter(this)}calculateGravityCenter(n){return new A(n.x+n.width/2,n.y+n.height/2)}static fromRect(n){return new i(n.x,n.y,n.width,n.height)}static fromRoundedRect(n){return new i(n.x,n.y,n.width,n.height,n.radius1,n.radius2,n.radius3,n.radius4)}addPoint(n){let e=i.fromRoundedRect(this);return e.x+=n.x,e.y+=n.y,e.gravityCenter=this.calculateGravityCenter(e),e}},It=class{static initialize(n=0,e=0){return{width:n,height:e}}};function zp(){return{position:b.initialize(),scaledPosition:b.initialize(),scale:1,rotate:0}}function Hp(i){let n;if(i){i=i.replace("matrix(",""),i=i.replace(")","");let e=i.split(" ");n={position:{x:Number(e[4]),y:Number(e[5])},scaledPosition:b.initialize(),scale:Number(e[0]),rotate:0}}return n}var ft=class{static toString(n){let e=b.sum(n.position,n.scaledPosition);return`matrix(${n.scale}, 0, 0, ${n.scale}, ${e.x}, ${e.y})`}static fromString(n){return Hp(n)}static default(){return zp()}},De=class i{static initialize(n=0,e=0){return b.initialize(n,e)}static fromPoints(n,e){return i.initialize(e.x-n.x,e.y-n.y)}static vectorLength(n){return Math.sqrt(i.magnitudeSquared(n))}static magnitudeSquared(n){return n.x*n.x+n.y*n.y}static dotProduct(n,e){return n.x*e.x+n.y*e.y}static crossProduct(n,e){return n.x*e.y-n.y*e.x}static subtract(n,e){return i.initialize(n.x-e.x,n.y-e.y)}static add(n,e){return i.initialize(n.x+e.x,n.y+e.y)}static scale(n,e){return i.initialize(n.x*e,n.y*e)}static angle(n,e){let t=Math.acos(Math.max(-1,Math.min(i.dotProduct(n,e)/(i.vectorLength(n)*i.vectorLength(e)),1)));return i.crossProduct(n,e)<0?-t:t}},Cc=class{static parseRoundedRect(n){let e=Math.PI*.5,t=n.x,o=n.y,r=n.x+n.width,s=n.y+n.height,a=n.x+n.radius1,d=n.y+n.radius1,p=n.x+n.width-n.radius2,_=n.y+n.radius2,x=n.x+n.width-n.radius3,k=n.y+n.height-n.radius3,L=n.x+n.radius4,j=n.y+n.height-n.radius4;return[new Et({x:a,y:d},n.radius1,n.radius1,2*e,3*e),new St({x:a,y:o},{x:p,y:o}),new Et({x:p,y:_},n.radius2,n.radius2,3*e,4*e),new St({x:r,y:_},{x:r,y:k}),new Et({x,y:k},n.radius3,n.radius3,0,e),new St({x,y:s},{x:L,y:s}),new Et({x:L,y:j},n.radius4,n.radius4,e,2*e),new St({x:t,y:j},{x:t,y:d})]}},Xt=class{static getRoundedRectIntersections(n,e,t){let o=Cc.parseRoundedRect(t);for(let r of o)if(r instanceof Et){let s=this.intersectArcWithLine(r,n,e);if(s.length>0)return s}else if(r instanceof St){let s=this.intersectLineSegments(n,e,r.point1,r.point2);if(s)return[s]}return[]}static getRoundedRectIntersectionsWithSVGPath(n,e){let t=n.getTotalLength(),o=[];for(let r=0;r<=t;r+=1){let s=n.getPointAtLength(r);o.push({x:s.x,y:s.y})}for(let r=1;r<o.length;r++){let s={point1:{x:o[r-1].x,y:o[r-1].y},point2:{x:o[r].x,y:o[r].y}},a=this.getRoundedRectIntersections(s.point1,s.point2,e);if(a.length>0)return a}return[]}static intersectArcWithLine(n,e,t){return this.filterPointsWithinArc(this.findEllipseLineIntersections(n.center,n.radiusX,n.radiusY,e,t),n)}static intersectLineSegments(n,e,t,o){let r=e.x-n.x,s=e.y-n.y,a=o.x-t.x,d=o.y-t.y,p=(-s*(n.x-t.x)+r*(n.y-t.y))/(-a*s+r*d),_=(a*(n.y-t.y)-d*(n.x-t.x))/(-a*s+r*d);return p>=0&&p<=1&&_>=0&&_<=1?{x:n.x+_*r,y:n.y+_*s}:null}static filterPointsWithinArc(n,e){let{center:t,startAngle:o,endAngle:r}=e;if(n.length===0)return n;r<o&&([o,r]=[r,o]),(o<0||r<0)&&(o+=2*Math.PI,r+=2*Math.PI);let s=[];for(let a of n){let d=this.normalizeAngle(De.angle(De.initialize(1,0),De.initialize(a.x-t.x,a.y-t.y)));d<o&&(d+=2*Math.PI),o<=d&&d<=r&&s.push(a)}return s}static normalizeAngle(n){let e=n%(2*Math.PI);return e<0?e+2*Math.PI:e}static findEllipseLineIntersections(n,e,t,o,r){let s=De.initialize(o.x,o.y),a=De.fromPoints(o,r),d=De.initialize(n.x,n.y),p=De.subtract(s,d),_=De.initialize(a.x/(e*e),a.y/(t*t)),x=De.initialize(p.x/(e*e),p.y/(t*t)),k=De.dotProduct(a,_),L=De.dotProduct(a,x),j=De.dotProduct(p,x)-1,ie=L*L-k*j;return ie<0?[]:this.calculateIntersectionPoints(ie,k,L,o,r)}static calculateIntersectionPoints(n,e,t,o,r){let s=[];if(n>0){let a=Math.sqrt(n),d=(-t-a)/e,p=(-t+a)/e;d>=0&&d<=1&&s.push(b.interpolatePoints(o,r,d)),p>=0&&p<=1&&s.push(b.interpolatePoints(o,r,p))}else{let a=-t/e;a>=0&&a<=1&&s.push(b.interpolatePoints(o,r,a))}return s}};var yc=class{handle(n,e){let t=!0;if(this.validator&&(t=e.get(this.validator).handle(n)),!!t)return e.get(this.execution).handle(n)}execute(n,e){return e.get(this.execution).handle(n)}setValidator(n){this.validator=n}setExecution(n){this.execution=n}},D=class i{constructor(n){this.injector=n}static registerPipeline(n,e,t){let o=this.pipelines.get(n.name)||new yc;t?o.setValidator(e):o.setExecution(e),this.pipelines.set(n.name,o)}send(n){let e=i.pipelines.get(n.constructor.name);if(e)return e.handle(n,this.injector);throw new Error("Handler not registered for request type.")}execute(n){return i.pipelines.get(n.constructor.name).execute(n,this.injector)}};D.pipelines=new Map;D.\u0275fac=function(n){return new(n||D)(c(Ke))};D.\u0275prov=l({token:D,factory:D.\u0275fac});function m(i){return function(n){D.registerPipeline(i,n,!1)}}function ae(i){return function(n){D.registerPipeline(i,n,!0)}}var Wp=(()=>{class i{setItem(e,t){localStorage.setItem(e,t)}getItem(e){return localStorage.getItem(e)}removeItem(e){localStorage.removeItem(e)}clear(){localStorage.clear()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Up=(()=>{class i{storage={};setItem(e,t){this.storage[e]=t}getItem(e){return this.storage[e]||null}removeItem(e){delete this.storage[e]}clear(){this.storage={}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$p=new P("F_LOCAL_STORAGE",{providedIn:"root",factory:()=>On(h(Sn))?h(Wp):h(Up)}),Yp=(()=>{class i{getComputedStyle(e){return window.getComputedStyle(e)}get innerWidth(){return window.innerWidth}get innerHeight(){return window.innerHeight}get pageXOffset(){return window.pageXOffset}get pageYOffset(){return window.pageYOffset}isMediaQuery(e){return window.matchMedia(e).matches}requestAnimationFrame(e){return window.requestAnimationFrame(e)}get location(){return window.location}open(e,t,o){window.open(e,t,o)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Xp=(()=>{class i{getComputedStyle(e){return new Proxy({getPropertyValue:t=>"0"},{get:(t,o)=>o==="getPropertyValue"?t.getPropertyValue:"0"})}get innerWidth(){return 0}get innerHeight(){return 0}get pageXOffset(){return 0}get pageYOffset(){return 0}isMediaQuery(e){return!1}requestAnimationFrame(e){return setTimeout(e,0)}get location(){return{href:"",pathname:"",search:"",hash:"",origin:""}}open(e,t,o){}static \u0275fac=function(t){return new(t||i)};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Qp=new P("F_WINDOW",{providedIn:"root",factory:()=>On(h(Sn))?h(Yp):h(Xp)}),Ue=function(i){return i.MAC_OS="macos",i.IOS="ios",i.WINDOWS="windows",i.ANDROID="android",i.LINUX="linux",i}(Ue||{}),xc;try{xc=typeof Intl<"u"&&Intl.v8BreakIterator}catch{xc=!1}var Ni=(()=>{class i{_platformId;isBrowser=!1;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||xc)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(e){this._platformId=e,this.isBrowser=this._platformId?On(this._platformId):typeof document=="object"&&!!document}getOS(){let e=navigator.userAgent.toLowerCase(),t=/(macintosh|macintel|macppc|mac68k|macos)/i,o=/(win32|win64|windows|wince)/i,r;return t.test(e)?r=Ue.MAC_OS:this.IOS?r=Ue.IOS:o.test(e)?r=Ue.WINDOWS:this.ANDROID?r=Ue.ANDROID:!r&&/linux/.test(e)&&(r=Ue.LINUX),r}static \u0275fac=function(t){return new(t||i)(c(Sn))};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ce=(()=>{class i{injectedDocument;windowService;localStorageService;platformService;constructor(e,t,o,r){this.injectedDocument=e,this.windowService=t,this.localStorageService=o,this.platformService=r}isBrowser(){return this.platformService.isBrowser}get window(){return this.windowService}get localStorage(){return this.localStorageService}get document(){return this.injectedDocument}toPixels(e,t,o,r){if(e.endsWith("px"))return parseFloat(e);if(e.endsWith("%")){let s=parseFloat(e)/100;return Math.max(t,o)*s}else{if(e.endsWith("em"))return parseFloat(e)*parseFloat(r);if(e.endsWith("rem"))return parseFloat(e)*parseFloat(getComputedStyle(this.document.documentElement).fontSize);if(e.endsWith("vh")){let s=this.window.innerHeight/100;return parseFloat(e)*s}else if(e.endsWith("vw")){let s=this.window.innerWidth/100;return parseFloat(e)*s}}return parseFloat(e)||0}static \u0275fac=function(t){return new(t||i)(c(me),c(Qp),c($p),c(Ni))};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Qt=class{constructor(n,e){this.event=n,this.target=e,this.event=n}get originalEvent(){return this.event}get targetElement(){return this.target||this.originalEvent.target}setTarget(n){this.target=n}preventDefault(){this.originalEvent.preventDefault()}get isEventInLockedContext(){return this.targetElement.closest("[fLockedContext]")!==null}},Ai=class extends Qt{constructor(n,e){super(n,e)}isMouseLeftButton(){return this.originalEvent.button===0}isMouseRightButton(){return this.originalEvent.buttons===2}getPosition(){return{x:this.originalEvent.clientX,y:this.originalEvent.clientY}}},bc=class extends Qt{constructor(n){super(n)}isMouseLeftButton(){return!0}isMouseRightButton(){return!1}getPosition(){return{x:this.originalEvent.touches[0].clientX,y:this.originalEvent.touches[0].clientY}}},wc=class extends Qt{constructor(n,e){super(n,e)}isMouseLeftButton(){return!0}isMouseRightButton(){return!1}getPosition(){return{x:this.originalEvent.targetTouches[0].clientX,y:this.originalEvent.targetTouches[0].clientY}}},Dc=class extends Qt{constructor(n){super(n)}isMouseLeftButton(){return!0}isMouseRightButton(){return!1}getPosition(){return{x:this.originalEvent.changedTouches[0].clientX,y:this.originalEvent.changedTouches[0].clientY}}},de=class i{static isPassiveEventListenerSupported(){if(i.isSupported==null&&typeof window<"u")try{window.addEventListener("test",i.emptyListener,{passive:!0}),i.isSupported=!0}catch{i.isSupported=!1}return i.isSupported}static passiveEventListener(n){return i.isPassiveEventListenerSupported()?n:!!n.capture}static activeListener(){return i.passiveEventListener({passive:!1})}static passiveListener(){return i.passiveEventListener({passive:!0})}static emptyListener(){return()=>{}}},Zp=800,lo=class{constructor(n){this.ngZone=n,this.mouseListeners=de.emptyListener(),this.touchListeners=de.emptyListener(),this.startListeners=de.emptyListener(),this.lastTouchEventTime=0,this.isDragStarted=!1,this.dragStartThreshold=3,this.dragStartDelay=0,this.dragStartTime=0,this.dragStartPosition={x:0,y:0},this.moveHandler=this.checkDragSequenceToStart,this.pointerDownElement=null,this.onMouseDown=e=>{var t;let o=this.isSyntheticEvent(e),r=qp(e),s=new Ai(e);if(this.pointerDownElement=s.targetElement,o||r||this.disabled)return;this.onPointerDown(s)&&(this.dragStartTime=Date.now(),this.dragStartPosition=s.getPosition(),(t=this.ngZone)===null||t===void 0||t.runOutsideAngular(()=>{var d,p,_;(d=this.document)===null||d===void 0||d.addEventListener("selectstart",this.onSelectStart,de.activeListener()),(p=this.document)===null||p===void 0||p.addEventListener("mousemove",this.onMouseMove),(_=this.document)===null||_===void 0||_.addEventListener("mouseup",this.onMouseUp)}),this.mouseListeners=()=>{var d,p,_;(d=this.document)===null||d===void 0||d.removeEventListener("selectstart",this.onSelectStart,de.activeListener()),(p=this.document)===null||p===void 0||p.removeEventListener("mousemove",this.onMouseMove),(_=this.document)===null||_===void 0||_.removeEventListener("mouseup",this.onMouseUp)})},this.onTouchDown=e=>{var t;let o=Jp(e),r=new bc(e);if(this.pointerDownElement=r.targetElement,o||this.disabled)return;this.onPointerDown(r)&&(this.dragStartTime=Date.now(),this.dragStartPosition=r.getPosition(),(t=this.ngZone)===null||t===void 0||t.runOutsideAngular(()=>{var a,d,p;(a=this.document)===null||a===void 0||a.addEventListener("selectstart",this.onSelectStart,de.activeListener()),(d=this.document)===null||d===void 0||d.addEventListener("touchmove",this.onTouchMove),(p=this.document)===null||p===void 0||p.addEventListener("touchend",this.onTouchUp)}),this.touchListeners=()=>{var a,d,p;(a=this.document)===null||a===void 0||a.removeEventListener("selectstart",this.onSelectStart,de.activeListener()),(d=this.document)===null||d===void 0||d.removeEventListener("touchmove",this.onTouchMove),(p=this.document)===null||p===void 0||p.removeEventListener("touchend",this.onTouchUp)})},this.onSelectStart=e=>{this.onSelect(e)},this.onMouseMove=e=>{this.moveHandler(new Ai(e))},this.onTouchMove=e=>{this.moveHandler(new wc(e))},this.onMouseUp=e=>{this.isDragStarted&&this.onPointerUp(new Ai(e)),this.endDragSequence()},this.onTouchUp=e=>{this.isDragStarted&&this.onPointerUp(new Dc(e)),this.endDragSequence()}}isSyntheticEvent(n){return!!this.lastTouchEventTime&&this.lastTouchEventTime+Zp>Date.now()}checkDragSequenceToStart(n){let e=n.getPosition();if(!this.isDragStarted&&this.pointerDownElement){n.setTarget(this.pointerDownElement);let t=Math.abs(e.x-this.dragStartPosition.x),o=Math.abs(e.y-this.dragStartPosition.y);if(t+o>=this.dragStartThreshold){if(!(Date.now()>=this.dragStartTime+this.dragStartDelay)){this.endDragSequence();return}n.preventDefault(),this.prepareDragSequence(n),this.isDragStarted=!0,this.moveHandler=this.onPointerMove,Kp(n.originalEvent)&&(this.lastTouchEventTime=Date.now())}}}endDragSequence(){this.isDragStarted=!1,this.pointerDownElement=null,this.moveHandler=this.checkDragSequenceToStart,this.mouseListeners(),this.mouseListeners=de.emptyListener(),this.touchListeners(),this.touchListeners=de.emptyListener(),this.finalizeDragSequence()}subscribe(n){var e;this.document&&this.unsubscribe(),this.document=n,(e=this.ngZone)===null||e===void 0||e.runOutsideAngular(()=>{n.addEventListener("mousedown",this.onMouseDown,de.activeListener()),n.addEventListener("touchstart",this.onTouchDown,de.passiveListener())}),this.startListeners=()=>{n.removeEventListener("mousedown",this.onMouseDown,de.activeListener()),n.removeEventListener("touchstart",this.onTouchDown,de.passiveListener())}}unsubscribe(){this.startListeners(),this.startListeners=de.emptyListener(),this.touchListeners(),this.touchListeners=de.emptyListener(),this.mouseListeners(),this.mouseListeners=de.emptyListener()}};function Kp(i){return i.type[0]==="t"}function qp(i){return i.buttons===0||i.offsetX===0&&i.offsetY===0}function Jp(i){let n=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!!n&&n.identifier===-1&&(n.radiusX==null||n.radiusX===1)&&(n.radiusY==null||n.radiusY===1)}var eg=["f-connection-text",""],tg=["f-connection-drag-handle",""],ig=["fConnectionGradient",""],ng=["f-connection-path",""],og=["fConnectionSelection",""],Lh=["defs"],Bh=["fConnectionCenter"],jh=["*",[["","fConnectionCenter",""]]],zh=["*","[fConnectionCenter]"];function rg(i,n){i&1&&(v(0,"div",10,1),Y(2,1),y())}function sg(i,n){i&1&&(v(0,"div",10,1),Y(2,1),y())}var ag="[_nghost-%COMP%]{pointer-events:none;position:absolute}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]   .f-connection-group[_ngcontent-%COMP%]{pointer-events:all}[_nghost-%COMP%]   .f-connection-center[_ngcontent-%COMP%]{pointer-events:all}";var lg=["*"],cg=["fGroupsContainer"],dg=["fNodesContainer"],fg=["fConnectionsContainer"],hg=[[["","fGroup",""]],[["f-snap-connection"]],[["f-connection"]],[["f-connection-for-create"]],[["","fNode",""]]],ug=["[fGroup]","f-snap-connection","f-connection","f-connection-for-create","[fNode]"],mg=[[["","fDefinitions",""]],[["f-background"]],[["f-line-alignment"]],[["f-canvas"]],[["f-selection-area"]],[["f-minimap"]]],pg=["[fDefinitions]","f-background","f-line-alignment","f-canvas","f-selection-area","f-minimap"],Hh=new P("F_BACKGROUND_PATTERN"),Xs=class{element;constructor(n){this.element=n}},gg=(()=>{let i=class co{_fBrowser=h(ce);handle(e){return this._getRoundedRect(E.fromElement(e.element),e.element,this._getComputedStyle(e.element))}_getRoundedRect(e,t,o){return new Ee(e.x,e.y,e.width,e.height,this._toPixels(o.borderTopLeftRadius,t,o.fontSize),this._toPixels(o.borderTopRightRadius,t,o.fontSize),this._toPixels(o.borderBottomRightRadius,t,o.fontSize),this._toPixels(o.borderBottomLeftRadius,t,o.fontSize))}_getComputedStyle(e){return this._fBrowser.window.getComputedStyle(e)}_toPixels(e,t,o){return this._fBrowser.toPixels(e,t.clientWidth,t.clientHeight,o)||0}static \u0275fac=function(t){return new(t||co)};static \u0275prov=l({token:co,factory:co.\u0275fac})};return i=f([m(Xs)],i),i})(),Qs=class{fBackground;constructor(n){this.fBackground=n}},Mt=class{},_g=(()=>{let i=class fo{_fComponentsStore=h(g);handle(e){this._fComponentsStore.dataChanged()}static \u0275fac=function(t){return new(t||fo)};static \u0275prov=l({token:fo,factory:fo.\u0275fac})};return i=f([m(Mt)],i),i})(),Zs=class{};function rd(i){let n;return e=>()=>{clearTimeout(n),n=setTimeout(()=>e(),i)}}var ht=class{_listeners=new Set;notify(){this._listeners.forEach(n=>n())}listen(n){return this._listeners.add(n),()=>this.stop(n)}stop(n){this._listeners.delete(n)}},Sc=class extends ht{_htmlElement;_observer=new ResizeObserver(()=>this.notify());_isObserving=!1;constructor(n){super(),this._htmlElement=n}listen(n){return this._isObserving||(this._observer.observe(this._htmlElement),this._isObserving=!0),super.listen(n)}stop(n){super.stop(n),this._listeners.size===0&&this._disconnect()}_disconnect(){this._observer.unobserve(this._htmlElement),this._observer.disconnect(),this._isObserving=!1}},Ft=class i{_channels=[];_operators=[];constructor(...n){this._channels=[...n]}pipe(...n){let e=new i(...this._channels);return e._operators=[...this._operators,...n],e}listen(n,e){let t=e;this._operators.forEach(r=>{t=r(t)});let o=this._channels.map(r=>r.listen(()=>t()));n.onDestroy(()=>{o.forEach(r=>r())})}};function pl(){return i=>(i(),i)}var vg=(()=>{let i=class ho{_fComponentsStore=h(g);handle(e){return new Ft(this._fComponentsStore.dataChanges$).pipe(pl(),rd(1))}static \u0275fac=function(t){return new(t||ho)};static \u0275prov=l({token:ho,factory:ho.\u0275fac})};return i=f([m(Zs)],i),i})(),Ks=class{},Cg=(()=>{let i=class uo{_fComponentsStore=h(g);handle(e){return new Ft(this._fComponentsStore.countChanges$).pipe(pl(),rd(1))}static \u0275fac=function(t){return new(t||uo)};static \u0275prov=l({token:uo,factory:uo.\u0275fac})};return i=f([m(Ks)],i),i})(),Ic=class{},yg=(()=>{let i=class mo{_fComponentsStore=h(g);handle(e){return new Ft(this._fComponentsStore.transformChanges$,this._fComponentsStore.dataChanges$,this._fComponentsStore.countChanges$)}static \u0275fac=function(t){return new(t||mo)};static \u0275prov=l({token:mo,factory:mo.\u0275fac})};return i=f([m(Ic)],i),i})(),mt=class{},g=(()=>{class i{transformChanges$=new ht;dataChanges$=new ht;countChanges$=new ht;get flowHost(){return this.fFlow?.hostElement}fFlow;fCanvas;fBackground;fNodes=[];fConnections=[];fTempConnection;fSnapConnection;fMarkers=[];fOutputs=[];fInputs=[];fOutlets=[];fDraggable;addComponent(e,t){e.push(t),this.countChanged()}removeComponent(e,t){let o=e.indexOf(t);o>-1&&(e.splice(o,1),this.countChanged())}countChanged(){this.countChanges$.notify()}dataChanged(){this.dataChanges$.notify()}transformChanged(){this.transformChanges$.notify()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=l({token:i,factory:i.\u0275fac})}return i})(),xg=(()=>{let i=class po{_fComponentsStore=h(g);handle(e){this._fComponentsStore.transformChanged()}static \u0275fac=function(t){return new(t||po)};static \u0275prov=l({token:po,factory:po.\u0275fac})};return i=f([m(mt)],i),i})(),bg=[_g,Cg,vg,yg,xg,g],wg=(()=>{let i=class go{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fBackground=e.fBackground}static \u0275fac=function(t){return new(t||go)};static \u0275prov=l({token:go,factory:go.\u0275fac})};return i=f([m(Qs)],i),i})(),qs=class{fPattern;constructor(n){this.fPattern=n}},Dg=0,Eg=(()=>{let i=class _o{fComponentsStore;fBrowser;get fBackground(){return this.fComponentsStore.fBackground}constructor(e,t){this.fComponentsStore=e,this.fBrowser=t}handle(e){let t=e.fPattern?.hostElement.getElementsByTagName("pattern")||[],o=t.length?t[0]:void 0;if(o){let r=xn("defs",this.fBrowser);o.id="f-background-pattern-"+Dg++,e.fPattern?.hostElement.remove(),r.appendChild(o),this.fBackground.hostElement?.firstChild?.appendChild(r);let s=xn("rect",this.fBrowser);s.setAttribute("fill","url(#"+o.id+")"),s.setAttribute("width","100%"),s.setAttribute("height","100%"),this.fBackground.hostElement.firstChild?.appendChild(s);let a=this.fComponentsStore.fCanvas?.transform||ft.default();e.fPattern?.setTransform(a)}}static \u0275fac=function(t){return new(t||_o)(c(g),c(ce))};static \u0275prov=l({token:_o,factory:_o.\u0275fac})};return i=f([m(qs)],i),i})(),Js=class{fConnection;constructor(n){this.fConnection=n}},Sg=(()=>{let i=class vo{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fBackground=void 0}static \u0275fac=function(t){return new(t||vo)};static \u0275prov=l({token:vo,factory:vo.\u0275fac})};return i=f([m(Js)],i),i})(),ki=class{fTransform;constructor(n){this.fTransform=n}},Ig=(()=>{let i=class Co{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fBackground?.setTransform(e.fTransform)}static \u0275fac=function(t){return new(t||Co)};static \u0275prov=l({token:Co,factory:Co.\u0275fac})};return i=f([m(ki)],i),i})(),Mg=[wg,Eg,Sg,Ig],ea=class{fCanvas;constructor(n){this.fCanvas=n}},Fg=(()=>{let i=class yo{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fCanvas=e.fCanvas}static \u0275fac=function(t){return new(t||yo)};static \u0275prov=l({token:yo,factory:yo.\u0275fac})};return i=f([m(ea)],i),i})(),ta=class{id;animated;constructor(n,e){this.id=n,this.animated=e}},Og=(()=>{let i=class xo{_fComponentsStore=h(g);get transform(){return this._fComponentsStore.fCanvas.transform}_fMediator=h(D);handle(e){let t=this.getNode(e.id);t&&(this.toCenter(this.getNodeRect(t),this.getFlowRect(),t.position),this._fMediator.send(new Kt(e.animated)))}toCenter(e,t,o){this.transform.scaledPosition=b.initialize(),this.transform.position=b.initialize((t.width-e.width)/2-o.x*this.transform.scale,(t.height-e.height)/2-o.y*this.transform.scale)}getNode(e){return this._fComponentsStore.fNodes.find(t=>t.fId===e)}getNodeRect(e){return E.fromElement(e.hostElement)}getFlowRect(){return E.fromElement(this._fComponentsStore.fFlow.hostElement)}static \u0275fac=function(t){return new(t||xo)};static \u0275prov=l({token:xo,factory:xo.\u0275fac})};return i=f([m(ta)],i),i})(),ia=class{toCenter;animated;constructor(n,e){this.toCenter=n,this.animated=e}},Pg=(()=>{let i=class bo{_fComponentsStore=h(g);get transform(){return this._fComponentsStore.fCanvas.transform}_fMediator=h(D);handle(e){let t=this._fMediator.send(new ni)||E.initialize();t.width===0||t.height===0||(this.fitToParent(t,E.fromElement(this._fComponentsStore.fFlow.hostElement),this._fComponentsStore.fNodes.map(o=>o.position),e.toCenter),this._fMediator.send(new Kt(e.animated)))}fitToParent(e,t,o,r){this.transform.scaledPosition=b.initialize(),this.transform.position=this.getZeroPositionWithoutScale(o);let s=e.width/this.transform.scale+r.x,a=e.height/this.transform.scale+r.y;(s>t.width||a>t.height||s<t.width&&a<t.height)&&(this.transform.scale=Math.min(t.width/s,t.height/a));let d=(t.width-s*this.transform.scale)/2-this.transform.position.x*this.transform.scale,p=(t.height-a*this.transform.scale)/2-this.transform.position.y*this.transform.scale;this.transform.position=b.initialize(d+r.x/2*this.transform.scale,p+r.y/2*this.transform.scale)}getZeroPositionWithoutScale(e){let t=e.length?Math.min(...e.map(r=>r.x)):0,o=e.length?Math.min(...e.map(r=>r.y)):0;return b.initialize(t,o)}static \u0275fac=function(t){return new(t||bo)};static \u0275prov=l({token:bo,factory:bo.\u0275fac})};return i=f([m(ia)],i),i})(),Vi=class{},Rg=(()=>{let i=class wo{_fComponentsStore=h(g);handle(e){let t=this._fComponentsStore.fCanvas;if(!t)throw new Error("Canvas not found in store");return t}static \u0275fac=function(t){return new(t||wo)};static \u0275prov=l({token:wo,factory:wo.\u0275fac})};return i=f([m(Vi)],i),i})(),na=class{transform;position;constructor(n,e){this.transform=n,this.position=e}},Tg=(()=>{let i=class Do{_fComponentsStore=h(g);handle(e){if(!e.position)return;let t=b.sum(e.transform.position,e.transform.scaledPosition);b.isEqual(t,e.position)||(e.transform.position=e.position,e.transform.scaledPosition=b.initialize(),this._fComponentsStore.fCanvas?.redraw())}static \u0275fac=function(t){return new(t||Do)};static \u0275prov=l({token:Do,factory:Do.\u0275fac})};return i=f([m(na)],i),i})(),oa=class{transform;scale;constructor(n,e){this.transform=n,this.scale=e}},Ng=(()=>{let i=class Eo{_fComponentsStore=h(g);handle(e){e.scale&&(e.transform.scale=e.scale,this._fComponentsStore.fCanvas?.redraw())}static \u0275fac=function(t){return new(t||Eo)};static \u0275prov=l({token:Eo,factory:Eo.\u0275fac})};return i=f([m(oa)],i),i})(),Kt=class{animated;constructor(n){this.animated=n}};function Gh(i,n){let e=t=>{t.propertyName==="transform"&&(i.removeEventListener("transitionend",e),n(t))};i.addEventListener("transitionend",e)}var Ag=(()=>{let i=class So{_fComponentsStore=h(g);get _fCanvasElement(){return this._fComponentsStore.fCanvas.hostElement}handle(e){e.animated?this._redrawWithAnimation():this._redraw(),this._fComponentsStore.fCanvas.emitCanvasChangeEvent()}_redrawWithAnimation(){this._fComponentsStore.fCanvas.redrawWithAnimation(),Gh(this._fCanvasElement,()=>this._fComponentsStore.dataChanged())}_redraw(){this._fComponentsStore.fCanvas.redraw(),this._fComponentsStore.dataChanged()}static \u0275fac=function(t){return new(t||So)};static \u0275prov=l({token:So,factory:So.\u0275fac})};return i=f([m(Kt)],i),i})(),ra=class{},kg=(()=>{let i=class Io{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fCanvas=void 0}static \u0275fac=function(t){return new(t||Io)};static \u0275prov=l({token:Io,factory:Io.\u0275fac})};return i=f([m(ra)],i),i})(),sa=class{},Vg=(()=>{let i=class Mo{_fComponentsStore=h(g);get transform(){return this._fComponentsStore.fCanvas.transform}handle(e){this.transform.scale=1,this.transform.scaledPosition=b.initialize()}static \u0275fac=function(t){return new(t||Mo)};static \u0275prov=l({token:Mo,factory:Mo.\u0275fac})};return i=f([m(sa)],i),i})(),aa=class{animated;constructor(n){this.animated=n}},Lg=(()=>{let i=class Fo{_fComponentsStore=h(g);get transform(){return this._fComponentsStore.fCanvas.transform}_fMediator=h(D);handle(e){let t=this._fMediator.send(new ni)||E.initialize();t.width===0||t.height===0||(this.oneToOneCentering(t,E.fromElement(this._fComponentsStore.fFlow.hostElement),this._fComponentsStore.fNodes.map(o=>o.position)),this._fMediator.send(new Kt(e.animated)))}oneToOneCentering(e,t,o){this.transform.scaledPosition=b.initialize(),this.transform.position=this.getZeroPositionWithoutScale(o);let r=(t.width-e.width/this.transform.scale)/2-this.transform.position.x,s=(t.height-e.height/this.transform.scale)/2-this.transform.position.y;this.transform.scale=1,this.transform.position=b.initialize(r,s)}getZeroPositionWithoutScale(e){let t=e.length?Math.min(...e.map(r=>r.x)):0,o=e.length?Math.min(...e.map(r=>r.y)):0;return b.initialize(t,o)}static \u0275fac=function(t){return new(t||Fo)};static \u0275prov=l({token:Fo,factory:Fo.\u0275fac})};return i=f([m(aa)],i),i})(),la=class{scale;toPosition;constructor(n,e){this.scale=n,this.toPosition=e}},Bg=(()=>{let i=class Oo{_fComponentsStore=h(g);get transform(){return this._fComponentsStore.fCanvas.transform}handle(e){if(e.scale!==this.transform.scale){let t=b.sum(this.transform.scaledPosition,this.transform.position),o=e.toPosition.x-(e.toPosition.x-t.x)*e.scale/this.transform.scale,r=e.toPosition.y-(e.toPosition.y-t.y)*e.scale/this.transform.scale;this.transform.scale=e.scale,this.transform.scaledPosition=b.sub(b.initialize(o,r),this.transform.position)}}static \u0275fac=function(t){return new(t||Oo)};static \u0275prov=l({token:Oo,factory:Oo.\u0275fac})};return i=f([m(la)],i),i})(),jg=[Fg,Og,Pg,Rg,Tg,Ng,Ag,kg,Vg,Lg,Bg],ca=class{fConnection;constructor(n){this.fConnection=n}},zg=(()=>{let i=class Po{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fTempConnection=e.fConnection}static \u0275fac=function(t){return new(t||Po)};static \u0275prov=l({token:Po,factory:Po.\u0275fac})};return i=f([m(ca)],i),i})(),da=class{fComponent;constructor(n){this.fComponent=n}},Hg=(()=>{let i=class Ro{_fComponentsStore=h(g);handle(e){this._fComponentsStore.addComponent(this._fComponentsStore.fMarkers,e.fComponent)}static \u0275fac=function(t){return new(t||Ro)};static \u0275prov=l({token:Ro,factory:Ro.\u0275fac})};return i=f([m(da)],i),i})(),fa=class{fConnection;constructor(n){this.fConnection=n}},Gg=(()=>{let i=class To{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fConnections.push(e.fConnection),this._fComponentsStore.dataChanged()}static \u0275fac=function(t){return new(t||To)};static \u0275prov=l({token:To,factory:To.\u0275fac})};return i=f([m(fa)],i),i})(),Mc=class{fConnection;constructor(n){this.fConnection=n}},Wg=(()=>{let i=class No{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fSnapConnection=e.fConnection}static \u0275fac=function(t){return new(t||No)};static \u0275prov=l({token:No,factory:No.\u0275fac})};return i=f([m(Mc)],i),i})(),ha=class{fConnection;constructor(n){this.fConnection=n}},Ug=(()=>{let i=class Ao{fBrowser;fComponentsStore;constructor(e,t){this.fBrowser=e,this.fComponentsStore=t}handle(e){let t=Nh("defs",this.fBrowser),o=e.fConnection;this.getMarkers(o).forEach(r=>{let s=this.createMarkerElement(r,o.fId),a=r.hostElement.cloneNode(!0);a.setAttribute("height",`${r.height}`),a.setAttribute("width",`${r.width}`),a.removeAttribute("markerUnits"),a.style.display="unset",s.append(a),t.append(s)}),o.fDefs.nativeElement.innerHTML=t.innerHTML,this.makeSafariCompatible(o)}getMarkers(e){return this.fComponentsStore.fMarkers.filter(t=>e.hostElement.contains(t.hostElement))}makeSafariCompatible(e){e.fPath.hostElement.replaceWith(e.fPath.hostElement)}createMarkerElement(e,t){let o=Nh("marker",this.fBrowser);return o.setAttribute("id",He(e.type+"-"+t)),o.setAttribute("markerHeight",`${e.height}`),o.setAttribute("markerWidth",`${e.width}`),o.setAttribute("orient",`${e.orient}`),o.setAttribute("refX",`${e.refX}`),o.setAttribute("refY",`${e.refY}`),o.setAttribute("markerUnits",`${e.markerUnits}`),o}static \u0275fac=function(t){return new(t||Ao)(c(ce),c(g))};static \u0275prov=l({token:Ao,factory:Ao.\u0275fac})};return i=f([m(ha)],i),i})();function Nh(i,n){return n.document.createElementNS("http://www.w3.org/2000/svg",i)}var Li=class{position;canBeConnectedInputs;constructor(n,e){this.position=n,this.canBeConnectedInputs=e}},$g=(()=>{let i=class ko{handle(e){let t,o=1/0;for(let r of e.canBeConnectedInputs){let s=this.distanceToRectangle(e.position,r);s<o&&(o=s,t=r)}return t?ye(z({},t),{distance:o}):void 0}distanceToRectangle(e,t){let o=this.clamp(e.x,t.fRect.x,t.fRect.x+t.fRect.width),r=this.clamp(e.y,t.fRect.y,t.fRect.y+t.fRect.height),s=e.x-o,a=e.y-r;return Math.sqrt(s*s+a*a)}clamp(e,t,o){return Math.max(t,Math.min(o,e))}static \u0275fac=function(t){return new(t||ko)};static \u0275prov=l({token:ko,factory:ko.\u0275fac})};return i=f([m(Li)],i),i})(),Bi=class{fOutputId;constructor(n){this.fOutputId=n}},it=class{connector;constructor(n){this.connector=n}},ve=class{element;isRoundedRect;constructor(n,e=!0){this.element=n,this.isRoundedRect=e}},Yg=(()=>{let i=class Vo{_fComponentsStore=h(g);_fMediator=h(D);get _transform(){return this._fComponentsStore.fCanvas.transform}handle(e){let t=this._getElementRoundedRect(e),o=this._normalizePosition(t),r=this._normalizeSize(t);return new Ee(o.x,o.y,r.width,r.height,t.radius1,t.radius2,t.radius3,t.radius4)}_getElementRoundedRect(e){return e.isRoundedRect?this._fMediator.send(new Xs(e.element)):Ee.fromRect(E.fromElement(e.element))}_normalizePosition(e){return A.fromPoint(e).elementTransform(this._fComponentsStore.flowHost).sub(this._transform.scaledPosition).sub(this._transform.position).div(this._transform.scale)}_normalizeSize(e){return It.initialize(e.width/this._transform.scale,e.height/this._transform.scale)}static \u0275fac=function(t){return new(t||Vo)};static \u0275prov=l({token:Vo,factory:Vo.\u0275fac})};return i=f([m(ve)],i),i})(),Xg=(()=>{let i=class Lo{_fMediator=h(D);handle(e){return{fConnector:e.connector,fRect:this._fMediator.send(new ve(e.connector.hostElement,!0))}}static \u0275fac=function(t){return new(t||Lo)};static \u0275prov=l({token:Lo,factory:Lo.\u0275fac})};return i=f([m(it)],i),i})(),Qg=(()=>{let i=class Bo{fComponentsStore;fMediator;get fNodes(){return this.fComponentsStore.fNodes}get fInputs(){return this.fComponentsStore.fInputs}constructor(e,t){this.fComponentsStore=e,this.fMediator=t}handle(e){return this.getCanBeConnectedInputs(this.getOutput(e.fOutputId)).map(t=>this.fMediator.send(new it(t)))}getOutput(e){return this.findOutputById(e)||this.findOutletById(e)}findOutputById(e){return this.fComponentsStore.fOutputs.find(t=>t.fId===e)}findOutletById(e){return this.fComponentsStore.fOutlets.find(t=>t.fId===e)}getCanBeConnectedInputs(e){return e.isSelfConnectable?this.fInputs.filter(t=>t.canBeConnected):this.filterSelfConnectable(this.fInputs.filter(t=>t.canBeConnected),e)}filterSelfConnectable(e,t){return e.filter(o=>this.getNodeOfConnector(t)?.hostElement!==this.getNodeOfConnector(o)?.hostElement)}getNodeOfConnector(e){return this.fNodes.find(t=>t.isContains(e.hostElement))}static \u0275fac=function(t){return new(t||Bo)(c(g),c(D))};static \u0275prov=l({token:Bo,factory:Bo.\u0275fac})};return i=f([m(Bi)],i),i})(),Be=class{outputRect;inputRect;behavior;outputSide;inputSide;constructor(n,e,t,o,r){this.outputRect=n,this.inputRect=e,this.behavior=t,this.outputSide=o,this.inputSide=r}},Fc=class{handle(n){let{source:e,target:t}=n,o=Math.abs(t.x-e.x)/2,r=t.x<e.x?t.x+o:t.x-o,s=Math.abs(t.y-e.y)/2,a=t.y<e.y?t.y+s:t.y-s;return b.initialize(r,a)}},Oc=class{source;target;constructor(n,e){this.source=n,this.target=e}},ji=class{handle(n){let{points:e}=n,t=0,o=[];for(let p=0;p<e.length-1;p++){let _=this.calculateDistance(e[p],e[p+1]);o.push(_),t+=_}let r=0,s=0,a=t/2;for(let p=0;p<o.length;p++)if(r+=o[p],r>=a){s=p;break}let d=a-(r-o[s]);return this.findPointAtDistance(e[s],e[s+1],d)}calculateDistance(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}findPointAtDistance(n,e,t){let o=this.calculateDistance(n,e),r=t/o,s=(1-r)*n.x+r*e.x,a=(1-r)*n.y+r*e.y;return{x:s,y:a}}},zi=class{points;constructor(n){this.points=n}},U=function(i){return i.LEFT="left",i.TOP="top",i.RIGHT="right",i.BOTTOM="bottom",i.AUTO="auto",i}(U||{}),Pc=class{handle(n){let e;return n.fConnector.userFConnectableSide===U.AUTO?e=this.getSideByDelta(n.fConnector.hostElement,n.fNodeHost):e=n.fConnector.userFConnectableSide,e}getSideByDelta(n,e){let t,o=E.fromElement(n),r=e.getBoundingClientRect(),s=o.gravityCenter.x-r.left,a=r.right-o.gravityCenter.x,d=o.gravityCenter.y-r.top,p=r.bottom-o.gravityCenter.y,_=Math.min(s,a,d,p);return _===s?t=U.LEFT:_===a?t=U.RIGHT:_===d?t=U.TOP:t=U.BOTTOM,t}},Rc=class{fConnector;fNodeHost;constructor(n,e){this.fConnector=n,this.fNodeHost=e}},ua=class{_isConnected=!1;get isConnected(){return this._isConnected}toConnector;isSelfConnectable=!0;fConnectableSide=U.AUTO;userFConnectableSide=U.AUTO;isContains(n){return this.hostElement.contains(n)}setConnected(n,e){this._isConnected=n,this.toConnector=e}},Zg=new P("F_NODE_INPUT"),Kg=(()=>{class i extends ua{get canBeConnected(){return!this.disabled&&(this.multiple?!0:!this.isConnected)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ze(i)))(o||i)}})();static \u0275dir=O({type:i,features:[ee]})}return i})(),Zt=function(i){return i.LEFT_TOP="left-top",i.RIGHT_TOP="right-top",i.LEFT_BOTTOM="left-bottom",i.RIGHT_BOTTOM="right-bottom",i}(Zt||{}),cD=new P("F_RESIZE_HANDLE");var qg=new P("F_DRAG_HANDLE"),Wh=(()=>{class i{_elementReference=h(F);get hostElement(){return this._elementReference.nativeElement}static \u0275fac=function(t){return new(t||i)};static \u0275dir=O({type:i,selectors:[["","fDragHandle",""]],hostAttrs:[1,"f-drag-handle","f-component"],features:[X([{provide:qg,useExisting:i}])]})}return i})(),Ec="f-selected";function Uh(i){return class extends i{fId="";fSelectionDisabled=!1;deselect(){this.deselectChild?.(),this.hostElement.classList.remove(Ec)}select(){this.selectChild?.(),this.isSelected()||this.hostElement.classList.add(Ec)}isSelected(){return this.hostElement.classList.contains(Ec)}selectChild(){}deselectChild(){}constructor(...n){super(...n)}}}function Jg(i){return class extends i{show(){this.hostElement.style.display="unset"}hide(){this.hostElement.style.display="none"}constructor(...n){super(...n)}}}var gl=new P("F_NODE"),e_=Uh(class{hostElement;constructor(i){this.hostElement=i}}),ma=class extends e_{stateChanges=new ht;_position=b.initialize();_size;fCanBeResizedByChild=!0;connectors=[];isContains(n){return this.hostElement.contains(n)}redraw(){this.size&&(this.setStyle("width",""+this.size.width+"px"),this.setStyle("height",""+this.size.height+"px")),this.setStyle("transform",`translate(${this.position.x}px,${this.position.y}px)`)}updatePosition(n){this._position=n}updateSize(n){this._size=n}setClass(n){this.hostElement.classList.add(n)}removeClass(n){this.hostElement.classList.remove(n)}addConnector(n){this.connectors.push(n),this.refresh()}removeConnector(n){let e=this.connectors.indexOf(n);e!==-1&&this.connectors.splice(e,1),this.refresh()}},t_=0,i_=(()=>{class i extends ma{renderer;fBrowser;fId=`f-group-${t_++}`;fParentId=null;set position(e){this._position=b.castToPoint(e),this.refresh()}get position(){return this._position}positionChange=new H;set size(e){this._size=e,this.refresh()}get size(){return this._size}sizeChange=new H;fDraggingDisabled=!1;fSelectionDisabled=!1;fIncludePadding=!0;fConnectOnNode=!0;_destroyRef=h(li);_fMediator=h(D);constructor(e,t,o){super(e.nativeElement),this.renderer=t,this.fBrowser=o}ngOnInit(){this.setStyle("position","absolute"),this.setStyle("transform-origin","center"),this.setStyle("user-select","none"),this.setStyle("pointer-events","all"),this.setStyle("left","0"),this.setStyle("top","0"),super.redraw(),this._fMediator.send(new gn(this))}setStyle(e,t){this.renderer.setStyle(this.hostElement,e,t)}redraw(){super.redraw(),this._fMediator.send(new mt)}ngAfterViewInit(){this.fBrowser.isBrowser()&&this._listenStateSizeChanges()}_listenStateSizeChanges(){this._fMediator.send(new vn(this,this._destroyRef))}refresh(){this.stateChanges.notify()}ngOnDestroy(){this._fMediator.send(new Cn(this))}static \u0275fac=function(t){return new(t||i)(u(F),u(kt),u(ce))};static \u0275dir=O({type:i,selectors:[["","fGroup",""]],hostAttrs:[1,"f-group","f-component"],hostVars:5,hostBindings:function(t,o){t&2&&(te("data-f-group-id",o.fId),re("f-group-dragging-disabled",o.fDraggingDisabled)("f-group-selection-disabled",o.fSelectionDisabled))},inputs:{fId:[C.None,"fGroupId","fId"],fParentId:[C.None,"fGroupParentId","fParentId"],position:[C.None,"fGroupPosition","position"],size:[C.None,"fGroupSize","size"],fDraggingDisabled:[C.None,"fGroupDraggingDisabled","fDraggingDisabled"],fSelectionDisabled:[C.None,"fGroupSelectionDisabled","fSelectionDisabled"],fIncludePadding:"fIncludePadding",fConnectOnNode:"fConnectOnNode"},outputs:{positionChange:"fGroupPositionChange",sizeChange:"fGroupSizeChange"},exportAs:["fComponent"],features:[X([{provide:gl,useExisting:i}]),ee]})}return i})(),n_=0,_l=(()=>{class i extends ma{renderer;fBrowser;fId=`f-node-${n_++}`;fParentId=null;set position(e){this._position=b.castToPoint(e),this.refresh()}get position(){return this._position}positionChange=new H;set size(e){this._size=e,this.refresh()}get size(){return this._size}sizeChange=new H;fDraggingDisabled=!1;fSelectionDisabled=!1;fIncludePadding=!0;fConnectOnNode=!0;_destroyRef=h(li);_fMediator=h(D);constructor(e,t,o){super(e.nativeElement),this.renderer=t,this.fBrowser=o}ngOnInit(){this.setStyle("position","absolute"),this.setStyle("transform-origin","center"),this.setStyle("user-select","none"),this.setStyle("pointer-events","all"),this.setStyle("left","0"),this.setStyle("top","0"),super.redraw(),this._fMediator.send(new gn(this))}setStyle(e,t){this.renderer.setStyle(this.hostElement,e,t)}redraw(){super.redraw(),this._fMediator.send(new mt)}ngAfterViewInit(){this.fBrowser.isBrowser()&&this._listenStateSizeChanges()}_listenStateSizeChanges(){this._fMediator.send(new vn(this,this._destroyRef))}refresh(){this.stateChanges.notify()}ngOnDestroy(){this._fMediator.send(new Cn(this))}static \u0275fac=function(t){return new(t||i)(u(F),u(kt),u(ce))};static \u0275dir=O({type:i,selectors:[["","fNode",""]],hostAttrs:[1,"f-node","f-component"],hostVars:5,hostBindings:function(t,o){t&2&&(te("data-f-node-id",o.fId),re("f-node-dragging-disabled",o.fDraggingDisabled)("f-node-selection-disabled",o.fSelectionDisabled))},inputs:{fId:[C.None,"fNodeId","fId"],fParentId:[C.None,"fNodeParentId","fParentId"],position:[C.None,"fNodePosition","position"],size:[C.None,"fNodeSize","size"],fDraggingDisabled:[C.None,"fNodeDraggingDisabled","fDraggingDisabled"],fSelectionDisabled:[C.None,"fNodeSelectionDisabled","fSelectionDisabled"],fIncludePadding:"fIncludePadding",fConnectOnNode:"fConnectOnNode"},outputs:{positionChange:"fNodePositionChange",sizeChange:"fNodeSizeChange"},exportAs:["fComponent"],features:[X([{provide:gl,useExisting:i}]),ee]})}return i})();function o_(i){return!!i.closest("[fNode]")}var r_=0,$h=(()=>{class i extends Kg{fNode;fId=`f-node-input-${r_++}`;multiple=!0;disabled=!1;userFConnectableSide=U.AUTO;get hostElement(){return this._elementReference.nativeElement}_elementReference=h(F);_fMediator=h(D);constructor(e){super(),this.fNode=e}ngOnInit(){this._fMediator.send(new xa(this)),this.fNode.addConnector(this)}ngOnChanges(e){e.userFConnectableSide&&this.fNode.refresh()}setConnected(e,t){super.setConnected(e,t),this.hostElement.classList.toggle("f-node-input-connected",e),this.hostElement.classList.toggle("f-node-input-not-connectable",!this.canBeConnected)}ngOnDestroy(){this.fNode.removeConnector(this),this._fMediator.send(new wa(this))}static \u0275fac=function(t){return new(t||i)(u(gl))};static \u0275dir=O({type:i,selectors:[["","fNodeInput",""]],hostAttrs:[1,"f-component","f-node-input"],hostVars:5,hostBindings:function(t,o){t&2&&(te("data-f-input-id",o.fId),re("f-node-input-multiple",o.multiple)("f-node-input-disabled",o.disabled))},inputs:{fId:[C.None,"fInputId","fId"],multiple:[C.None,"fInputMultiple","multiple"],disabled:[C.HasDecoratorInputTransform,"fInputDisabled","disabled",ue],userFConnectableSide:[C.HasDecoratorInputTransform,"fInputConnectableSide","userFConnectableSide",e=>vi(e,"fInputConnectableSide",U)]},exportAs:["fNodeInput"],features:[X([{provide:Zg,useExisting:i}]),ke,ee,he]})}return i})(),dD=new P("F_NODE_OUTLET");function Yh(i){return!!i.closest("[fNodeOutlet]")}var s_=new P("F_NODE_OUTPUT"),a_=(()=>{class i extends ua{get canBeConnected(){return!this.disabled&&(this.multiple?!0:!this.isConnected)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ze(i)))(o||i)}})();static \u0275dir=O({type:i,features:[ee]})}return i})();function Xh(i){return!!i.closest("[fNodeOutput]")}var l_=0,Qh=(()=>{class i extends a_{fNode;fId=`f-node-output-${l_++}`;multiple=!1;disabled=!1;userFConnectableSide=U.AUTO;isSelfConnectable=!0;get hostElement(){return this._elementReference.nativeElement}_elementReference=h(F);_fMediator=h(D);constructor(e){super(),this.fNode=e}ngOnInit(){this._fMediator.send(new ba(this)),this.fNode.addConnector(this)}ngOnChanges(e){e.userFConnectableSide&&this.fNode.refresh()}setConnected(e,t){super.setConnected(e,t),this.hostElement.classList.toggle("f-node-output-connected",e),this.hostElement.classList.toggle("f-node-output-not-connectable",!this.canBeConnected)}ngOnDestroy(){this.fNode.removeConnector(this),this._fMediator.send(new Da(this))}static \u0275fac=function(t){return new(t||i)(u(gl))};static \u0275dir=O({type:i,selectors:[["","fNodeOutput",""]],hostAttrs:[1,"f-component","f-node-output"],hostVars:7,hostBindings:function(t,o){t&2&&(te("data-f-output-id",o.fId),re("f-node-output-multiple",o.multiple)("f-node-output-disabled",o.disabled)("f-node-output-self-connectable",o.isSelfConnectable))},inputs:{fId:[C.None,"fOutputId","fId"],multiple:[C.None,"fOutputMultiple","multiple"],disabled:[C.HasDecoratorInputTransform,"fOutputDisabled","disabled",ue],userFConnectableSide:[C.HasDecoratorInputTransform,"fOutputConnectableSide","userFConnectableSide",e=>vi(e,"fOutputConnectableSide",U)],isSelfConnectable:"isSelfConnectable"},exportAs:["fNodeOutput"],features:[X([{provide:s_,useExisting:i}]),ke,ee,he]})}return i})();var Tc=class i{static getConnectorOffset(n,e){return n>=e?n:e*Math.sqrt(e-n)}static getAnglePoint(n,e,t,o){let r={x:e.x,y:e.y};switch(n){case U.LEFT:r.x-=i.getConnectorOffset(e.x-t.x,o);break;case U.RIGHT:r.x+=i.getConnectorOffset(t.x-e.x,o);break;case U.TOP:r.y-=i.getConnectorOffset(e.y-t.y,o);break;case U.BOTTOM:r.y+=i.getConnectorOffset(t.y-e.y,o);break}return r}handle(n){let{source:e,sourceSide:t,target:o,targetSide:r,offset:s}=n,a=i.getAnglePoint(t,e,o,s),d=i.getAnglePoint(r,o,e,s),p=`M ${e.x} ${e.y} C ${a.x} ${a.y}, ${d.x} ${d.y}, ${o.x+2e-4} ${o.y+2e-4}`,_=new ji().handle(new zi([e,a,d,o]));return{path:p,connectionCenter:_,penultimatePoint:d}}},Ah={[U.LEFT]:b.initialize(-1,0),[U.RIGHT]:b.initialize(1,0),[U.TOP]:b.initialize(0,-1),[U.BOTTOM]:b.initialize(0,1),[U.AUTO]:b.initialize(0,0)},Nc=class{handle(n){let{source:e,sourceSide:t,target:o,targetSide:r}=n,{points:s,center:a}=this.getPathPoints(e,t,o,r,n.offset),d=this.buildPath(s,n.radius),p=s.length>1?s[s.length-2]:e;return{path:d,connectionCenter:a,penultimatePoint:p}}getPathPoints(n,e,t,o,r){let s=Ah[e],a=Ah[o],d={x:n.x+s.x*r,y:n.y+s.y*r},p={x:t.x+a.x*r,y:t.y+a.y*r},_=this.getDirection(d,e,p),x=_.x!==0?"x":"y",k=_[x],L=[],j=b.initialize(),ie=b.initialize(),fe=new Fc().handle(new Oc(n,t));if(s[x]*a[x]===-1){let Rt=[{x:fe.x,y:d.y},{x:fe.x,y:p.y}],Tt=[{x:d.x,y:fe.y},{x:p.x,y:fe.y}];s[x]===k?L=x==="x"?Rt:Tt:L=x==="x"?Tt:Rt}else{let Rt=[{x:d.x,y:p.y}],Tt=[{x:p.x,y:d.y}];if(x==="x"?L=s.x===k?Tt:Rt:L=s.y===k?Rt:Tt,e===o){let nt=Math.abs(n[x]-t[x]);if(nt<=r){let vt=Math.min(r-1,r-nt);s[x]===k?j[x]=(d[x]>n[x]?-1:1)*vt:ie[x]=(p[x]>t[x]?-1:1)*vt}}if(e!==o){let nt=x==="x"?"y":"x",vt=s[x]===a[nt],Md=d[nt]>p[nt],Fd=d[nt]<p[nt];(s[x]===1&&(!vt&&Md||vt&&Fd)||s[x]!==1&&(!vt&&Fd||vt&&Md))&&(L=x==="x"?Rt:Tt)}}let Pt=[n,{x:d.x+j.x,y:d.y+j.y},...L,{x:p.x+ie.x,y:p.y+ie.y},t],Su=new ji().handle(new zi(Pt));return{points:Pt,center:Su}}getDirection(n,e,t){return e===U.LEFT||e===U.RIGHT?n.x<t.x?b.initialize(1,0):b.initialize(-1,0):n.y<t.y?b.initialize(0,1):b.initialize(0,-1)}distance(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}buildPath(n,e){let t="";for(let o=0;o<n.length;o++){let r=n[o],s="";o>0&&o<n.length-1?s=this.getBend(n[o-1],r,n[o+1],e):o===n.length-1?s=this.buildLastLineSegment(o,r):s=this.buildMoveOrLineSegment(o,r),t+=s}return t}getBend(n,e,t,o){let r=Math.min(this.distance(n,e)/2,this.distance(e,t)/2,o),{x:s,y:a}=e;if(n.x===s&&s===t.x||n.y===a&&a===t.y)return`L${s} ${a}`;if(n.y===a){let _=n.x<t.x?-1:1,x=n.y<t.y?1:-1;return`L ${s+r*_},${a}Q ${s},${a} ${s},${a+r*x}`}let d=n.x<t.x?1:-1,p=n.y<t.y?-1:1;return`L ${s},${a+r*p}Q ${s},${a} ${s+r*d},${a}`}buildMoveOrLineSegment(n,e){return`${n===0?"M":"L"}${e.x} ${e.y}`}buildLastLineSegment(n,e){return`L${e.x+2e-4} ${e.y+2e-4}`}},Ac=class{handle(n){let{source:e,target:t}=n,o=`M ${e.x} ${e.y} L ${t.x+2e-4} ${t.y+2e-4}`,r=new ji().handle(new zi([e,t]));return{path:o,connectionCenter:r,penultimatePoint:e}}},pt={textId(i){return He("connection_text_"+i)},connectionForSelectionId(i){return He("connection_for_selection_"+i)},connectionId(i){return He("connection_"+i)},gradientId(i){return He("connection_gradient_"+i)},linkToGradient(i){return`url(#${pt.gradientId(i)})`},linkToConnection(i){return`#${pt.connectionId(i)}`}},Ot=new P("F_CONNECTION"),kh=(()=>{class i{elementReference;base;fBrowser;get linkToConnection(){return pt.linkToConnection(this.base.fId+this.base.fOutputId+this.base.fInputId)}get hostElement(){return this.elementReference.nativeElement}symbolWidth=8;fontSize="12px";constructor(e,t,o){this.elementReference=e,this.base=t,this.fBrowser=o}ngOnInit(){this.hostElement.setAttribute("startOffset",this.base.fTextStartOffset||"50%"),this.hostElement.setAttribute("text-anchor","middle"),this.symbolWidth=this.getSymbolWidth(this.base.fText||"")}getBBox(){return this.hostElement.getBBox()}getFontStyles(e){let t=this.fBrowser.window.getComputedStyle(e);return{fontSize:t.fontSize,fontFamily:t.fontFamily}}getSymbolWidth(e){let t=e||"connection",{fontFamily:o,fontSize:r}=this.getFontStyles(this.hostElement);this.fontSize=r||"12px";let s=this.fBrowser.document.createElement("canvas"),a;try{a=s.getContext("2d")}catch{a=null}return a?(a.font=`${r} ${o}`,a.measureText(t).width/t.length):0}static \u0275fac=function(t){return new(t||i)(u(F),u(Ot),u(ce))};static \u0275dir=O({type:i,selectors:[["textPath","f-connection-text-path",""]],hostVars:1,hostBindings:function(t,o){t&2&&te("href",o.linkToConnection)}})}return i})(),sd=new P("CONNECTION_TEXT"),Zh=(()=>{class i{elementReference;base;get textId(){return pt.textId(this.base.fId+this.base.fOutputId+this.base.fInputId)}get hostElement(){return this.elementReference.nativeElement}get text(){return this.base.fText||""}textPathDirective;constructor(e,t){this.elementReference=e,this.base=t}redraw(e){let t=i.isTextReverse(e),o=this.calculateDy(this.textPathDirective.fontSize,t);this.hostElement.setAttribute("dy",o);let r=this.textPathDirective.getBBox(),s=[r.x+r.width/2,r.y+r.height/2];this.hostElement.setAttribute("transform",t?`rotate(180, ${s})`:""),i.getTextStartOffset(e,this.base.fText||"",this.textPathDirective.symbolWidth)<0?this.hostElement.style.display="none":this.hostElement.style.display="unset"}calculateDy(e,t){let o=parseFloat(e);return(t?o*1.5:o*-.8).toString()}static isTextReverse(e){return e.point1.x>e.point2.x}static getTextStartOffset(e,t,o){return b.hypotenuse(e.point1,e.point2)/2-(t||"").length*o/2}static \u0275fac=function(t){return new(t||i)(u(F),u(Ot))};static \u0275cmp=T({type:i,selectors:[["text","f-connection-text",""]],viewQuery:function(t,o){if(t&1&&V(kh,7),t&2){let r;I(r=M())&&(o.textPathDirective=r.first)}},hostAttrs:[1,"f-component","f-connection-text"],hostVars:1,hostBindings:function(t,o){t&2&&te("id",o.textId)},features:[X([{provide:sd,useExisting:i}])],attrs:eg,decls:3,vars:1,consts:[[0,"xmlns","svg","http://www.w3.org/2000/svg"],["f-connection-text-path",""]],template:function(t,o){t&1&&(ci(0,0),Ae(),v(1,"textPath",1),W(2),y(),di()),t&2&&(w(2),Vt(" ",o.text," "))},dependencies:[kh],encapsulation:2,changeDetection:0})}return i})(),ad="f-connection-drag-handle",pa=(()=>{class i{elementReference;class=ad;get hostElement(){return this.elementReference.nativeElement}constructor(e){this.elementReference=e}redraw(e,t){let o=this._calculateCircleCenter(e,t,8);this.hostElement.setAttribute("cx",o.x.toString()),this.hostElement.setAttribute("cy",o.y.toString())}_calculateCircleCenter(e,t,o){let r={x:t.x-e.x,y:t.y-e.y},s=Math.sqrt(r.x*r.x+r.y*r.y)||1,a={x:r.x/s,y:r.y/s},d={x:a.x*o,y:a.y*o};return{x:t.x-d.x,y:t.y-d.y}}static \u0275fac=function(t){return new(t||i)(u(F))};static \u0275cmp=T({type:i,selectors:[["circle","f-connection-drag-handle",""]],hostVars:2,hostBindings:function(t,o){t&2&&kd(o.class)},attrs:tg,decls:0,vars:0,template:function(t,o){},encapsulation:2,changeDetection:0})}return i})(),ld=new P("CONNECTION_GRADIENT"),Kh=(()=>{class i{elementReference;base;get gradientId(){return pt.gradientId(this.base.fId+this.base.fOutputId+this.base.fInputId)}get hostElement(){return this.elementReference.nativeElement}get stop1Element(){return this.elementReference.nativeElement.children.item(0)}get stop2Element(){return this.elementReference.nativeElement.children.item(1)}constructor(e,t){this.elementReference=e,this.base=t}initialize(){this.stop1Element.setAttribute("offset","0%"),this.stop2Element.setAttribute("offset","100%")}updateGradient(){this.setFromColor(this.base.fStartColor),this.setToColor(this.base.fEndColor)}setFromColor(e){this.stop1Element.setAttribute("stop-color",e||"transparent")}setToColor(e){this.stop2Element.setAttribute("stop-color",e||"transparent")}redraw(e){let t=e.point2.x-e.point1.x,o=e.point2.y-e.point1.y,r=Math.sqrt(t*t+o*o)||.01,s=new A(.5-.5*t/r,.5-.5*o/r);this.hostElement.setAttribute("x1",s.x.toString()),this.hostElement.setAttribute("y1",s.y.toString());let a=new A(.5+.5*t/r,.5+.5*o/r);this.hostElement.setAttribute("x2",a.x.toString()),this.hostElement.setAttribute("y2",a.y.toString()),this.updateGradient()}static \u0275fac=function(t){return new(t||i)(u(F),u(Ot))};static \u0275cmp=T({type:i,selectors:[["linearGradient","fConnectionGradient",""]],hostAttrs:[1,"f-component","f-connection-gradient"],hostVars:1,hostBindings:function(t,o){t&2&&te("id",o.gradientId)},features:[X([{provide:ld,useExisting:i}])],attrs:ig,decls:3,vars:0,consts:[[0,"xmlns","svg","http://www.w3.org/2000/svg"]],template:function(t,o){t&1&&(ci(0,0),Ae(),B(1,"stop")(2,"stop"),di())},encapsulation:2,changeDetection:0})}return i})(),cd=new P("CONNECTION_PATH");function c_(i){return He(`f-connection-marker-start-${i}`)}function d_(i){return He(`f-connection-marker-end-${i}`)}function f_(i){return He(`f-connection-selected-marker-start-${i}`)}function h_(i){return He(`f-connection-selected-marker-end-${i}`)}var qh=(()=>{class i{elementReference;base;get fPathId(){return this.base.fId}get linkToGradient(){return pt.linkToGradient(this.base.fId+this.base.fOutputId+this.base.fInputId)}get attrConnectionId(){return pt.connectionId(this.base.fId+this.base.fOutputId+this.base.fInputId)}get hostElement(){return this.elementReference.nativeElement}constructor(e,t){this.elementReference=e,this.base=t}initialize(){this.deselect()}setPath(e){this.hostElement.setAttribute("d",`${e}`)}select(){this.hostElement.setAttribute("marker-start",`url(#${f_(this.base.fId)})`),this.hostElement.setAttribute("marker-end",`url(#${h_(this.base.fId)})`)}deselect(){this.hostElement.setAttribute("marker-start",`url(#${c_(this.base.fId)})`),this.hostElement.setAttribute("marker-end",`url(#${d_(this.base.fId)})`)}static \u0275fac=function(t){return new(t||i)(u(F),u(Ot))};static \u0275cmp=T({type:i,selectors:[["path","f-connection-path",""]],hostAttrs:[1,"f-component","f-connection-path"],hostVars:3,hostBindings:function(t,o){t&2&&te("id",o.attrConnectionId)("data-f-path-id",o.fPathId)("stroke",o.linkToGradient)},features:[X([{provide:cd,useExisting:i}])],attrs:ng,decls:0,vars:0,template:function(t,o){},encapsulation:2,changeDetection:0})}return i})(),ga=(()=>{class i{elementReference;base;get connectionForSelectionId(){return pt.connectionForSelectionId(this.base.fId+this.base.fOutputId+this.base.fInputId)}get hostElement(){return this.elementReference.nativeElement}constructor(e,t){this.elementReference=e,this.base=t}setPath(e){this.hostElement.setAttribute("d",`${e}`)}static \u0275fac=function(t){return new(t||i)(u(F),u(Ot))};static \u0275cmp=T({type:i,selectors:[["path","fConnectionSelection",""]],hostAttrs:[1,"f-component","f-connection-selection"],hostVars:1,hostBindings:function(t,o){t&2&&te("id",o.connectionForSelectionId)},attrs:og,decls:0,vars:0,template:function(t,o){},encapsulation:2,changeDetection:0})}return i})(),u_=new P("F_CONNECTION_BUILDERS"),vl=(()=>{class i{builders={[ut.STRAIGHT]:new Ac,[ut.BEZIER]:new Tc,[ut.SEGMENT]:new Nc};constructor(e){e&&(this.builders=z(z({},this.builders),e))}handle(e){let t=this.builders[e.type];if(!t)throw new Error(`FConnectionBuilder not found for type ${e.type}`);return t.handle(e.payload)}static \u0275fac=function(t){return new(t||i)(c(u_,8))};static \u0275prov=l({token:i,factory:i.\u0275fac})}return i})(),m_=Uh(Jg(class{hostElement;constructor(i){this.hostElement=i}})),dd=(()=>{class i extends m_{cFactory;path="";line=Ti.initialize();penultimatePoint=b.initialize();constructor(e,t){super(e.nativeElement),this.cFactory=t}initialize(){this.fPath.initialize(),this.fGradient.initialize(),this.redraw()}isContains(e){return(this.hostElement.firstChild?.lastChild).contains(e)}setLine(e,t,o,r){this.line=Ti.initialize(e,o);let s=this.getPathResult(e,t,o,r);this.path=s.path,this.penultimatePoint=s.penultimatePoint||e,this.fConnectionCenter?.nativeElement?.setAttribute("style",this.getTransform(s.connectionCenter))}getPathResult(e,t,o,r){let s=this.fRadius>0?this.fRadius:0,a=this.fOffset>0?this.fOffset:1;return this.cFactory.handle({type:this.fType,payload:{source:e,sourceSide:t,target:o,targetSide:r,radius:s,offset:a}})}getTransform(e){return`position: absolute; pointerEvents: all; transform: translate(-50%, -50%); left: ${e.x}px; top: ${e.y}px`}selectChild(){this.fPath.select()}deselectChild(){this.fPath.deselect()}redraw(){this.fPath.setPath(this.path),this.fSelection.setPath(this.path),this.fGradient.redraw(this.line),this.fDragHandle.redraw(this.penultimatePoint,this.line.point2),this.fTextComponent.redraw(this.line)}static \u0275fac=function(t){return new(t||i)(u(F),u(vl))};static \u0275dir=O({type:i,features:[ee]})}return i})(),Xe=function(i){return i.FIXED="fixed",i.FIXED_CENTER="fixed_center",i.FLOATING="floating",i}(Xe||{}),ut=function(i){return i.SEGMENT="segment",i.STRAIGHT="straight",i.BEZIER="bezier",i}(ut||{}),Cl=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275dir=O({type:i,selectors:[["","fConnectionCenter",""]]})}return i})(),p_=0,Jh=(()=>{class i extends dd{fId=`f-connection-for-create-${p_++}`;fText="";fTextStartOffset="";fStartColor="black";fEndColor="black";fOutputId;fInputId;fRadius=8;fOffset=32;fBehavior=Xe.FIXED;fType=ut.STRAIGHT;fDraggingDisabled=!1;fSelectionDisabled=!1;fDefs;fPath;fGradient;fDragHandle;fSelection;fTextComponent;fConnectionCenter;fConnectionCenters;get boundingElement(){return this.fPath.hostElement}_fMediator=h(D);constructor(e,t){super(e,t)}ngOnInit(){this._fMediator.send(new ca(this))}ngAfterViewInit(){this.hide()}ngOnChanges(){this._fMediator.send(new Mt)}ngOnDestroy(){this._fMediator.send(new va)}static \u0275fac=function(t){return new(t||i)(u(F),u(vl))};static \u0275cmp=T({type:i,selectors:[["f-connection-for-create"]],contentQueries:function(t,o,r){if(t&1&&_e(r,Cl,5),t&2){let s;I(s=M())&&(o.fConnectionCenters=s)}},viewQuery:function(t,o){if(t&1&&(V(Lh,7),V(cd,7),V(ld,7),V(pa,7),V(ga,7),V(sd,7),V(Bh,5)),t&2){let r;I(r=M())&&(o.fDefs=r.first),I(r=M())&&(o.fPath=r.first),I(r=M())&&(o.fGradient=r.first),I(r=M())&&(o.fDragHandle=r.first),I(r=M())&&(o.fSelection=r.first),I(r=M())&&(o.fTextComponent=r.first),I(r=M())&&(o.fConnectionCenter=r.first)}},hostAttrs:[1,"f-component","f-connection","f-connection-for-create"],inputs:{fStartColor:"fStartColor",fEndColor:"fEndColor",fRadius:"fRadius",fOffset:"fOffset",fBehavior:[C.HasDecoratorInputTransform,"fBehavior","fBehavior",e=>vi(e,"fBehavior",Xe)],fType:"fType"},features:[X([{provide:Ot,useExisting:i}]),ke,ee,he],ngContentSelectors:zh,decls:12,vars:3,consts:[["defs",""],["fConnectionCenter",""],["xmlns","http://www.w3.org/2000/svg"],[1,"f-connection-group"],["fConnectionGradient",""],["fConnectionSelection",""],["f-connection-path",""],["f-connection-drag-handle","","r","8"],["f-connection-text",""],["class","f-connection-center",4,"ngIf"],[1,"f-connection-center"]],template:function(t,o){t&1&&(be(jh),Ae(),v(0,"svg",2),B(1,"defs",null,0),v(3,"g",3),B(4,"linearGradient",4)(5,"path",5),v(6,"g"),B(7,"path",6)(8,"circle",7),y(),B(9,"text",8),y(),Y(10),y(),$(11,rg,3,0,"div",9)),t&2&&(w(5),te("d",o.path),w(2),te("d",o.path),w(4),N("ngIf",o.fConnectionCenters.length))},dependencies:[hi,Zh,pa,Kh,qh,ga],styles:["[_nghost-%COMP%]{pointer-events:none;position:absolute}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]   .f-connection-group[_ngcontent-%COMP%]{pointer-events:all}[_nghost-%COMP%]   .f-connection-center[_ngcontent-%COMP%]{pointer-events:all}"],changeDetection:0})}return i})(),g_=0,eu=(()=>{class i extends dd{fId=`f-connection-${g_++}`;fText="";fTextStartOffset="";fStartColor="black";fEndColor="black";fOutputId="";fInputId="";fRadius=8;fOffset=32;fBehavior=Xe.FIXED;fType=ut.STRAIGHT;fDraggingDisabled=!1;fSelectionDisabled=!1;fDefs;fPath;fGradient;fDragHandle;fSelection;fTextComponent;fConnectionCenter;fConnectionCenters;get boundingElement(){return this.fPath.hostElement}_fMediator=h(D);constructor(e,t){super(e,t)}ngOnInit(){this._fMediator.send(new fa(this))}ngOnChanges(){this._fMediator.send(new Mt)}ngOnDestroy(){this._fMediator.send(new Ca(this))}static \u0275fac=function(t){return new(t||i)(u(F),u(vl))};static \u0275cmp=T({type:i,selectors:[["f-connection"]],contentQueries:function(t,o,r){if(t&1&&_e(r,Cl,5),t&2){let s;I(s=M())&&(o.fConnectionCenters=s)}},viewQuery:function(t,o){if(t&1&&(V(Lh,7),V(cd,7),V(ld,7),V(pa,7),V(ga,7),V(sd,7),V(Bh,5)),t&2){let r;I(r=M())&&(o.fDefs=r.first),I(r=M())&&(o.fPath=r.first),I(r=M())&&(o.fGradient=r.first),I(r=M())&&(o.fDragHandle=r.first),I(r=M())&&(o.fSelection=r.first),I(r=M())&&(o.fTextComponent=r.first),I(r=M())&&(o.fConnectionCenter=r.first)}},hostAttrs:[1,"f-component","f-connection"],hostVars:5,hostBindings:function(t,o){t&2&&(te("id",o.fId),re("f-connection-selection-disabled",o.fSelectionDisabled)("f-connection-reassign-disabled",o.fDraggingDisabled))},inputs:{fId:[C.None,"fConnectionId","fId"],fText:"fText",fTextStartOffset:"fTextStartOffset",fStartColor:"fStartColor",fEndColor:"fEndColor",fOutputId:"fOutputId",fInputId:"fInputId",fRadius:"fRadius",fOffset:"fOffset",fBehavior:[C.HasDecoratorInputTransform,"fBehavior","fBehavior",e=>vi(e,"fBehavior",Xe)],fType:"fType",fDraggingDisabled:[C.HasDecoratorInputTransform,"fReassignDisabled","fDraggingDisabled",ue],fSelectionDisabled:[C.HasDecoratorInputTransform,"fSelectionDisabled","fSelectionDisabled",ue]},exportAs:["fComponent"],features:[X([{provide:Ot,useExisting:i}]),ke,ee,he],ngContentSelectors:zh,decls:12,vars:3,consts:[["defs",""],["fConnectionCenter",""],["xmlns","http://www.w3.org/2000/svg",2,"overflow","visible","display","block","vertical-align","middle"],[1,"f-connection-group"],["fConnectionGradient",""],["fConnectionSelection",""],["f-connection-path",""],["f-connection-drag-handle","","r","8"],["f-connection-text",""],["class","f-connection-center",4,"ngIf"],[1,"f-connection-center"]],template:function(t,o){t&1&&(be(jh),Ae(),v(0,"svg",2),B(1,"defs",null,0),Y(3),v(4,"g",3),B(5,"linearGradient",4)(6,"path",5),v(7,"g"),B(8,"path",6)(9,"circle",7),y(),B(10,"text",8),y()(),$(11,sg,3,0,"div",9)),t&2&&(w(6),te("d",o.path),w(2),te("d",o.path),w(3),N("ngIf",o.fConnectionCenters.length))},dependencies:[hi,Zh,pa,Kh,qh,ga],styles:[ag],changeDetection:0})}return i})(),yl=function(i){return i.START="f-connection-marker-start",i.END="f-connection-marker-end",i.SELECTED_START="f-connection-selected-marker-start",i.SELECTED_END="f-connection-selected-marker-end",i}(yl||{}),__=new P("F_MARKER"),v_=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275dir=O({type:i})}return i})(),tu=(()=>{class i extends v_{elementReference;get hostElement(){return this.elementReference.nativeElement}width=0;height=0;refX=0;refY=0;type=yl.START;orient="auto";markerUnits="strokeWidth";_fMediator=h(D);constructor(e){super(),this.elementReference=e,this.hostElement.style.display="none"}ngOnInit(){this._fMediator.send(new da(this))}ngOnDestroy(){this._fMediator.send(new ya(this))}static \u0275fac=function(t){return new(t||i)(u(F))};static \u0275dir=O({type:i,selectors:[["svg","fMarker",""]],hostAttrs:[1,"f-component","f-marker"],inputs:{hostElement:"hostElement",width:"width",height:"height",refX:"refX",refY:"refY",type:"type",orient:"orient",markerUnits:"markerUnits"},features:[X([{provide:__,useExisting:i}]),ee]})}return i})();function C_(i){return b_(y_(i),x_(i),i)}function y_(i){return Xt.getRoundedRectIntersections(i.outputRect.gravityCenter,i.inputRect.gravityCenter,i.outputRect)[0]}function x_(i){return Xt.getRoundedRectIntersections(i.inputRect.gravityCenter,i.outputRect.gravityCenter,i.inputRect)[0]}function b_(i,n,e){return{point1:i||e.outputRect.gravityCenter,point2:n||e.inputRect.gravityCenter}}function w_(i){return{point1:i.outputRect.gravityCenter,point2:i.inputRect.gravityCenter}}function D_(i){return{point1:Vh(i.outputRect,i.outputSide===U.AUTO?U.BOTTOM:i.outputSide),point2:Vh(i.inputRect,i.inputSide===U.AUTO?U.TOP:i.inputSide)}}function Vh(i,n){switch(n){case U.TOP:return{x:i.x+i.width/2,y:i.y};case U.BOTTOM:return{x:i.x+i.width/2,y:i.y+i.height};case U.LEFT:return{x:i.x,y:i.y+i.height/2};case U.RIGHT:return{x:i.x+i.width,y:i.y+i.height/2};default:throw new Error(`Unknown side: ${n}`)}}var E_=(()=>{let i=class jo{_handlers={[Xe.FLOATING.toString()]:C_,[Xe.FIXED_CENTER.toString()]:w_,[Xe.FIXED.toString()]:D_};handle(e){return this._handlers[e.behavior](e)}static \u0275fac=function(t){return new(t||jo)};static \u0275prov=l({token:jo,factory:jo.\u0275fac})};return i=f([m(Be)],i),i})(),_a=class{},S_=(()=>{let i=class zo{fComponentsStore;fMediator;constructor(e,t){this.fComponentsStore=e,this.fMediator=t}handle(e){this.resetConnectors(),this.fComponentsStore.fTempConnection&&this.setMarkers(this.fComponentsStore.fTempConnection),this.fComponentsStore.fSnapConnection&&this.setMarkers(this.fComponentsStore.fSnapConnection),this.fComponentsStore.fConnections.forEach(t=>{let o=this.fComponentsStore.fOutputs.find(s=>s.fId===t.fOutputId),r=this.fComponentsStore.fInputs.find(s=>s.fId===t.fInputId);o&&r&&this.setupConnection(o,r,t)})}resetConnectors(){this.fComponentsStore.fOutputs.forEach(e=>e.setConnected(!1,void 0)),this.fComponentsStore.fInputs.forEach(e=>e.setConnected(!1,void 0))}setupConnection(e,t,o){e.setConnected(!0,t),t.setConnected(!0,e);let r=this.getLine(e,t,o);this.setMarkers(o),o.setLine(r.point1,e.fConnectableSide,r.point2,t.fConnectableSide),o.initialize(),o.isSelected()&&o.select()}getLine(e,t,o){return this.fMediator.execute(new Be(this.fMediator.execute(new ve(e.hostElement,!0)),this.fMediator.execute(new ve(t.hostElement,!0)),o.fBehavior,e.fConnectableSide,t.fConnectableSide))}setMarkers(e){this.fMediator.send(new ha(e))}static \u0275fac=function(t){return new(t||zo)(c(g),c(D))};static \u0275prov=l({token:zo,factory:zo.\u0275fac})};return i=f([m(_a)],i),i})(),va=class{},I_=(()=>{let i=class Ho{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fTempConnection=void 0}static \u0275fac=function(t){return new(t||Ho)};static \u0275prov=l({token:Ho,factory:Ho.\u0275fac})};return i=f([m(va)],i),i})(),Ca=class{fConnection;constructor(n){this.fConnection=n}},M_=(()=>{let i=class Go{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fConnections.splice(this._getIndexOfConnection(e.fConnection),1),this._fComponentsStore.dataChanged()}_getIndexOfConnection(e){let t=this._fComponentsStore.fConnections.indexOf(e);if(t===-1)throw new Error("Connection not found in store");return t}static \u0275fac=function(t){return new(t||Go)};static \u0275prov=l({token:Go,factory:Go.\u0275fac})};return i=f([m(Ca)],i),i})(),ya=class{fComponent;constructor(n){this.fComponent=n}},F_=(()=>{let i=class Wo{_fComponentsStore=h(g);handle(e){this._fComponentsStore.removeComponent(this._fComponentsStore.fMarkers,e.fComponent)}static \u0275fac=function(t){return new(t||Wo)};static \u0275prov=l({token:Wo,factory:Wo.\u0275fac})};return i=f([m(ya)],i),i})(),kc=class{},O_=(()=>{let i=class Uo{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fSnapConnection=void 0}static \u0275fac=function(t){return new(t||Uo)};static \u0275prov=l({token:Uo,factory:Uo.\u0275fac})};return i=f([m(kc)],i),i})(),P_=[zg,Hg,Gg,Wg,Ug,$g,Qg,E_,Xg,S_,I_,M_,F_,O_],xa=class{fComponent;constructor(n){this.fComponent=n}},R_=(()=>{let i=class $o{_fComponentsStore=h(g);handle(e){this._fComponentsStore.addComponent(this._fComponentsStore.fInputs,e.fComponent)}static \u0275fac=function(t){return new(t||$o)};static \u0275prov=l({token:$o,factory:$o.\u0275fac})};return i=f([m(xa)],i),i})(),Vc=class{fComponent;constructor(n){this.fComponent=n}},T_=(()=>{let i=class Yo{_fComponentsStore=h(g);handle(e){this._fComponentsStore.addComponent(this._fComponentsStore.fOutlets,e.fComponent)}static \u0275fac=function(t){return new(t||Yo)};static \u0275prov=l({token:Yo,factory:Yo.\u0275fac})};return i=f([m(Vc)],i),i})(),ba=class{fComponent;constructor(n){this.fComponent=n}},N_=(()=>{let i=class Xo{_fComponentsStore=h(g);handle(e){this._fComponentsStore.addComponent(this._fComponentsStore.fOutputs,e.fComponent)}static \u0275fac=function(t){return new(t||Xo)};static \u0275prov=l({token:Xo,factory:Xo.\u0275fac})};return i=f([m(ba)],i),i})(),wa=class{fComponent;constructor(n){this.fComponent=n}},A_=(()=>{let i=class Qo{_fComponentsStore=h(g);handle(e){this._fComponentsStore.removeComponent(this._fComponentsStore.fInputs,e.fComponent)}static \u0275fac=function(t){return new(t||Qo)};static \u0275prov=l({token:Qo,factory:Qo.\u0275fac})};return i=f([m(wa)],i),i})(),Lc=class{fComponent;constructor(n){this.fComponent=n}},k_=(()=>{let i=class Zo{_fComponentsStore=h(g);handle(e){this._fComponentsStore.removeComponent(this._fComponentsStore.fOutlets,e.fComponent)}static \u0275fac=function(t){return new(t||Zo)};static \u0275prov=l({token:Zo,factory:Zo.\u0275fac})};return i=f([m(Lc)],i),i})(),Da=class{fComponent;constructor(n){this.fComponent=n}},V_=(()=>{let i=class Ko{_fComponentsStore=h(g);handle(e){this._fComponentsStore.removeComponent(this._fComponentsStore.fOutputs,e.fComponent)}static \u0275fac=function(t){return new(t||Ko)};static \u0275prov=l({token:Ko,factory:Ko.\u0275fac})};return i=f([m(Da)],i),i})(),L_=[R_,T_,N_,A_,k_,V_],Ea=class{fComponent;constructor(n){this.fComponent=n}},B_=(()=>{let i=class qo{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fDraggable=e.fComponent}static \u0275fac=function(t){return new(t||qo)};static \u0275prov=l({token:qo,factory:qo.\u0275fac})};return i=f([m(Ea)],i),i})(),Hi=class{},Gi=class{event;constructor(n){this.event=n}},S=(()=>{class i{selectedItems=[];isSelectedChanged=!1;onPointerDownScale=1;onPointerDownPosition=new A(0,0);draggableItems=[];fLineAlignment;reset(){this.draggableItems=[],this.onPointerDownScale=1,this.onPointerDownPosition=new A(0,0)}markSelectionAsChanged(){this.isSelectedChanged=!0}static \u0275fac=function(t){return new(t||i)};static \u0275prov=l({token:i,factory:i.\u0275fac})}return i})(),j_=(()=>{let i=class Jo{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){this.fDraggableDataContext.draggableItems.forEach(t=>t.onPointerUp?.())}static \u0275fac=function(t){return new(t||Jo)(c(S))};static \u0275prov=l({token:Jo,factory:Jo.\u0275fac})};return i=f([m(Gi)],i),i})(),Sa=class{fComponentsStore;onPointerDownPosition=b.initialize();constructor(n){this.fComponentsStore=n}prepareDragSequence(){this.onPointerDownPosition=this.fComponentsStore.fCanvas.transform.position}onPointerMove(n){this.fComponentsStore.fCanvas.setPosition(A.fromPoint(this.onPointerDownPosition).add(n)),this.fComponentsStore.fCanvas.redraw()}onPointerUp(){this.fComponentsStore.fCanvas.emitCanvasChangeEvent()}},z_=(()=>{let i=class er{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){return this.fDraggableDataContext.draggableItems.some(t=>t instanceof Sa)}static \u0275fac=function(t){return new(t||er)(c(S))};static \u0275prov=l({token:er,factory:er.\u0275fac})};return i=f([ae(Gi)],i),i})(),H_=[j_,z_],Wi=class{event;constructor(n){this.event=n}},G_=(()=>{let i=class tr{fComponentsStore;fDraggableDataContext;get flowHost(){return this.fComponentsStore.fFlow.hostElement}constructor(e,t){this.fComponentsStore=e,this.fDraggableDataContext=t}handle(e){this.fDraggableDataContext.onPointerDownScale=1,this.fDraggableDataContext.onPointerDownPosition=A.fromPoint(e.event.getPosition()).elementTransform(this.flowHost),this.fDraggableDataContext.draggableItems=[new Sa(this.fComponentsStore)]}static \u0275fac=function(t){return new(t||tr)(c(g),c(S))};static \u0275prov=l({token:tr,factory:tr.\u0275fac})};return i=f([m(Wi)],i),i})(),W_=(()=>{let i=class ir{fComponentsStore;fDraggableDataContext;get flowHost(){return this.fComponentsStore.fFlow.hostElement}constructor(e,t){this.fComponentsStore=e,this.fDraggableDataContext=t}handle(e){return!this.fDraggableDataContext.draggableItems.length&&(this.isBackgroundElement(e.event.targetElement)||this.isDragOnHost(e.event.targetElement))}isBackgroundElement(e){return this.fComponentsStore.fBackground?.hostElement.contains(e)}isDragOnHost(e){return this.flowHost.contains(e)&&!this.getNode(e)}getNode(e){let t=this.fComponentsStore.fNodes.find(o=>o.isContains(e));return t&&t.fDraggingDisabled&&(t=void 0),t}static \u0275fac=function(t){return new(t||ir)(c(g),c(S))};static \u0275prov=l({token:ir,factory:ir.\u0275fac})};return i=f([ae(Wi)],i),i})(),U_=[G_,W_],$_=[...H_,...U_],Ui=class{event;constructor(n){this.event=n}};function iu(i){let e=i(t=>{Error.call(t)});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Y_=iu(i=>function(e){i(this),this.message=e||"The requested resource was not found.",this.code=404}),X_=iu(i=>function(e){i(this),this.message=e||"Conflict error occurred.",this.code=409});function nu(i){return new Y_(`Output with fOutputId ${i} not found. Make sure there is no f-connection to a non-existent fOutput.`)}function ou(){return new X_("The fNode must contain at least one fOutput if there is an fOutlet")}var qt=class{outlet;constructor(n){this.outlet=n}},Q_=(()=>{let i=class nr{fComponentsStore;get fNodes(){return this.fComponentsStore.fNodes}get fOutputs(){return this.fComponentsStore.fOutputs}constructor(e){this.fComponentsStore=e}handle(e){let t=this.getConnectableOutputs(this.getNode(e.outlet));if(!t.length)throw ou();return t.length>0?t[0]:void 0}getConnectableOutputs(e){return this.fOutputs.filter(t=>e.isContains(t.hostElement)&&t.canBeConnected)}getNode(e){return this.fNodes.find(t=>t.isContains(e.hostElement))}static \u0275fac=function(t){return new(t||nr)(c(g))};static \u0275prov=l({token:nr,factory:nr.\u0275fac})};return i=f([m(qt)],i),i})(),Z_=(()=>{let i=class or{fComponentsStore;get fNodes(){return this.fComponentsStore.fNodes}constructor(e){this.fComponentsStore=e}handle(e){return!!this.fNodes.find(t=>t.isContains(e.outlet.hostElement))}static \u0275fac=function(t){return new(t||or)(c(g))};static \u0275prov=l({token:or,factory:or.\u0275fac})};return i=f([ae(qt)],i),i})(),Bc=class{fOutputId;fInputId;fDropPosition;constructor(n,e,t){this.fOutputId=n,this.fInputId=e,this.fDropPosition=t}},Jt=class{event;dragHandler;constructor(n,e){this.event=n,this.dragHandler=e}},K_=(()=>{let i=class rr{fComponentsStore;fDraggableDataContext;fBrowser;get fNodes(){return this.fComponentsStore.fNodes}get fInputs(){return this.fComponentsStore.fInputs}constructor(e,t,o){this.fComponentsStore=e,this.fDraggableDataContext=t,this.fBrowser=o}handle(e){let t=this.getOutput(e.dragHandler)||this.getOutlet(e.dragHandler),o=this.getInputsUnderPointer(e.event.getPosition(),e.dragHandler),r=t.isSelfConnectable?o:this.filterSelfConnectable(o,t);return r.length>0?r[0]:void 0}getOutput(e){return this.fComponentsStore.fOutputs.find(t=>t.fId===e.fConnection.fOutputId)}getOutlet(e){return this.fComponentsStore.fOutlets.find(t=>t.fId===e.fConnection.fOutputId)}getInputsUnderPointer(e,t){let o=this.getInputsInPosition(e),r=t.getClosetInput(this.getDifference(e));r&&o.push(r.fConnector);let s=this.getFirstConnectableInputOfNodeInPosition(e);return s&&o.push(s),o}getDifference(e){return A.fromPoint(e).elementTransform(this.fComponentsStore.flowHost).div(this.fDraggableDataContext.onPointerDownScale).sub(this.fDraggableDataContext.onPointerDownPosition)}getInputsInPosition(e){return this.getElementsFromPoint(e).map(t=>this.fInputs.find(o=>o.isContains(t)&&o.canBeConnected)).filter(t=>!!t)}getElementsFromPoint(e){return this.fBrowser.document.elementsFromPoint(e.x,e.y)}getFirstConnectableInputOfNodeInPosition(e){return this.getNodesInPosition(e).map(t=>this.fInputs.find(o=>t.isContains(o.hostElement)&&o.canBeConnected)).find(t=>!!t)}getNodesInPosition(e){return this.getElementsFromPoint(e).map(t=>this.fNodes.find(o=>o.isContains(t)&&o.fConnectOnNode)).filter(t=>!!t)}filterSelfConnectable(e,t){return e.filter(o=>{let r=this.fNodes.find(a=>a.isContains(o.hostElement));return this.fNodes.find(a=>a.isContains(t.hostElement))?.hostElement!==r?.hostElement})}static \u0275fac=function(t){return new(t||rr)(c(g),c(S),c(ce))};static \u0275prov=l({token:rr,factory:rr.\u0275fac})};return i=f([m(Jt)],i),i})(),q_=(()=>{let i=class sr{fComponentsStore;constructor(e){this.fComponentsStore=e}handle(e){if(!(this.getOutput(e.dragHandler)||this.getOutlet(e.dragHandler)))throw nu(e.dragHandler.fConnection.fOutputId);return!0}getOutput(e){return this.fComponentsStore.fOutputs.find(t=>t.fId===e.fConnection.fOutputId)}getOutlet(e){return this.fComponentsStore.fOutlets.find(t=>t.fId===e.fConnection.fOutputId)}static \u0275fac=function(t){return new(t||sr)(c(g))};static \u0275prov=l({token:sr,factory:sr.\u0275fac})};return i=f([ae(Jt)],i),i})(),J_=(()=>{let i=class ar{fComponentsStore;fDraggableDataContext;fMediator;get dragHandler(){return this.fDraggableDataContext.draggableItems[0]}constructor(e,t,o){this.fComponentsStore=e,this.fDraggableDataContext=t,this.fMediator=o}handle(e){this.emitEvent(e.event),this.dragHandler.onPointerUp()}getTargetOutput(e){if(!e)throw nu(this.dragHandler.fConnection.fOutputId);return Yh(e.hostElement)?this.fMediator.send(new qt(e)):e}getOutput(){return this.fComponentsStore.fOutputs.find(e=>e.fId===this.dragHandler.fConnection.fOutputId)}getOutlet(){return this.fComponentsStore.fOutlets.find(e=>e.fId===this.dragHandler.fConnection.fOutputId)}emitEvent(e){this.fComponentsStore.fDraggable?.fCreateConnection.emit(new Bc(this.getTargetOutput(this.getOutput()||this.getOutlet()).fId,this.getInputUnderPointer(e)?.fId,e.getPosition()))}getInputUnderPointer(e){return this.fMediator.send(new Jt(e,this.dragHandler))}static \u0275fac=function(t){return new(t||ar)(c(g),c(S),c(D))};static \u0275prov=l({token:ar,factory:ar.\u0275fac})};return i=f([m(Ui)],i),i})(),Ia=class{fMediator;fComponentsStore;fOutput;onPointerDownPosition;toConnectorRect=new Ee;get fConnection(){return this.fComponentsStore.fTempConnection}get fSnapConnection(){return this.fComponentsStore.fSnapConnection}fOutputWithRect;canBeConnectedInputs=[];constructor(n,e,t,o){this.fMediator=n,this.fComponentsStore=e,this.fOutput=t,this.onPointerDownPosition=o}prepareDragSequence(){this._initializeSnapConnection(),this._initializeConnectionForCreate(),this.canBeConnectedInputs=this.fMediator.send(new Bi(this.fOutput.fId)),this.fOutputWithRect=this.fMediator.send(new it(this.fOutput)),this.toConnectorRect=Ee.fromRect(E.initialize(this.onPointerDownPosition.x,this.onPointerDownPosition.y)),this.fConnection.show(),this.onPointerMove(b.initialize())}_initializeSnapConnection(){this.fSnapConnection&&(this.fSnapConnection.fOutputId=this.fOutput.fId,this.fSnapConnection.initialize())}_initializeConnectionForCreate(){this.fConnection.fOutputId=this.fOutput.fId,this.fConnection.initialize()}onPointerMove(n){let e=this._findClosestInput(n);this._drawConnectionForCreate(this.toConnectorRect.addPoint(n),e?.fConnector.fConnectableSide||U.TOP),this.fSnapConnection&&this._drawSnapConnection(this._getClosestInputForSnapConnection(e))}_drawConnectionForCreate(n,e){let t=this.fMediator.send(new Be(this.fOutputWithRect.fRect,n,this.fConnection.fBehavior,this.fOutputWithRect.fConnector.fConnectableSide,e));this.fConnection.setLine(t.point1,this.fOutputWithRect.fConnector.fConnectableSide,t.point2,e),this.fConnection.redraw()}_drawSnapConnection(n){if(n){let e=this.fMediator.send(new Be(this.fOutputWithRect.fRect,n.fRect,this.fSnapConnection.fBehavior,this.fOutputWithRect.fConnector.fConnectableSide,n.fConnector.fConnectableSide));this.fSnapConnection.show(),this.fSnapConnection.setLine(e.point1,this.fOutputWithRect.fConnector.fConnectableSide,e.point2,n.fConnector.fConnectableSide),this.fSnapConnection.redraw()}else this.fSnapConnection?.hide()}getClosetInput(n){if(this.fSnapConnection)return this._getClosestInputForSnapConnection(this._findClosestInput(n))}_findClosestInput(n){return this.fMediator.send(new Li(A.fromPoint(this.toConnectorRect).add(n),this.canBeConnectedInputs))}_getClosestInputForSnapConnection(n){return n&&n.distance<this.fSnapConnection.fSnapThreshold?n:void 0}onPointerUp(){this.fConnection.redraw(),this.fConnection.hide(),this.fSnapConnection?.hide()}},ev=(()=>{let i=class lr{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){return this.fDraggableDataContext.draggableItems.some(t=>t instanceof Ia)}static \u0275fac=function(t){return new(t||lr)(c(S))};static \u0275prov=l({token:lr,factory:lr.\u0275fac})};return i=f([ae(Ui)],i),i})(),$i=class{onPointerDownPosition;connector;constructor(n,e){this.onPointerDownPosition=n,this.connector=e}},tv=(()=>{let i=class cr{fComponentsStore;fDraggableDataContext;fMediator;get flowHost(){return this.fComponentsStore.flowHost}get transform(){return this.fComponentsStore.fCanvas.transform}constructor(e,t,o){this.fComponentsStore=e,this.fDraggableDataContext=t,this.fMediator=o}handle(e){this.fDraggableDataContext.onPointerDownScale=this.transform.scale;let t=A.fromPoint(e.onPointerDownPosition).elementTransform(this.flowHost).div(this.transform.scale);this.fDraggableDataContext.onPointerDownPosition=t;let o=A.fromPoint(t).mult(this.transform.scale).sub(this.transform.position).sub(this.transform.scaledPosition).div(this.transform.scale);this.fDraggableDataContext.draggableItems=[new Ia(this.fMediator,this.fComponentsStore,e.connector,o)]}static \u0275fac=function(t){return new(t||cr)(c(g),c(S),c(D))};static \u0275prov=l({token:cr,factory:cr.\u0275fac})};return i=f([m($i)],i),i})(),Ma=class{event;constructor(n){this.event=n}},iv=(()=>{let i=class dr{fComponentsStore;fMediator;constructor(e,t){this.fComponentsStore=e,this.fMediator=t}handle(e){let{event:t}=e,o=this.fComponentsStore.fNodes.find(a=>a.isContains(t.targetElement)),r=this.fComponentsStore.fOutlets.find(a=>a.hostElement.contains(t.targetElement));if(!r)throw new Error("Outlet not found");let s=this.fComponentsStore.fOutputs.filter(a=>o.isContains(a.hostElement));if(r.setOutputs(s),r.canBeConnected)if(r.isConnectionFromOutlet)this.createDragHandler(t.getPosition(),r);else{let a=this.fMediator.send(new qt(r));if(!a)throw ou();this.createDragHandler(t.getPosition(),a)}}createDragHandler(e,t){this.fMediator.send(new $i(e,t))}static \u0275fac=function(t){return new(t||dr)(c(g),c(D))};static \u0275prov=l({token:dr,factory:dr.\u0275fac})};return i=f([m(Ma)],i),i})(),Yi=class{event;constructor(n){this.event=n}},nv=(()=>{let i=class fr{fComponentsStore;fMediator;constructor(e,t){this.fComponentsStore=e,this.fMediator=t}handle(e){let{event:t}=e,o=this.fComponentsStore.fOutputs.find(r=>r.hostElement.contains(t.targetElement));if(!o)throw new Error("Output not found");o.canBeConnected&&this.createDragHandler(t.getPosition(),o)}createDragHandler(e,t){this.fMediator.send(new $i(e,t))}static \u0275fac=function(t){return new(t||fr)(c(g),c(D))};static \u0275prov=l({token:fr,factory:fr.\u0275fac})};return i=f([m(Yi)],i),i})(),ov=(()=>{let i=class hr{fComponentsStore;constructor(e){this.fComponentsStore=e}handle(e){return this.isNodeOutput(e.event.targetElement,this.getNode(e.event))}getNode(e){return this.fComponentsStore.fNodes.find(t=>t.isContains(e.targetElement))}isNodeOutput(e,t){return Xh(e)&&!this.getOutlets(t).length}getOutlets(e){return this.fComponentsStore.fOutlets.filter(t=>e.isContains(t.hostElement))}static \u0275fac=function(t){return new(t||hr)(c(g))};static \u0275prov=l({token:hr,factory:hr.\u0275fac})};return i=f([ae(Yi)],i),i})(),Xi=class{event;constructor(n){this.event=n}},rv=(()=>{let i=class ur{fComponentsStore;fMediator;constructor(e,t){this.fComponentsStore=e,this.fMediator=t}handle(e){Yh(e.event.targetElement)?this.fMediator.send(new Ma(e.event)):this.isNodeOutput(e.event.targetElement,this.getNode(e.event))&&this.fMediator.send(new Yi(e.event))}getNode(e){return this.fComponentsStore.fNodes.find(t=>t.isContains(e.targetElement))}isNodeOutput(e,t){return Xh(e)&&!this.getOutlets(t).length}getOutlets(e){return this.fComponentsStore.fOutlets.filter(t=>e.isContains(t.hostElement))}static \u0275fac=function(t){return new(t||ur)(c(g),c(D))};static \u0275prov=l({token:ur,factory:ur.\u0275fac})};return i=f([m(Xi)],i),i})(),sv=(()=>{let i=class mr{fComponentsStore;fDraggableDataContext;constructor(e,t){this.fComponentsStore=e,this.fDraggableDataContext=t}handle(e){return!!this.getNode(e.event)&&this.isValidConditions()}getNode(e){return this.fComponentsStore.fNodes.find(t=>t.isContains(e.targetElement))}isValidConditions(){return!this.fDraggableDataContext.draggableItems.length&&!!this.fComponentsStore.fTempConnection}static \u0275fac=function(t){return new(t||mr)(c(g),c(S))};static \u0275prov=l({token:mr,factory:mr.\u0275fac})};return i=f([ae(Xi)],i),i})(),Qi=class{event;constructor(n){this.event=n}},jc=class{fConnectionId;fOutputId;oldFInputId;newFInputId;fDropPosition;constructor(n,e,t,o,r){this.fConnectionId=n,this.fOutputId=e,this.oldFInputId=t,this.newFInputId=o,this.fDropPosition=r}},av=(()=>{let i=class pr{fComponentsStore;fDraggableDataContext;fMediator;get fDraggable(){return this.fComponentsStore.fDraggable}get dragHandler(){return this.fDraggableDataContext.draggableItems[0]}constructor(e,t,o){this.fComponentsStore=e,this.fDraggableDataContext=t,this.fMediator=o}handle(e){this.emitEvent(e.event),this.dragHandler.onPointerUp()}emitEvent(e){let t=this.getInputUnderPointer(e);t&&!this.isReassignToDifferentInput(t)||this.fDraggable.fReassignConnection.emit(new jc(this.dragHandler.fConnection.fId,this.dragHandler.fConnection.fOutputId,this.dragHandler.fConnection.fInputId,t?.fId,e.getPosition()))}getInputUnderPointer(e){return this.fMediator.send(new Jt(e,this.dragHandler))}isReassignToDifferentInput(e){return this.dragHandler.fConnection.fInputId!==e.fId}static \u0275fac=function(t){return new(t||pr)(c(g),c(S),c(D))};static \u0275prov=l({token:pr,factory:pr.\u0275fac})};return i=f([m(Qi)],i),i})(),Fa=class{fMediator;fComponentsStore;fConnection;toConnectorRect=new Ee;get fSnapConnection(){return this.fComponentsStore.fSnapConnection}fOutputWithRect;fInputWithRect;canBeConnectedInputs=[];constructor(n,e,t){this.fMediator=n,this.fComponentsStore=e,this.fConnection=t}prepareDragSequence(){this._initializeSnapConnection(),this.canBeConnectedInputs=this.fMediator.send(new Bi(this.fConnection.fOutputId)),this.fOutputWithRect=this.fMediator.send(new it(this.getOutput())),this.fInputWithRect=this.fMediator.send(new it(this.getInput())),this.toConnectorRect=Ee.fromRect(E.initialize(this.fConnection.line.point2.x,this.fConnection.line.point2.y))}_initializeSnapConnection(){this.fSnapConnection&&(this.fSnapConnection.fOutputId=this.fConnection.fOutputId,this.fSnapConnection.initialize())}getOutput(){return this.fComponentsStore.fOutputs.find(n=>n.fId===this.fConnection.fOutputId)}getInput(){return this.fComponentsStore.fInputs.find(n=>n.fId===this.fConnection.fInputId)}onPointerMove(n){let e=this._findClosestInput(n);this._drawConnection(this.toConnectorRect.addPoint(n),e?.fConnector.fConnectableSide||this.fInputWithRect.fConnector.fConnectableSide),this.fSnapConnection&&this._drawSnapConnection(this._getClosestInputForSnapConnection(e))}_drawConnection(n,e){let t=this.fMediator.send(new Be(this.fOutputWithRect.fRect,n,this.fConnection.fBehavior,this.fOutputWithRect.fConnector.fConnectableSide,e));this.fConnection.setLine(t.point1,this.fOutputWithRect.fConnector.fConnectableSide,t.point2,e),this.fConnection.redraw()}_drawSnapConnection(n){if(n){let e=this.fMediator.send(new Be(this.fOutputWithRect.fRect,n.fRect,this.fSnapConnection.fBehavior,this.fOutputWithRect.fConnector.fConnectableSide,n.fConnector.fConnectableSide));this.fSnapConnection.show(),this.fSnapConnection.setLine(e.point1,this.fOutputWithRect.fConnector.fConnectableSide,e.point2,n.fConnector.fConnectableSide),this.fSnapConnection.redraw()}else this.fSnapConnection?.hide()}getClosetInput(n){if(this.fSnapConnection)return this._getClosestInputForSnapConnection(this._findClosestInput(n))}_findClosestInput(n){return this.fMediator.send(new Li(A.fromPoint(this.toConnectorRect).add(n),this.canBeConnectedInputs))}_getClosestInputForSnapConnection(n){return n&&n.distance<this.fSnapConnection.fSnapThreshold?n:void 0}onPointerUp(){this._drawConnection(this.fInputWithRect.fRect,this.fInputWithRect.fConnector.fConnectableSide),this.fSnapConnection?.hide()}},lv=(()=>{let i=class gr{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){return this.fDraggableDataContext.draggableItems.some(t=>t instanceof Fa)}static \u0275fac=function(t){return new(t||gr)(c(S))};static \u0275prov=l({token:gr,factory:gr.\u0275fac})};return i=f([ae(Qi)],i),i})(),Zi=class{event;constructor(n){this.event=n}},cv=(()=>{let i=class _r{fComponentsStore;fDraggableDataContext;fMediator;fBrowser;get transform(){return this.fComponentsStore.fCanvas.transform}get flowHost(){return this.fComponentsStore.fFlow.hostElement}get fConnections(){return this.fComponentsStore.fConnections}constructor(e,t,o,r){this.fComponentsStore=e,this.fDraggableDataContext=t,this.fMediator=o,this.fBrowser=r}handle(e){let t=this.getConnectionHandler(this.getDragHandleElement(e.event.getPosition()));t.fDraggingDisabled||(this.fMediator.send(new ii(t,this.fComponentsStore.fCanvas.fConnectionsContainer.nativeElement)),this.fDraggableDataContext.onPointerDownScale=this.transform.scale,this.fDraggableDataContext.onPointerDownPosition=A.fromPoint(e.event.getPosition()).elementTransform(this.flowHost).div(this.transform.scale),this.fDraggableDataContext.draggableItems=[new Fa(this.fMediator,this.fComponentsStore,t)])}getDragHandleElement(e){return this.getElementsFromPoint(e).filter(t=>!!this.getConnectionHandler(t)&&t.classList.contains(ad)).find(t=>!!t)}getElementsFromPoint(e){return this.fBrowser.document.elementsFromPoint(e.x,e.y)}getConnectionHandler(e){return this.fConnections.find(t=>t.isContains(e))}static \u0275fac=function(t){return new(t||_r)(c(g),c(S),c(D),c(ce))};static \u0275prov=l({token:_r,factory:_r.\u0275fac})};return i=f([m(Zi)],i),i})(),dv=(()=>{let i=class vr{fComponentsStore;fDraggableDataContext;fBrowser;get fConnections(){return this.fComponentsStore.fConnections}constructor(e,t,o){this.fComponentsStore=e,this.fDraggableDataContext=t,this.fBrowser=o}handle(e){return!!this.getDragHandleElements(e.event.getPosition()).length&&!this.fDraggableDataContext.draggableItems.length}getDragHandleElements(e){return this.getElementsFromPoint(e).filter(t=>!!this.getConnectionHandler(t)&&t.classList.contains(ad))}getElementsFromPoint(e){return this.fBrowser.document.elementsFromPoint(e.x,e.y)}getConnectionHandler(e){return this.fConnections.find(t=>t.isContains(e))}static \u0275fac=function(t){return new(t||vr)(c(g),c(S),c(ce))};static \u0275prov=l({token:vr,factory:vr.\u0275fac})};return i=f([ae(Zi)],i),i})(),fv=[K_,q_,J_,ev,tv,iv,Q_,Z_,nv,ov,rv,sv,av,lv,cv,dv],Ki=class{fNode;constructor(n){this.fNode=n}},hv=(()=>{let i=class Cr{fComponentsStore;fMediator;constructor(e,t){this.fComponentsStore=e,this.fMediator=t}handle(e){let t=E.initialize(-1/0,-1/0,1/0,1/0),o=this.getNode(e.fNode.fParentId);return o&&(t=this.getParentRect(o)),t}getNode(e){return this.fComponentsStore.fNodes.find(t=>t.fId===e)}getParentRect(e){let t=this._getNodeRect(e),o=this.getNodePadding(e,t);return E.initialize(t.x+o[0],t.y+o[1],t.width-o[0]-o[2],t.height-o[1]-o[3])}_getNodeRect(e){return this.fMediator.send(new ve(e.hostElement,!1))}getNodePadding(e,t){return this.fMediator.send(new _n(e,t))}static \u0275fac=function(t){return new(t||Cr)(c(g),c(D))};static \u0275prov=l({token:Cr,factory:Cr.\u0275fac})};return i=f([m(Ki)],i),i})(),Oa=class{fNode;fNodes;constructor(n,e){this.fNode=n,this.fNodes=e}},ei=class{fNode;constructor(n){this.fNode=n}},uv=(()=>{let i=class yr{_fComponentsStore=h(g);handle(e){return this._getParentNodes(e.fNode,new Set,[])}_getParentNodes(e,t,o){if(t.has(e.fId))throw new Error("Circular reference detected in the node hierarchy. Node id: "+e.fId);t.add(e.fId);let r=this._fComponentsStore.fNodes.find(s=>s.fId===e.fParentId);return r?(o.push(r),this._getParentNodes(r,t,o)):o}static \u0275fac=function(t){return new(t||yr)};static \u0275prov=l({token:yr,factory:yr.\u0275fac})};return i=f([m(ei)],i),i})(),mv=(()=>{let i=class xr{fMediator;constructor(e){this.fMediator=e}handle(e){return this.isParentNodeInArray(this.getParentNodeIds(e.fNode),e.fNodes)}getParentNodeIds(e){return this.getParentNodes(e).map(t=>t.fId)}getParentNodes(e){return this.fMediator.send(new ei(e))}isParentNodeInArray(e,t){return t.some(o=>e.includes(o.fId))}static \u0275fac=function(t){return new(t||xr)(c(D))};static \u0275prov=l({token:xr,factory:xr.\u0275fac})};return i=f([m(Oa)],i),i})(),zc=class{fNodeId;fConnectionIds;constructor(n,e){this.fNodeId=n,this.fConnectionIds=e}},qi=class{},pv=(()=>{let i=class br{_fMediator=h(D);_fComponentsStore=h(g);_fDraggableDataContext=h(S);handle(e){let t=this._getDraggedNodeUnderPointer(),o=this._getNodeOutputConnectors(t),r=this._getNodeInputConnectors(t),s=o.filter(d=>d.canBeConnected),a=r.filter(d=>d.canBeConnected);if(s.length&&a.length){let d=this._getOutputConnectionsId(s),p=this._getInputConnectionsId(a),_=this._calculateConnectionsUnderNode(t).filter(x=>!d.includes(x.fId)&&!p.includes(x.fId));_.length&&this._fComponentsStore.fDraggable?.fNodeIntersectedWithConnections.emit(new zc(t.fId,_.map(x=>x.fId)))}}_getDraggedNodeUnderPointer(){return this._fDraggableDataContext.draggableItems[0].fNode}_getNodeOutputConnectors(e){return this._fComponentsStore.fOutputs.filter(t=>e.isContains(t.hostElement))}_getNodeInputConnectors(e){return this._fComponentsStore.fInputs.filter(t=>e.isContains(t.hostElement))}_getOutputConnectionsId(e){let t=this._getConnectorsId(e);return this._fComponentsStore.fConnections.filter(o=>t.includes(o.fOutputId)).map(o=>o.fId)}_getInputConnectionsId(e){let t=this._getConnectorsId(e);return this._fComponentsStore.fConnections.filter(o=>t.includes(o.fInputId)).map(o=>o.fId)}_getConnectorsId(e){return e.map(t=>t.fId)}_calculateConnectionsUnderNode(e){let t=this._fMediator.send(new ve(e.hostElement,!0));return this._fComponentsStore.fConnections.filter(o=>this._isConnectionHasIntersectionsWithNode(o,t))}_isConnectionHasIntersectionsWithNode(e,t){return Xt.getRoundedRectIntersectionsWithSVGPath(e.fPath.hostElement,t).length>0}static \u0275fac=function(t){return new(t||br)};static \u0275prov=l({token:br,factory:br.\u0275fac})};return i=f([m(qi)],i),i})(),gv=(()=>{let i=class wr{_fDraggableDataContext=h(S);handle(e){return!!this._fDraggableDataContext.draggableItems.length&&this._fDraggableDataContext.draggableItems[0]instanceof je}static \u0275fac=function(t){return new(t||wr)};static \u0275prov=l({token:wr,factory:wr.\u0275fac})};return i=f([ae(qi)],i),i})(),_v=[hv,mv,pv,gv],Pa=class{},vv=(()=>{let i=class Dr{_fComponentsStore=h(g);handle(e){return!!this._fComponentsStore.fDraggable?.isDragStarted}static \u0275fac=function(t){return new(t||Dr)};static \u0275prov=l({token:Dr,factory:Dr.\u0275fac})};return i=f([m(Pa)],i),i})(),Ra=class{nodeDragHandler;outputIds;result;constructor(n,e,t){this.nodeDragHandler=n,this.outputIds=e,this.result=t}},fd=(()=>{class i{fMediator;fComponentsStore;connection;fOutputWithRect;fInputWithRect;constructor(e,t,o){this.fMediator=e,this.fComponentsStore=t,this.connection=o}prepareDragSequence(){this.fOutputWithRect=this.fMediator.send(new it(this.getOutput())),this.fInputWithRect=this.fMediator.send(new it(this.getInput()))}getOutput(){let e=this.fComponentsStore.fOutputs.find(t=>t.fId===this.connection.fOutputId);if(!e)throw new Error(this.connectorNotFoundPrefix(`fOutput with id ${this.connection.fOutputId} not found`));return e}getInput(){let e=this.fComponentsStore.fInputs.find(t=>t.fId===this.connection.fInputId);if(!e)throw new Error(this.connectorNotFoundPrefix(`fInput with id ${this.connection.fInputId} not found`));return e}connectorNotFoundPrefix(e){return`ConnectionDragHandler Error: Connection From (fOutput)${this.connection.fOutputId} To (fInput)${this.connection.fInputId}. ${e}. Please ensure that all f-connections are associated with existing connectors`}getRestrictedDifference(e,t){return{x:Math.min(Math.max(e.x,t.min.x),t.max.x),y:Math.min(Math.max(e.y,t.min.y),t.max.y)}}redrawConnection(e){this.connection.setLine(e.point1,this.fOutputWithRect.fConnector.fConnectableSide,e.point2,this.fInputWithRect.fConnector.fConnectableSide),this.connection.redraw()}static \u0275fac=function(t){return new(t||i)(u(D),u(g),u(dd))};static \u0275dir=O({type:i})}return i})(),ti=class extends fd{sourceRestrictions;targetRestrictions;constructor(n,e,t){super(n,e,t)}setOutputRestrictions(n,e){this.sourceRestrictions={min:n,max:e}}setInputRestrictions(n,e){this.targetRestrictions={min:n,max:e}}onPointerMove(n){this.redrawConnection(this.getNewLineValue(n))}getNewLineValue(n){return this.fMediator.execute(new Be(Ee.fromRoundedRect(this.fOutputWithRect.fRect).addPoint(this.getRestrictedDifference(z({},n),this.sourceRestrictions)),Ee.fromRoundedRect(this.fInputWithRect.fRect).addPoint(this.getRestrictedDifference(z({},n),this.targetRestrictions)),this.connection.fBehavior,this.fOutputWithRect.fConnector.fConnectableSide,this.fInputWithRect.fConnector.fConnectableSide))}},Hc=class extends fd{minDistance;maxDistance;constructor(n,e,t,o,r){super(n,e,t),this.minDistance=o,this.maxDistance=r}onPointerMove(n){this.redrawConnection(this.getNewLineValue(n))}getNewLineValue(n){return this.fMediator.execute(new Be(this.fOutputWithRect.fRect,Ee.fromRoundedRect(this.fInputWithRect.fRect).addPoint(this.getRestrictedDifference(z({},n),{min:this.minDistance,max:this.maxDistance})),this.connection.fBehavior,this.fOutputWithRect.fConnector.fConnectableSide,this.fInputWithRect.fConnector.fConnectableSide))}},Cv=(()=>{let i=class Er{fComponentsStore;fMediator;get fConnections(){return this.fComponentsStore.fConnections}constructor(e,t){this.fComponentsStore=e,this.fMediator=t}handle(e){this.getInputConnections(e.nodeDragHandler.fNode).forEach(t=>{let o=this.getExistingConnectionHandlerIndex(e.result,t);o!==-1?this.updateExistingConnectionHandler(e.result,o,e.nodeDragHandler):e.result.push(this.createNewConnectionHandler(e.nodeDragHandler,e.outputIds,t))})}getInputConnections(e){let t=new Set(this.getInputsForNode(e).map(o=>o.fId));return this.fConnections.filter(o=>t.has(o.fInputId))}getInputsForNode(e){return this.fComponentsStore.fInputs.filter(t=>e.isContains(t.hostElement))}getExistingConnectionHandlerIndex(e,t){return e.findIndex(o=>o instanceof ti&&o.connection.fId===t.fId)}createNewConnectionHandler(e,t,o){let r;return t.includes(o.fOutputId)?r=this.getNewConnectionHandler(o,e):r=this.getNewSourceConnectionHandler(o,e),r}getNewConnectionHandler(e,t){let o=new ti(this.fMediator,this.fComponentsStore,e);return o.setInputRestrictions(t.minDistance,t.maxDistance),o}updateExistingConnectionHandler(e,t,o){e[t].setInputRestrictions(o.minDistance,o.maxDistance)}getNewSourceConnectionHandler(e,t){return new Hc(this.fMediator,this.fComponentsStore,e,t.minDistance,t.maxDistance)}static \u0275fac=function(t){return new(t||Er)(c(g),c(D))};static \u0275prov=l({token:Er,factory:Er.\u0275fac})};return i=f([m(Ra)],i),i})(),Ta=class{nodeDragHandler;inputIds;result;constructor(n,e,t){this.nodeDragHandler=n,this.inputIds=e,this.result=t}},Gc=class extends fd{minDistance;maxDistance;constructor(n,e,t,o,r){super(n,e,t),this.minDistance=o,this.maxDistance=r}onPointerMove(n){this.redrawConnection(this.getNewLineValue(n))}getNewLineValue(n){return this.fMediator.execute(new Be(Ee.fromRoundedRect(this.fOutputWithRect.fRect).addPoint(this.getRestrictedDifference(z({},n),{min:this.minDistance,max:this.maxDistance})),this.fInputWithRect.fRect,this.connection.fBehavior,this.fOutputWithRect.fConnector.fConnectableSide,this.fInputWithRect.fConnector.fConnectableSide))}},yv=(()=>{let i=class Sr{fComponentsStore;fMediator;get fConnections(){return this.fComponentsStore.fConnections}constructor(e,t){this.fComponentsStore=e,this.fMediator=t}handle(e){this.getOutputConnections(e.nodeDragHandler.fNode).forEach(t=>{let o=this.getExistingConnectionHandlerIndex(e.result,t);o!==-1?this.updateExistingConnectionHandler(e.result,o,e.nodeDragHandler):e.result.push(this.createNewConnectionHandler(e.nodeDragHandler,e.inputIds,t))})}getOutputConnections(e){let t=new Set(this.getOutputsForNode(e).map(o=>o.fId));return this.fConnections.filter(o=>t.has(o.fOutputId))}getOutputsForNode(e){return this.fComponentsStore.fOutputs.filter(t=>e.isContains(t.hostElement))}getExistingConnectionHandlerIndex(e,t){return e.findIndex(o=>o instanceof ti&&o.connection.fId===t.fId)}createNewConnectionHandler(e,t,o){let r;return t.includes(o.fInputId)?r=this.getNewConnectionHandler(o,e):r=this.getNewSourceConnectionHandler(o,e),r}getNewConnectionHandler(e,t){let o=new ti(this.fMediator,this.fComponentsStore,e);return o.setOutputRestrictions(t.minDistance,t.maxDistance),o}updateExistingConnectionHandler(e,t,o){e[t].setOutputRestrictions(o.minDistance,o.maxDistance)}getNewSourceConnectionHandler(e,t){return new Gc(this.fMediator,this.fComponentsStore,e,t.minDistance,t.maxDistance)}static \u0275fac=function(t){return new(t||Sr)(c(g),c(D))};static \u0275prov=l({token:Sr,factory:Sr.\u0275fac})};return i=f([m(Ta)],i),i})(),Na=class{fNode;hasParentNodeInSelected;constructor(n,e){this.fNode=n,this.hasParentNodeInSelected=e}},xv=(()=>{let i=class Ir{_fMediator=h(D);handle(e){if(e.fNode.fParentId&&!e.hasParentNodeInSelected){let t=this.getParentNodeRect(e.fNode),o=this._getNodeRect(e.fNode);return{min:b.initialize(t.x-o.x,t.y-o.y),max:b.initialize(t.x+t.width-(o.x+o.width),t.y+t.height-(o.y+o.height))}}return z({},bv)}_getNodeRect(e){return this._fMediator.send(new ve(e.hostElement,!1))}getParentNodeRect(e){return this._fMediator.send(new Ki(e))}static \u0275fac=function(t){return new(t||Ir)};static \u0275prov=l({token:Ir,factory:Ir.\u0275fac})};return i=f([m(Na)],i),i})(),bv={min:b.initialize(-1/0,-1/0),max:b.initialize(1/0,1/0)},Aa=class{nodeWithDisabledSelection;constructor(n){this.nodeWithDisabledSelection=n}},je=class{fDraggableDataContext;fComponentsStore;fNode;minDistance;maxDistance;_onPointerDownPosition=b.initialize();constructor(n,e,t,o,r){this.fDraggableDataContext=n,this.fComponentsStore=e,this.fNode=t,this.minDistance=o,this.maxDistance=r,this._onPointerDownPosition=z({},t.position)}onPointerMove(n){let e=this._getDifference(n,{min:this.minDistance,max:this.maxDistance});this._redraw(this._getPosition(e)),this.fDraggableDataContext.fLineAlignment?.handle(e)}_getPosition(n){return A.fromPoint(this._onPointerDownPosition).add(n)}_getDifference(n,e){return{x:Math.min(Math.max(n.x,e.min.x),e.max.x),y:Math.min(Math.max(n.y,e.min.y),e.max.y)}}_redraw(n){this.fNode.updatePosition(n),this.fNode.redraw()}onPointerUp(){this.fNode.positionChange.emit(this.fNode.position)}getDifferenceWithCellSize(n){let e=this._getDifference(n,{min:this.minDistance,max:this.maxDistance}),t=this._getPosition(e);return A.fromPoint(this._applyCellSize(t)).sub(this._onPointerDownPosition)}_applyCellSize(n){let e=this.fComponentsStore.fDraggable.hCellSize,t=this.fComponentsStore.fDraggable.vCellSize;return{x:Math.round(n.x/e)*e,y:Math.round(n.y/t)*t}}},Wc=class{fDraggableDataContext;onPointerDownPosition=b.initialize();constructor(n){this.fDraggableDataContext=n}prepareDragSequence(){}onPointerMove(n){}onPointerUp(){}},wv=(()=>{let i=class Mr{_fMediator=h(D);_fComponentsStore=h(g);_fDraggableDataContext=h(S);handle(e){let t=this._getNodesWithRestrictions(this._getSelectedNodes(e.nodeWithDisabledSelection));return this.getDragHandlersWithConnections(this.getDragHandlersFromNodes(t),this.getAllOutputIds(t),this.getAllInputIds(t))}_getSelectedNodes(e){let t=this._getNodesFromSelection();return e&&t.push(e),t}_getNodesFromSelection(){return this._fDraggableDataContext.selectedItems.map(e=>this._findNode(e.hostElement)).filter(e=>!!e)}_findNode(e){return this._fComponentsStore.fNodes.find(t=>t.isContains(e))}_getNodesWithRestrictions(e){let t=[];return e.forEach(o=>{let r=this._fMediator.send(new Oa(o,e)),s=this._fMediator.send(new Na(o,r)),a=this._fMediator.send(new ei(o));t.push(z({node:o,parentNodes:a},s),...this.getChildrenItemsToDrag(o,s))}),t}getChildrenItemsToDrag(e,t){return this.getChildrenNodes(e.fId).map(o=>z({node:o},t))}getChildrenNodes(e){return this._fMediator.send(new gt(e))}getAllOutputIds(e){return Ql(e,t=>this.getOutputsForNode(t.node).map(o=>o.fId))}getOutputsForNode(e){return this._fComponentsStore.fOutputs.filter(t=>e.isContains(t.hostElement))}getAllInputIds(e){return Ql(e,t=>this.getInputsForNode(t.node).map(o=>o.fId))}getInputsForNode(e){return this._fComponentsStore.fInputs.filter(t=>e.isContains(t.hostElement))}getDragHandlersFromNodes(e){let t=[];return e.forEach(o=>{t.push(new je(this._fDraggableDataContext,this._fComponentsStore,o.node,o.min,o.max),...(o.parentNodes||[]).map(()=>new Wc(this._fDraggableDataContext)))}),t}getDragHandlersWithConnections(e,t,o){let r=e;return e.filter(s=>s instanceof je).forEach(s=>{this._fMediator.send(new Ta(s,o,r)),this._fMediator.send(new Ra(s,t,r))}),r}static \u0275fac=function(t){return new(t||Mr)};static \u0275prov=l({token:Mr,factory:Mr.\u0275fac})};return i=f([m(Aa)],i),i})(),Dv=[xv,Cv,yv,wv],Ji=class{event;constructor(n){this.event=n}},xl=(()=>{class i{fComponentsStore;fDraggableDataContext;notDraggedNodesRects;DEBOUNCE_TIME=15;get _transform(){return this.fComponentsStore.fCanvas.transform}_onPointerDownPosition=b.initialize();_debounceTimer=null;fNodeWithRect=null;constructor(e,t,o){this.fComponentsStore=e,this.fDraggableDataContext=t,this.notDraggedNodesRects=o,this._onPointerDownPosition=this.fDraggableDataContext.onPointerDownPosition}_toggleParentNode(e){let t=this._isNodeInsideAnotherNode(this._getNewPosition(e));t?this._markIncludeNode(t):this._unmarkIncludeNode()}_getNewPosition(e){return A.fromPoint(this._onPointerDownPosition).add(e).mult(this._transform.scale)}_isNodeInsideAnotherNode(e){return this.notDraggedNodesRects.find(t=>E.isIncludePoint(t.rect,e))}onPointerMove(e){this._debounceTimer&&clearTimeout(this._debounceTimer),this._debounceTimer=setTimeout(()=>this._toggleParentNode(e),this.DEBOUNCE_TIME)}_markIncludeNode(e){this._unmarkIncludeNode(),this.fNodeWithRect=e,e.node.setClass("f-parent-for-drop")}_unmarkIncludeNode(){this.fNodeWithRect?.node.removeClass("f-parent-for-drop"),this.fNodeWithRect=null}onPointerUp(){this._unmarkIncludeNode(),this._debounceTimer&&(clearTimeout(this._debounceTimer),this._debounceTimer=null)}static \u0275fac=function(t){zl()};static \u0275dir=O({type:i})}return i})(),Uc=class{fTargetNode;fNodes;fDropPosition;constructor(n,e,t){this.fTargetNode=n,this.fNodes=e,this.fDropPosition=t}},Ev=(()=>{let i=class Fr{fComponentsStore;fDraggableDataContext;constructor(e,t){this.fComponentsStore=e,this.fDraggableDataContext=t}handle(e){let t=this.getDragHandleItem();t.fNodeWithRect&&this.emitDroppedChildrenEvent(t.fNodeWithRect.node.fId,e.event),t.onPointerUp?.()}emitDroppedChildrenEvent(e,t){this.fComponentsStore.fDraggable?.fDropToGroup.emit(new Uc(e,this.getDraggedNodeIds(),t.getPosition()))}getDragHandleItem(){let e=this.findDragHandleItem();if(!e)throw new Error("NodeDragToParentDragHandler not found");return e}findDragHandleItem(){return this.fDraggableDataContext.draggableItems.find(e=>e instanceof xl)}getDraggedNodeIds(){return this.fDraggableDataContext.draggableItems.filter(e=>e instanceof je).map(e=>e.fNode.fId)}static \u0275fac=function(t){return new(t||Fr)(c(g),c(S))};static \u0275prov=l({token:Fr,factory:Fr.\u0275fac})};return i=f([m(Ji)],i),i})(),Sv=(()=>{let i=class Or{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){return this.fDraggableDataContext.draggableItems.some(t=>t instanceof xl)}static \u0275fac=function(t){return new(t||Or)(c(S))};static \u0275prov=l({token:Or,factory:Or.\u0275fac})};return i=f([ae(Ji)],i),i})(),Iv=[Ev,Sv],en=class{event;constructor(n){this.event=n}},Mv=(()=>{let i=class Pr{fMediator;fDraggableDataContext;fComponentsStore;get fNodes(){return this.fComponentsStore.fNodes}get transform(){return this.fComponentsStore.fCanvas.transform}get fCanvasPosition(){return b.sum(this.transform.position,this.transform.scaledPosition)}constructor(e,t,o){this.fMediator=e,this.fDraggableDataContext=t,this.fComponentsStore=o}handle(e){if(!this.fComponentsStore.fNodes.find(o=>o.isContains(e.event.targetElement)))throw new Error("Node not found");this.fDraggableDataContext.draggableItems.push(new xl(this.fComponentsStore,this.fDraggableDataContext,this._getNotDraggedNodesRects()))}_getNotDraggedNodesRects(){let e=this._addParentNodes(this._getNodesBeingDragged());return this._getNotDraggedNodes(e).map(t=>{let o=this.fMediator.send(new ve(t.hostElement,!1));return{node:t,rect:E.initialize(o.x+this.fCanvasPosition.x,o.y+this.fCanvasPosition.y,o.width*this.transform.scale,o.height*this.transform.scale)}})}_getNodesBeingDragged(){return this.fDraggableDataContext.draggableItems.filter(e=>e instanceof je).map(e=>e.fNode)}_addParentNodes(e){return e.reduce((t,o)=>(t.push(o,...this.fMediator.send(new ei(o))),t),[])}_getNotDraggedNodes(e){return this.fNodes.filter(t=>!e.includes(t))}static \u0275fac=function(t){return new(t||Pr)(c(D),c(S),c(g))};static \u0275prov=l({token:Pr,factory:Pr.\u0275fac})};return i=f([m(en)],i),i})(),Fv=(()=>{let i=class Rr{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){return this.fDraggableDataContext.draggableItems.some(t=>t instanceof je)}static \u0275fac=function(t){return new(t||Rr)(c(S))};static \u0275prov=l({token:Rr,factory:Rr.\u0275fac})};return i=f([ae(en)],i),i})(),Ov=[Mv,Fv],tn=class{event;constructor(n){this.event=n}},Pv=(()=>{let i=class Tr{_fMediator=h(D);_fComponentsStore=h(g);_fDraggableDataContext=h(S);get _transform(){return this._fComponentsStore.fCanvas.transform}get _fHost(){return this._fComponentsStore.fFlow.hostElement}handle(e){let t=this._calculateDraggableItems(this._getNode(e.event.targetElement));this._initializeLineAlignment(t),this._fDraggableDataContext.onPointerDownScale=this._transform.scale,this._fDraggableDataContext.onPointerDownPosition=A.fromPoint(e.event.getPosition()).elementTransform(this._fHost).div(this._transform.scale),this._fDraggableDataContext.draggableItems=t}_getNode(e){let t=this._fComponentsStore.fNodes.find(o=>o.isContains(e));if(!t)throw new Error("Node not found");return t}_calculateDraggableItems(e){let t=[];return e.fSelectionDisabled?t=this._dragModelFromSelection(e):(this._fMediator.send(new un(e)),t=this._dragModelFromSelection()),t}_dragModelFromSelection(e){return this._fMediator.send(new Aa(e))}_initializeLineAlignment(e){this._fDraggableDataContext.fLineAlignment?.initialize(this._fComponentsStore.fNodes,this._filterNodesFromDraggableItems(e))}_filterNodesFromDraggableItems(e){return e.filter(t=>t instanceof je).map(t=>t.fNode)}static \u0275fac=function(t){return new(t||Tr)};static \u0275prov=l({token:Tr,factory:Tr.\u0275fac})};return i=f([m(tn)],i),i})(),Rv=(()=>{let i=class Nr{_fComponentsStore=h(g);_fDraggableDataContext=h(S);handle(e){return this._isDragHandlesEmpty()&&this._isDragHandleElement(e.event.targetElement)&&this._isNodeCanBeDragged(this._getNode(e.event.targetElement))}_isDragHandlesEmpty(){return!this._fDraggableDataContext.draggableItems.length}_isDragHandleElement(e){return Zl(e,".f-drag-handle")}_isNodeCanBeDragged(e){return!!e&&!e.fDraggingDisabled}_getNode(e){return this._fComponentsStore.fNodes.find(t=>t.isContains(e))}static \u0275fac=function(t){return new(t||Nr)};static \u0275prov=l({token:Nr,factory:Nr.\u0275fac})};return i=f([ae(tn)],i),i})(),Tv=[Pv,Rv],nn=class{event;constructor(n){this.event=n}},Nv=(()=>{let i=class Ar{_fMediator=h(D);_fComponentsStore=h(g);_fDraggableDataContext=h(S);get _fHost(){return this._fComponentsStore.fFlow.hostElement}handle(e){let t=this._getDifferenceWithLineAlignment(this._getDifferenceBetweenPreparationAndFinalize(e.event.getPosition())),r=this._fDraggableDataContext.draggableItems.find(s=>s instanceof je).getDifferenceWithCellSize(t);this._finalizeMove(r),this._fMediator.send(new qi),this._fDraggableDataContext.fLineAlignment?.complete()}_finalizeMove(e){this._getItems().forEach(t=>{t.onPointerMove(z({},e)),t.onPointerUp?.()})}_getItems(){return this._fDraggableDataContext.draggableItems.filter(e=>!(e instanceof xl))}_getDifferenceBetweenPreparationAndFinalize(e){return A.fromPoint(e).elementTransform(this._fHost).div(this._fDraggableDataContext.onPointerDownScale).sub(this._fDraggableDataContext.onPointerDownPosition)}_getDifferenceWithLineAlignment(e){return this._applyLineAlignmentDifference(e,this._getLineAlignmentDifference(e))}_getLineAlignmentDifference(e){return this._fDraggableDataContext.fLineAlignment?.findNearestCoordinate(e)}_applyLineAlignmentDifference(e,t){return t&&(e.x=t.xResult.value?e.x-t.xResult.distance:e.x,e.y=t.yResult.value?e.y-t.yResult.distance:e.y),e}static \u0275fac=function(t){return new(t||Ar)};static \u0275prov=l({token:Ar,factory:Ar.\u0275fac})};return i=f([m(nn)],i),i})(),Av=(()=>{let i=class kr{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){return this.fDraggableDataContext.draggableItems.some(t=>t instanceof je)}static \u0275fac=function(t){return new(t||kr)(c(S))};static \u0275prov=l({token:kr,factory:kr.\u0275fac})};return i=f([ae(nn)],i),i})(),kv=[Nv,Av],Vv=[...Dv,...kv,...Tv,...Ov,...Iv],ka=class{rect;restrictionsRect;constructor(n,e){this.rect=n,this.restrictionsRect=e}},$e=0,Lv=(()=>{let i=class Vr{handle(e){this.applyRestrictions(e.rect,e.restrictionsRect)}applyRestrictions(e,t){this.left(e,t),this.top(e,t),this.right(e,t),this.bottom(e,t)}left(e,t){e.x>t.x-$e&&(e.width+=e.x-t.x-$e,e.x=t.x-$e)}top(e,t){e.y>t.y-$e&&(e.height+=e.y-t.y-$e,e.y=t.y-$e)}right(e,t){e.x+e.width<=t.x+t.width+$e&&(e.width=t.x+t.width-e.x+$e)}bottom(e,t){e.y+e.height<=t.y+t.height+$e&&(e.height=t.y+t.height-e.y+$e)}static \u0275fac=function(t){return new(t||Vr)};static \u0275prov=l({token:Vr,factory:Vr.\u0275fac})};return i=f([m(ka)],i),i})(),Va=class{rect;restrictionsRect;constructor(n,e){this.rect=n,this.restrictionsRect=e}},Ye=0,Bv=(()=>{let i=class Lr{handle(e){this.applyRestrictions(e.rect,e.restrictionsRect)}applyRestrictions(e,t){this.left(e,t),this.top(e,t),this.right(e,t),this.bottom(e,t)}left(e,t){e.x<=t.x+Ye&&(e.width-=t.x-e.x+Ye,e.x=t.x+Ye)}top(e,t){e.y<=t.y+Ye&&(e.height-=t.y-e.y+Ye,e.y=t.y+Ye)}right(e,t){e.x+e.width>t.x+t.width-Ye&&(e.width=t.x+t.width-e.x-Ye)}bottom(e,t){e.y+e.height>t.y+t.height-Ye&&(e.height=t.y+t.height-e.y-Ye)}static \u0275fac=function(t){return new(t||Lr)};static \u0275prov=l({token:Lr,factory:Lr.\u0275fac})};return i=f([m(Va)],i),i})(),La=class{originalRect;changedRect;difference;fResizeHandleType;constructor(n,e,t,o){this.originalRect=n,this.changedRect=e,this.difference=t,this.fResizeHandleType=o}},ru={[Zt.LEFT_TOP]:{x:-1,y:-1},[Zt.RIGHT_TOP]:{x:1,y:-1},[Zt.RIGHT_BOTTOM]:{x:1,y:1},[Zt.LEFT_BOTTOM]:{x:-1,y:1}},jv=(()=>{let i=class Br{handle(e){return this.change(e.originalRect,e.difference,ru[e.fResizeHandleType],e.changedRect)}change(e,t,o,r){return E.initialize(e.x+(o.x===-1?t.x:0)+r.x,e.y+(o.y===-1?t.y:0)+r.y,r.width,r.height)}static \u0275fac=function(t){return new(t||Br)};static \u0275prov=l({token:Br,factory:Br.\u0275fac})};return i=f([m(La)],i),i})(),Ba=class{originalRect;difference;fResizeHandleType;constructor(n,e,t){this.originalRect=n,this.difference=e,this.fResizeHandleType=t}},zv=(()=>{let i=class jr{handle(e){return this.change(e.originalRect,e.difference,ru[e.fResizeHandleType])}change(e,t,o){let r=E.initialize(0,0,e.width+o.x*t.x,e.height+o.y*t.y);return r.width<0&&(r.x=r.width,r.width=Math.abs(r.width)),r.height<0&&(r.y=r.height,r.height=Math.abs(r.height)),E.copy(r)}static \u0275fac=function(t){return new(t||jr)};static \u0275prov=l({token:jr,factory:jr.\u0275fac})};return i=f([m(Ba)],i),i})(),ja=class{fNode;paddings;constructor(n,e){this.fNode=n,this.paddings=e}},Hv=(()=>{let i=class zr{fMediator;constructor(e){this.fMediator=e}handle(e){let t=E.union(this.getChildrenNodes(e.fNode.fId).map(o=>this.normalizeRect(o)));return t?this.concatRectWithParentPadding(t,e.paddings):null}getChildrenNodes(e){return this.fMediator.send(new gt(e))}normalizeRect(e){return this.fMediator.send(new ve(e.hostElement,!1))}concatRectWithParentPadding(e,t){return E.initialize(e.x-t[0],e.y-t[1],e.width+t[0]+t[2],e.height+ +t[1]+t[3])}static \u0275fac=function(t){return new(t||zr)(c(D))};static \u0275prov=l({token:zr,factory:zr.\u0275fac})};return i=f([m(ja)],i),i})(),za=class{fNode;rect;constructor(n,e){this.fNode=n,this.rect=e}},Gv=(()=>{let i=class Hr{fMediator;constructor(e){this.fMediator=e}handle(e){let t=this.getNodePaddings(e.fNode,e.rect),o=this.fMediator.send(new ja(e.fNode,t));return{parentRect:this.fMediator.send(new Ki(e.fNode)),childRect:o,minSize:It.initialize(t[0]+t[2],t[1]+t[3])}}getNodePaddings(e,t){return this.fMediator.send(new _n(e,t))}static \u0275fac=function(t){return new(t||Hr)(c(D))};static \u0275prov=l({token:Hr,factory:Hr.\u0275fac})};return i=f([m(za)],i),i})(),on=class{event;constructor(n){this.event=n}},Wv=(()=>{let i=class Gr{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){this.fDraggableDataContext.draggableItems.forEach(t=>{t.onPointerUp?.()})}static \u0275fac=function(t){return new(t||Gr)(c(S))};static \u0275prov=l({token:Gr,factory:Gr.\u0275fac})};return i=f([m(on)],i),i})(),Ha=class{fMediator;fNode;fResizeHandleType;originalRect;restrictions;childRestrictions=()=>{};constructor(n,e,t){this.fMediator=n,this.fNode=e,this.fResizeHandleType=t}prepareDragSequence(){this.originalRect=this.fMediator.send(new ve(this.fNode.hostElement,!1)),this.restrictions=this.fMediator.send(new za(this.fNode,this.originalRect)),this.restrictions.childRect&&(this.childRestrictions=(n,e)=>{this.applyChildRestrictions(n,e)})}onPointerMove(n){let e=this.changePosition(n,this.changeSize(n,this.restrictions.minSize));this.childRestrictions(e,this.restrictions.childRect),this.applyParentRestrictions(e,this.restrictions.parentRect),this.fNode.updatePosition(e),this.fNode.updateSize(e),this.fNode.redraw()}changeSize(n,e){return this.fMediator.send(new Ba(this.originalRect,n,this.fResizeHandleType))}changePosition(n,e){return this.fMediator.send(new La(this.originalRect,e,n,this.fResizeHandleType))}applyChildRestrictions(n,e){this.fMediator.send(new ka(n,e))}applyParentRestrictions(n,e){this.fMediator.send(new Va(n,e))}onPointerUp(){this.fNode.sizeChange.emit(E.initialize(this.fNode.position.x,this.fNode.position.y,this.fNode.size?.width,this.fNode.size?.height))}},Uv=(()=>{let i=class Wr{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){return this.fDraggableDataContext.draggableItems.some(t=>t instanceof Ha)}static \u0275fac=function(t){return new(t||Wr)(c(S))};static \u0275prov=l({token:Wr,factory:Wr.\u0275fac})};return i=f([ae(on)],i),i})(),$v=[Wv,Uv],rn=class{event;constructor(n){this.event=n}},Yv=(()=>{let i=class Ur{fComponentsStore;fDraggableDataContext;fMediator;get transform(){return this.fComponentsStore.fCanvas.transform}get flowHost(){return this.fComponentsStore.fFlow.hostElement}constructor(e,t,o){this.fComponentsStore=e,this.fDraggableDataContext=t,this.fMediator=o}handle(e){this.selectAndUpdateNodeLayer(e.event.targetElement);let t=hf(e.event.targetElement,"fResizeHandleType",".f-resize-handle"),o=[new Ha(this.fMediator,this.getNode(e.event.targetElement),Zt[t])];this.fDraggableDataContext.onPointerDownScale=this.transform.scale,this.fDraggableDataContext.onPointerDownPosition=A.fromPoint(e.event.getPosition()).elementTransform(this.flowHost).div(this.transform.scale),this.fDraggableDataContext.draggableItems=o}selectAndUpdateNodeLayer(e){this.fMediator.send(new un(this.getNode(e)))}getNode(e){return this.fComponentsStore.fNodes.find(t=>t.isContains(e))}static \u0275fac=function(t){return new(t||Ur)(c(g),c(S),c(D))};static \u0275prov=l({token:Ur,factory:Ur.\u0275fac})};return i=f([m(rn)],i),i})(),Xv=(()=>{let i=class $r{fComponentsStore;fDraggableDataContext;constructor(e,t){this.fComponentsStore=e,this.fDraggableDataContext=t}handle(e){return this.isDragHandlesEmpty()&&this.isDragHandleElement(e.event.targetElement)&&this.isNodeCanBeDragged(this.getNode(e.event.targetElement))}isDragHandlesEmpty(){return!this.fDraggableDataContext.draggableItems.length}getNode(e){return this.fComponentsStore.fNodes.find(t=>t.isContains(e))}isNodeCanBeDragged(e){return!!e&&!e.fDraggingDisabled}isDragHandleElement(e){return Zl(e,".f-resize-handle")}static \u0275fac=function(t){return new(t||$r)(c(g),c(S))};static \u0275prov=l({token:$r,factory:$r.\u0275fac})};return i=f([ae(rn)],i),i})(),Qv=[Yv,Xv],Zv=[Lv,Bv,jv,zv,Hv,Gv,...$v,...Qv],sn=class{event;constructor(n){this.event=n}},Kv=(()=>{let i=class Yr{fPlatform;fComponentsStore;fDraggableDataContext;fMediator;constructor(e,t,o,r){this.fPlatform=e,this.fComponentsStore=t,this.fDraggableDataContext=o,this.fMediator=r}handle(e){let{event:t}=e,o=this.getSelectableItem(t);o&&this.fMediator.send(new ii(o,o.hostElement.parentElement)),this.isMultiselectEnabled(t)?this.multiSelect(o):this.singleSelect(o)}getSelectableItem(e){return this._findNode(e.targetElement)||this.getConnectionHandler(e.targetElement)}_findNode(e){return this.fComponentsStore.fNodes.find(t=>t.isContains(e))}getConnectionHandler(e){return this.fComponentsStore.fConnections.find(t=>t.isContains(e)||t.fConnectionCenter?.nativeElement?.contains(e))}isMultiselectEnabled(e){return this.isCommandButton(this.fPlatform.getOS(),e.originalEvent)||this.isShiftPressed(e.originalEvent)}isShiftPressed(e){return e.shiftKey}isCommandButton(e,t){return e===Ue.MAC_OS?t.metaKey:t.ctrlKey}singleSelect(e){e?!e.isSelected()&&!e.fSelectionDisabled?(this.clearSelection(),this.selectItem(e)):e.fSelectionDisabled&&this.clearSelection():this.clearSelection()}multiSelect(e){e&&!e.fSelectionDisabled&&(e.isSelected()?this.deselectItem(e):this.selectItem(e))}deselectItem(e){let t=this.fDraggableDataContext.selectedItems.indexOf(e);t>-1&&this.fDraggableDataContext.selectedItems.splice(t,1),e.deselect(),this.fDraggableDataContext.markSelectionAsChanged()}selectItem(e){this.fDraggableDataContext.selectedItems.push(e),e.select(),this.fDraggableDataContext.markSelectionAsChanged()}clearSelection(){this.fDraggableDataContext.selectedItems.forEach(e=>{e.deselect(),this.fDraggableDataContext.markSelectionAsChanged()}),this.fDraggableDataContext.selectedItems=[]}static \u0275fac=function(t){return new(t||Yr)(c(Ni),c(g),c(S),c(D))};static \u0275prov=l({token:Yr,factory:Yr.\u0275fac})};return i=f([m(sn)],i),i})(),qv=(()=>{let i=class Xr{fComponentsStore;fDraggableDataContext;constructor(e,t){this.fComponentsStore=e,this.fDraggableDataContext=t}handle(e){return this.fComponentsStore.fFlow.hostElement.contains(e.event.targetElement)&&!this.fDraggableDataContext.draggableItems.length}static \u0275fac=function(t){return new(t||Xr)(c(g),c(S))};static \u0275prov=l({token:Xr,factory:Xr.\u0275fac})};return i=f([ae(sn)],i),i})(),Jv=[Kv,qv],eC=(()=>{class i extends lo{constructor(e){super(e)}static \u0275fac=function(t){zl()};static \u0275dir=O({type:i,features:[ee]})}return i})(),an=class{event;constructor(n){this.event=n}},$c=class{rect;data;constructor(n,e){this.rect=n,this.data=e}},tC=(()=>{let i=class Qr{fComponentsStore;fDraggableDataContext;fMediator;fBrowser;get flowHost(){return this.fComponentsStore.fFlow.hostElement}get fCreateNode(){return this.fComponentsStore.fDraggable.fCreateNode}get dragHandler(){return this.fDraggableDataContext.draggableItems[0]}constructor(e,t,o,r){this.fComponentsStore=e,this.fDraggableDataContext=t,this.fMediator=o,this.fBrowser=r}handle(e){this.emitEvent(this.getExternalItemElementsFromPoint(e.event.getPosition())),this.dragHandler.onPointerUp()}getExternalItemElementsFromPoint(e){return this.fBrowser.document.elementsFromPoint(e.x,e.y).filter(t=>!t.closest(".f-external-item"))}emitEvent(e){this.isPointerInCanvasRect(e)&&this.fCreateNode.emit(new $c(this.getRectInCanvas(),this.dragHandler.externalItem.fData))}isPointerInCanvasRect(e){return e.length?this.flowHost.contains(e[0]):!1}getRectInCanvas(){return this.fMediator.send(new ve(this.dragHandler.placeholder,!1))}static \u0275fac=function(t){return new(t||Qr)(c(g),c(S),c(D),c(ce))};static \u0275prov=l({token:Qr,factory:Qr.\u0275fac})};return i=f([m(an)],i),i})(),Ga=class{externalItem;fBrowser;placeholder;onPointerDownRect=E.initialize();difference=b.initialize();constructor(n,e){this.externalItem=n,this.fBrowser=e}getStyle(n){return`position: absolute; left: 0; top: 0; transform: translate(${n.x}px, ${n.y}px)`}prepareDragSequence(){this.onPointerDownRect=this.getExternalItemRect(),this.placeholder=ff(this.externalItem.hostElement),this.placeholder.setAttribute("style",this.getStyle(A.fromPoint(this.onPointerDownRect))),this.fBrowser.document.body.appendChild(this.placeholder)}getExternalItemRect(){let n=this.externalItem.hostElement.getBoundingClientRect(),e=this.fBrowser.window.pageYOffset||this.fBrowser.document.documentElement.scrollTop,t=this.fBrowser.window.pageXOffset||this.fBrowser.document.documentElement.scrollLeft,o=n.top+e,r=n.left+t;return E.initialize(r,o,n.width,n.height)}onPointerMove(n){this.difference=n;let e=A.fromPoint(this.onPointerDownRect).add(this.difference);this.placeholder.setAttribute("style",this.getStyle(e))}onPointerUp(){this.fBrowser.document.body.removeChild(this.placeholder)}},iC=(()=>{let i=class Zr{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){return this.fDraggableDataContext.draggableItems.some(t=>t instanceof Ga)}static \u0275fac=function(t){return new(t||Zr)(c(S))};static \u0275prov=l({token:Zr,factory:Zr.\u0275fac})};return i=f([ae(an)],i),i})(),nC=[tC,iC],ln=class{event;constructor(n){this.event=n}},oC=(()=>{let i=class Kr{fComponentsStore;fDraggableDataContext;fExternalItemService;fBrowser;get flowHost(){return this.fComponentsStore.fFlow.hostElement}constructor(e,t,o,r){this.fComponentsStore=e,this.fDraggableDataContext=t,this.fExternalItemService=o,this.fBrowser=r}handle(e){this.fDraggableDataContext.onPointerDownScale=1,this.fDraggableDataContext.onPointerDownPosition=A.fromPoint(e.event.getPosition()).elementTransform(this.flowHost),this.fDraggableDataContext.draggableItems=[new Ga(this.getExternalItem(e.event.targetElement),this.fBrowser)]}getExternalItem(e){return this.fExternalItemService.getItem(au(e))}static \u0275fac=function(t){return new(t||Kr)(c(g),c(S),c(hd),c(ce))};static \u0275prov=l({token:Kr,factory:Kr.\u0275fac})};return i=f([m(ln)],i),i})(),rC=(()=>{let i=class qr{fExternalItemService;constructor(e){this.fExternalItemService=e}handle(e){let t=this.getExternalItem(e.event.targetElement);return su(e.event.targetElement)&&!!t&&!t.fDisabled}getExternalItem(e){return this.fExternalItemService.getItem(au(e))}static \u0275fac=function(t){return new(t||qr)(c(hd))};static \u0275prov=l({token:qr,factory:qr.\u0275fac})};return i=f([ae(ln)],i),i})(),sC=[oC,rC],Wa=class{event;constructor(n){this.event=n}};function su(i){return!!i.closest("[fExternalItem]")}function au(i){return i.closest("[fExternalItem]")}var aC=(()=>{let i=class Jr{handle(e){this._isTargetItemExternal(e.event)&&e.event.preventDefault()}_isTargetItemExternal(e){let t=this._isExternalItem(e.target),o=this._isExternalItem(e.target.parentNode);return t||o}_isExternalItem(e){let t=!1;try{t=su(e)}catch{}return t}static \u0275fac=function(t){return new(t||Jr)};static \u0275prov=l({token:Jr,factory:Jr.\u0275fac})};return i=f([m(Wa)],i),i})(),lC=[...nC,...sC,aC],cC=new P("F_EXTERNAL_ITEM"),dC=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275dir=O({type:i})}return i})(),hd=(()=>{class i{items=[];registerItem(e){this.items.push(e)}getItem(e){return this.items.find(t=>t.hostElement===e)}removeItem(e){let t=this.items.indexOf(e);t!==-1&&this.items.splice(t,1)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),fC=0,lu=(()=>{class i extends dC{elementReference;fExternalItemService;fExternalItemId=`f-external-item-${fC++}`;get hostElement(){return this.elementReference.nativeElement}fData;fDisabled=!1;constructor(e,t){super(),this.elementReference=e,this.fExternalItemService=t}ngOnInit(){this.fExternalItemService.registerItem(this),this.disablePointerEvents(Array.from(this.hostElement.children))}disablePointerEvents(e){e.forEach(t=>{t.style.pointerEvents="none",this.disablePointerEvents(Array.from(t.children))})}ngOnDestroy(){this.fExternalItemService.removeItem(this)}static \u0275fac=function(t){return new(t||i)(u(F),u(hd))};static \u0275dir=O({type:i,selectors:[["","fExternalItem",""]],hostAttrs:[1,"f-component","f-external-item"],hostVars:3,hostBindings:function(t,o){t&2&&(te("id",o.fExternalItemId),re("f-external-item-disabled",o.fDisabled))},inputs:{fExternalItemId:"fExternalItemId",fData:"fData",fDisabled:"fDisabled"},features:[X([{provide:cC,useExisting:i}]),ee]})}return i})();var cu=new P("F_DRAG_AND_DROP_PLUGIN"),du=(()=>{class i extends eC{_fBrowser;_elementReference=h(F);_fMediator=h(D);disabled=!1;get hostElement(){return this._elementReference.nativeElement}fSelectionChange=new H;fNodeIntersectedWithConnections=new H;fCreateNode=new H;fReassignConnection=new H;fCreateConnection=new H;fDropToGroup=new H;vCellSize=1;hCellSize=1;plugins;constructor(e,t){super(e),this._fBrowser=t}ngOnInit(){this._fMediator.send(new Ea(this))}ngAfterViewInit(){super.subscribe(this._fBrowser.document)}onPointerDown(e){this._fMediator.send(new il),this.plugins.forEach(o=>o.onPointerDown?.(e)),this._fMediator.send(new sn(e)),this._fMediator.send(new Zi(e)),this._fMediator.send(new Xi(e));let t=e.isMouseLeftButton();return t||this.finalizeDragSequence(),t}prepareDragSequence(e){this.plugins.forEach(t=>t.prepareDragSequence?.(e)),this._fMediator.send(new rn(e)),this._fMediator.send(new tn(e)),this._fMediator.send(new en(e)),this._fMediator.send(new Wi(e)),this._fMediator.send(new ln(e)),this._fMediator.send(new nl)}onSelect(e){this.plugins.forEach(t=>t.onSelect?.(e)),this._fMediator.send(new Wa(e))}onPointerMove(e){this._fMediator.send(new tl(e))}onPointerUp(e){this.plugins.forEach(t=>t.onPointerUp?.(e)),this._fMediator.send(new Qi(e)),this._fMediator.send(new Ui(e)),this._fMediator.send(new on(e)),this._fMediator.send(new nn(e)),this._fMediator.send(new Ji(e)),this._fMediator.send(new Gi(e)),this._fMediator.send(new an(e)),this._fMediator.send(new el)}finalizeDragSequence(){this._fMediator.send(new Hi)}ngOnDestroy(){this._fMediator.send(new rl),super.unsubscribe()}static \u0275fac=function(t){return new(t||i)(u(J,8),u(ce))};static \u0275dir=O({type:i,selectors:[["f-flow","fDraggable",""]],contentQueries:function(t,o,r){if(t&1&&_e(r,cu,5),t&2){let s;I(s=M())&&(o.plugins=s)}},inputs:{disabled:[C.None,"fDraggableDisabled","disabled"],vCellSize:"vCellSize",hCellSize:"hCellSize"},outputs:{fSelectionChange:"fSelectionChange",fNodeIntersectedWithConnections:"fNodeIntersectedWithConnections",fCreateNode:"fCreateNode",fReassignConnection:"fReassignConnection",fCreateConnection:"fCreateConnection",fDropToGroup:"fDropToGroup"},exportAs:["fDraggable"],features:[ee]})}return i})(),Yc=class{nodes;groups;connections;constructor(n,e,t){this.nodes=n,this.groups=e,this.connections=t}},Ua=class{event;minimap;constructor(n,e){this.event=n,this.minimap=e}},cn=class{flowRect;canvasPosition;eventPoint;minimap;constructor(n,e,t,o){this.flowRect=n,this.canvasPosition=e,this.eventPoint=t,this.minimap=o}},hC=(()=>{let i=class es{fComponentsStore;get canvasScale(){return this.fComponentsStore.fCanvas.transform.scale}constructor(e){this.fComponentsStore=e}handle(e){return b.sub(e.canvasPosition,b.sub(this.getPositionInViewBox(e.eventPoint,e.minimap),this.getNormalizedFlowCenter(e.flowRect)))}getNormalizedFlowCenter(e){return A.fromPoint(e.gravityCenter).sub(e)}getPositionInViewBox(e,t){let o=this.normalizeEventPoint(e,t);return b.sum(o,E.mult(t.viewBox,this.canvasScale))}normalizeEventPoint(e,t){return this.getEventPointInMinimap(e,t).mult(t.scale).mult(this.canvasScale)}getEventPointInMinimap(e,t){return A.fromPoint(e).elementTransform(t.element)}static \u0275fac=function(t){return new(t||es)(c(g))};static \u0275prov=l({token:es,factory:es.\u0275fac})};return i=f([m(cn)],i),i})(),$a=class{fComponentsStore;fMediator;flowRect;canvasPosition;eventPoint;minimap;lastDifference=null;constructor(n,e,t,o,r,s){this.fComponentsStore=n,this.fMediator=e,this.flowRect=t,this.canvasPosition=o,this.eventPoint=r,this.minimap=s}prepareDragSequence(){this.fComponentsStore.fCanvas?.hostElement.classList.add("f-scaled-animate")}onPointerMove(n){this.lastDifference&&this.isSamePoint(n,this.lastDifference)||(this.lastDifference=n,this.fComponentsStore.fCanvas.setPosition(this.getNewPosition(A.fromPoint(this.eventPoint).add(n))),this.fComponentsStore.fCanvas.redraw())}isSamePoint(n,e){return n.x===e.x&&n.y===e.y}getNewPosition(n){return this.fMediator.send(new cn(this.flowRect,this.canvasPosition,n,this.minimap))}onPointerUp(){this.fComponentsStore.fCanvas?.hostElement.classList.remove("f-scaled-animate"),this.fComponentsStore.fCanvas.emitCanvasChangeEvent()}},uC=(()=>{let i=class ts{fComponentsStore;fMediator;fDraggableDataContext;get flowHost(){return this.fComponentsStore.fFlow.hostElement}constructor(e,t,o){this.fComponentsStore=e,this.fMediator=t,this.fDraggableDataContext=o}handle(e){let t=e.event.getPosition(),o=A.fromPoint(this.fComponentsStore.fCanvas.transform.position);this.fComponentsStore.fCanvas.setPosition(this.getNewPosition(t,e.minimap)),this.fComponentsStore.fCanvas.redraw(),this.fComponentsStore.fCanvas.emitCanvasChangeEvent(),this.fDraggableDataContext.onPointerDownScale=1,this.fDraggableDataContext.onPointerDownPosition=A.fromPoint(t).elementTransform(this.flowHost),this.fDraggableDataContext.draggableItems=[new $a(this.fComponentsStore,this.fMediator,this.getFlowRect(),o,t,e.minimap)]}getNewPosition(e,t){return this.fMediator.send(new cn(this.getFlowRect(),A.fromPoint(this.fComponentsStore.fCanvas.transform.position),e,t))}getFlowRect(){return E.fromElement(this.flowHost)}static \u0275fac=function(t){return new(t||ts)(c(g),c(D),c(S))};static \u0275prov=l({token:ts,factory:ts.\u0275fac})};return i=f([m(Ua)],i),i})(),mC=(()=>{let i=class is{fComponentsStore;fDraggableDataContext;constructor(e,t){this.fComponentsStore=e,this.fDraggableDataContext=t}handle(e){return!this.fDraggableDataContext.draggableItems.length&&!!e.event.targetElement.closest(".f-minimap")&&this.fComponentsStore.flowHost.contains(e.event.targetElement)}static \u0275fac=function(t){return new(t||is)(c(g),c(S))};static \u0275prov=l({token:is,factory:is.\u0275fac})};return i=f([ae(Ua)],i),i})(),pC=[uC,mC],Ya=class{event;constructor(n){this.event=n}},gC=(()=>{let i=class ns{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){this.fDraggableDataContext.draggableItems.forEach(t=>{t.onPointerUp?.()})}static \u0275fac=function(t){return new(t||ns)(c(S))};static \u0275prov=l({token:ns,factory:ns.\u0275fac})};return i=f([m(Ya)],i),i})(),_C=(()=>{let i=class os{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){return this.fDraggableDataContext.draggableItems.some(t=>t instanceof $a)}static \u0275fac=function(t){return new(t||os)(c(S))};static \u0275prov=l({token:os,factory:os.\u0275fac})};return i=f([ae(Ya)],i),i})(),vC=[gC,_C],Xc=class{},CC=(()=>{let i=class rs{_fBrowser=h(ce);_fComponentStore=h(g);get _fFlow(){return this._fComponentStore.fFlow}get _fNodes(){return this._fComponentStore.fNodes}get _fCanvas(){return this._fComponentStore.fCanvas}handle(e){return this._createMinimapNodeElements(e)}_createMinimapNodeElements(e){return this._fNodes.map(t=>{let o=this._createNodeElement();return Rh(this._getNodeRect(t),o),this._applyClassList(o,t,t instanceof _l),o})}_createNodeElement(){return xn("rect",this._fBrowser)}_getNodeRect(e){return E.div(this._getNodeRectInFlow(e),this._fCanvas.transform.scale)}_getNodeRectInFlow(e){return E.elementTransform(E.fromElement(e.hostElement),this._fFlow.hostElement)}_applyClassList(e,t,o){e.classList.add("f-component",o?"f-minimap-node":"f-minimap-group"),t.isSelected()&&e.classList.add("f-selected")}static \u0275fac=function(t){return new(t||rs)};static \u0275prov=l({token:rs,factory:rs.\u0275fac})};return i=f([m(Xc)],i),i})(),Qc=class{},yC=(()=>{let i=class ss{_fComponentStore=h(g);get _fFlow(){return this._fComponentStore.fFlow}get _fCanvas(){return this._fComponentStore.fCanvas}handle(e){return!this._fFlow||!this._fCanvas?E.initialize():this._getRectForMinimapView()}_getRectForMinimapView(){let e=this._calculateViewBox();return e.x=0,e.y=0,e}_calculateViewBox(){return E.div(E.fromElement(this._fFlow.hostElement),this._fCanvas.transform.scale)}static \u0275fac=function(t){return new(t||ss)};static \u0275prov=l({token:ss,factory:ss.\u0275fac})};return i=f([m(Qc)],i),i})(),Zc=class{element;minSize;constructor(n,e){this.element=n,this.minSize=e}},xC=(()=>{let i=class as{_fMediator=h(D);_fComponentStore=h(g);get _fFlow(){return this._fComponentStore.fFlow}get _fCanvas(){return this._fComponentStore.fCanvas}handle(e){if(!this._fFlow)return{scale:1,viewBox:E.initialize(0,0,0,0)};let t=this._getScaledNodesBoundingBox(e.minSize),o=this._getMinimapRect(e.element),r=this._calculateViewScale(t,o);return{scale:r,viewBox:this._calculateViewBox(t,o,r)}}_getScaledNodesBoundingBox(e){let t=this._calculateNodesBoundingBox(),o=this._convertFromGlobalToFlowRect(t),r=this._convertRectToMinimapScale(o);return Oh(r,e)}_calculateNodesBoundingBox(){return this._fMediator.send(new ni)||E.initialize(0,0,0,0)}_convertFromGlobalToFlowRect(e){return E.elementTransform(e,this._fFlow.hostElement)}_convertRectToMinimapScale(e){return E.div(e,this._fCanvas.transform.scale)}_getMinimapRect(e){return E.elementTransform(E.fromElement(e),this._fFlow.hostElement)}_calculateViewScale(e,t){return Math.max(e.width/t.width,e.height/t.height)}_calculateViewBox(e,t,o){return this._calculateCenteredViewBox(e,this._calculateViewSize(t,o))}_calculateViewSize(e,t){return It.initialize(e.width*t||0,e.height*t||0)}_calculateCenteredViewBox(e,t){let o=e.x-(t.width-e.width)/2,r=e.y-(t.height-e.height)/2;return E.initialize(o,r,t.width,t.height)}static \u0275fac=function(t){return new(t||as)};static \u0275prov=l({token:as,factory:as.\u0275fac})};return i=f([m(Zc)],i),i})(),bC=[hC,...vC,...pC,CC,xC,yC],dn=class{event;constructor(n){this.event=n}},wC=(()=>{let i=class ls{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){this.fDraggableDataContext.draggableItems.forEach(t=>{t.onPointerUp?.()})}static \u0275fac=function(t){return new(t||ls)(c(S))};static \u0275prov=l({token:ls,factory:ls.\u0275fac})};return i=f([m(dn)],i),i})(),Xa=class{fComponentsStore;fSelectionArea;fDraggableDataContext;fMediator;_canBeSelected=[];_selectedByMove=[];get canvasPosition(){return A.fromPoint(this.fComponentsStore.fCanvas.transform.position).add(this.fComponentsStore.fCanvas.transform.scaledPosition)}constructor(n,e,t,o){this.fComponentsStore=n,this.fSelectionArea=e,this.fDraggableDataContext=t,this.fMediator=o}prepareDragSequence(){this._canBeSelected=this.fMediator.send(new Za),this.fSelectionArea.show(),this.fSelectionArea.draw(E.initialize(this.fDraggableDataContext.onPointerDownPosition.x,this.fDraggableDataContext.onPointerDownPosition.y))}onPointerMove(n){let e=A.fromPoint(n).add(this.fDraggableDataContext.onPointerDownPosition),t=Math.min(this.fDraggableDataContext.onPointerDownPosition.x,e.x),o=Math.min(this.fDraggableDataContext.onPointerDownPosition.y,e.y),r=Math.abs(n.x),s=Math.abs(n.y);this.fSelectionArea.draw(E.initialize(t,o,r,s)),this._selectedByMove=[],this._canBeSelected.forEach(a=>{a.element.deselect();let d=E.addPoint(a.rect,this.canvasPosition);E.intersectionWithRect(d,E.initialize(t,o,r,s))&&(a.element.select(),this._selectedByMove.push(a.element))}),this.fMediator.send(new mt)}onPointerUp(){this.fSelectionArea.hide(),this.fDraggableDataContext.selectedItems.push(...this._selectedByMove),this._selectedByMove.length>0&&(this.fDraggableDataContext.isSelectedChanged=!0)}},DC=(()=>{let i=class cs{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){return this.fDraggableDataContext.draggableItems.some(t=>t instanceof Xa)}static \u0275fac=function(t){return new(t||cs)(c(S))};static \u0275prov=l({token:cs,factory:cs.\u0275fac})};return i=f([ae(dn)],i),i})(),EC=[wC,DC],fn=class{event;fSelectionArea;constructor(n,e){this.event=n,this.fSelectionArea=e}},SC=(()=>{let i=class ds{fComponentsStore;fDraggableDataContext;fMediator;get flowHost(){return this.fComponentsStore.fFlow.hostElement}constructor(e,t,o){this.fComponentsStore=e,this.fDraggableDataContext=t,this.fMediator=o}handle(e){this.fDraggableDataContext.draggableItems=[new Xa(this.fComponentsStore,e.fSelectionArea,this.fDraggableDataContext,this.fMediator)],this.fDraggableDataContext.onPointerDownScale=1,this.fDraggableDataContext.onPointerDownPosition=A.fromPoint(e.event.getPosition()).elementTransform(this.flowHost)}static \u0275fac=function(t){return new(t||ds)(c(g),c(S),c(D))};static \u0275prov=l({token:ds,factory:ds.\u0275fac})};return i=f([m(fn)],i),i})(),IC=(()=>{let i=class fs{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){return this.isDragHandlesEmpty()&&this.isShiftPressed(e.event.originalEvent)}isDragHandlesEmpty(){return!this.fDraggableDataContext.draggableItems.length}isShiftPressed(e){return e.shiftKey}static \u0275fac=function(t){return new(t||fs)(c(S))};static \u0275prov=l({token:fs,factory:fs.\u0275fac})};return i=f([ae(fn)],i),i})(),MC=[SC,IC],FC=[...EC,...MC],OC=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275dir=O({type:i})}return i})(),fu=(()=>{class i extends OC{_fMediator=h(D);_elementReference=h(F);get hostElement(){return this._elementReference.nativeElement}ngOnInit(){this.hostElement.style.display="none"}hide(){this.hostElement.style.display="none"}show(){this.hostElement.style.display="block"}draw(e){let t=this.hostElement.style;t.left=e.x+"px",t.top=e.y+"px",t.width=e.width+"px",t.height=e.height+"px"}onPointerDown(e){this._fMediator.send(new fn(e,this))}onPointerUp(e){this._fMediator.send(new dn(e))}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ze(i)))(o||i)}})();static \u0275cmp=T({type:i,selectors:[["f-selection-area"]],hostAttrs:[1,"f-selection-area","f-component"],features:[X([{provide:cu,useExisting:i}]),ee],decls:0,vars:0,template:function(t,o){},styles:["[_nghost-%COMP%]{position:absolute}"]})}return i})();var PC=[...$_,...fv,..._v,...Jv,...lC,...Vv,...Zv,...FC,...bC],Qa=class{},RC=(()=>{let i=class hs{fDraggableDataContext;constructor(e){this.fDraggableDataContext=e}handle(e){this.fDraggableDataContext.selectedItems.forEach(t=>t.deselect()),this.fDraggableDataContext.selectedItems=[],this.fDraggableDataContext.isSelectedChanged=!0}static \u0275fac=function(t){return new(t||hs)(c(S))};static \u0275prov=l({token:hs,factory:hs.\u0275fac})};return i=f([m(Qa)],i),i})(),Za=class{},TC=(()=>{let i=class us{fDraggableDataContext;_fMediator=h(D);_fComponentsStore=h(g);get fNodes(){return this._fComponentsStore.fNodes}get fConnections(){return this._fComponentsStore.fConnections}get transform(){return this._fComponentsStore.fCanvas.transform}constructor(e){this.fDraggableDataContext=e}handle(){return[...this.getNodesWithRects(),...this.getConnectionsWithRects()].filter(e=>!this.fDraggableDataContext.selectedItems.includes(e.element))}getNodesWithRects(){return this.fNodes.filter(e=>!e.fSelectionDisabled).map(e=>({element:e,rect:E.mult(this._fMediator.send(new ve(e.hostElement,!1)),this.transform.scale)}))}getConnectionsWithRects(){return this.fConnections.filter(e=>!e.fSelectionDisabled).map(e=>({element:e,rect:E.mult(this._fMediator.send(new ve(e.boundingElement,!1)),this.transform.scale)}))}static \u0275fac=function(t){return new(t||us)(c(S))};static \u0275prov=l({token:us,factory:us.\u0275fac})};return i=f([m(Za)],i),i})(),hn=class{},NC=(()=>{let i=class ms{_fDraggableDataContext=h(S);handle(){return{nodes:this._getSelectedNodes(),groups:this._getSelectedGroups(),connections:this._getSelectedConnections()}}_getSelectedNodes(){return this._fDraggableDataContext.selectedItems.filter(e=>e.hostElement.classList.contains("f-node")).map(e=>e.hostElement.dataset.fNodeId)}_getSelectedGroups(){return this._fDraggableDataContext.selectedItems.filter(e=>e.hostElement.classList.contains("f-group")).map(e=>e.hostElement.dataset.fGroupId)}_getSelectedConnections(){return this._fDraggableDataContext.selectedItems.filter(e=>!e.hostElement.classList.contains("f-node")&&!e.hostElement.classList.contains("f-group")).map(e=>e.hostElement.id)}static \u0275fac=function(t){return new(t||ms)};static \u0275prov=l({token:ms,factory:ms.\u0275fac})};return i=f([m(hn)],i),i})(),Ka=class{nodes;connections;constructor(n,e){this.nodes=n,this.connections=e}},AC=(()=>{let i=class ps{fDataContext;fDraggableDataContext;constructor(e,t){this.fDataContext=e,this.fDraggableDataContext=t}handle(e){this.fDraggableDataContext.selectedItems.forEach(t=>{t.deselect()}),this.fDraggableDataContext.selectedItems=[],e.nodes.forEach(t=>{let o=this.fDataContext.fNodes.find(r=>r.fId===t);o&&(o.select(),this.fDraggableDataContext.selectedItems.push(o))}),e.connections.forEach(t=>{let o=this.fDataContext.fConnections.find(r=>r.fId===t);o&&(o.select(),this.fDraggableDataContext.selectedItems.push(o))}),this.fDraggableDataContext.isSelectedChanged=!0}static \u0275fac=function(t){return new(t||ps)(c(g),c(S))};static \u0275prov=l({token:ps,factory:ps.\u0275fac})};return i=f([m(Ka)],i),i})(),qa=class{},kC=(()=>{let i=class gs{fDataContext;fDraggableDataContext;constructor(e,t){this.fDataContext=e,this.fDraggableDataContext=t}handle(e){this.fDraggableDataContext.selectedItems.forEach(t=>{t.deselect()}),this.fDraggableDataContext.selectedItems=[],this.fDataContext.fNodes.forEach(t=>{t.select(),this.fDraggableDataContext.selectedItems.push(t)}),this.fDataContext.fConnections.forEach(t=>{t.select(),this.fDraggableDataContext.selectedItems.push(t)}),this.fDraggableDataContext.isSelectedChanged=!0}static \u0275fac=function(t){return new(t||gs)(c(g),c(S))};static \u0275prov=l({token:gs,factory:gs.\u0275fac})};return i=f([m(qa)],i),i})(),un=class{fNode;constructor(n){this.fNode=n}},Ja=class{fItemsContainer;allElements;elementsThatShouldBeInFront;targetIndex;constructor(n,e,t,o){this.fItemsContainer=n,this.allElements=e,this.elementsThatShouldBeInFront=t,this.targetIndex=o}},VC=(()=>{let i=class _s{handle(e){let t=[];for(let o=e.targetIndex+1;o<e.allElements.length;o++){let r=e.allElements[o];e.elementsThatShouldBeInFront.includes(r)||t.push(r)}t.forEach(o=>{e.fItemsContainer.removeChild(o),e.fItemsContainer.insertBefore(o,e.allElements[e.targetIndex])})}static \u0275fac=function(t){return new(t||_s)};static \u0275prov=l({token:_s,factory:_s.\u0275fac})};return i=f([m(Ja)],i),i})(),ii=class{item;itemContainer;constructor(n,e){this.item=n,this.itemContainer=e}},gt=class{fId;constructor(n){this.fId=n}},LC=(()=>{let i=class vs{fComponentsStore;constructor(e){this.fComponentsStore=e}handle(e){return this.getChildrenNodes(e.fId)}getChildrenNodes(e,t=new Set){if(t.has(e))throw new Error("Circular reference detected in the node hierarchy. Node id: "+e);t.add(e);let o=this.fComponentsStore.fNodes.filter(r=>r.fParentId===e);return o.forEach(r=>{o.push(...this.getChildrenNodes(r.fId,t))}),o}static \u0275fac=function(t){return new(t||vs)(c(g))};static \u0275prov=l({token:vs,factory:vs.\u0275fac})};return i=f([m(gt)],i),i})(),BC=(()=>{let i=class Cs{fComponentsStore;fMediator;get fGroupsContainer(){return this.fComponentsStore.fCanvas.fGroupsContainer.nativeElement}get fNodesContainer(){return this.fComponentsStore.fCanvas.fNodesContainer.nativeElement}get fConnectionsContainer(){return this.fComponentsStore.fCanvas.fConnectionsContainer.nativeElement}constructor(e,t){this.fComponentsStore=e,this.fMediator=t}handle(e){switch(e.itemContainer){case this.fGroupsContainer:this.handleGroup(e);break;case this.fNodesContainer:this.handleNode(e);break;case this.fConnectionsContainer:this.handleConnection(e);break;default:throw new Error("Unknown container")}}handleGroup(e){let t=this.getChildrenNodesAndGroups(e.item.fId),o=this.getChildrenGroups(t);this.updateLayers(this.fGroupsContainer,e.item.hostElement,o);let r=this.getChildrenNodes(t);r.length&&this.updateLayers(this.fNodesContainer,r[0],r)}handleNode(e){let t=this.getChildrenNodesAndGroups(e.item.fId),o=this.getChildrenNodes(t);this.updateLayers(e.itemContainer,e.item.hostElement,o)}handleConnection(e){this.updateLayers(e.itemContainer,e.item.hostElement,[])}updateLayers(e,t,o){let r=Array.from(e.children),s=r.findIndex(a=>a===t);this.isAnythingNeedToBeMoved(r,s,o)&&this.fMediator.send(new Ja(e,r,o,s))}isAnythingNeedToBeMoved(e,t,o){for(let r=t+1;r<e.length;r++)if(!o.includes(e[r]))return!0;return!1}getChildrenGroups(e){let t=Array.from(this.fGroupsContainer.children);return e.filter(o=>this.fGroupsContainer.contains(o)).sort((o,r)=>t.indexOf(o)-t.indexOf(r))}getChildrenNodes(e){let t=Array.from(this.fNodesContainer.children);return e.filter(o=>this.fNodesContainer.contains(o)).sort((o,r)=>t.indexOf(o)-t.indexOf(r))}getChildrenNodesAndGroups(e){return this.fMediator.send(new gt(e)).map(t=>t.hostElement)}static \u0275fac=function(t){return new(t||Cs)(c(g),c(D))};static \u0275prov=l({token:Cs,factory:Cs.\u0275fac})};return i=f([m(ii)],i),i})(),jC=(()=>{let i=class ys{fDraggableDataContext;fMediator;constructor(e,t){this.fDraggableDataContext=e,this.fMediator=t}handle(e){this.selectNodeIfNotSelected(e.fNode),this.fMediator.send(new ii(e.fNode,e.fNode.hostElement.parentElement))}selectNodeIfNotSelected(e){!this.fDraggableDataContext.selectedItems.includes(e)&&!e.fSelectionDisabled&&(this.fDraggableDataContext.selectedItems.push(e),e.select(),this.fDraggableDataContext.isSelectedChanged=!0)}static \u0275fac=function(t){return new(t||ys)(c(S),c(D))};static \u0275prov=l({token:ys,factory:ys.\u0275fac})};return i=f([m(un)],i),i})(),zC=[RC,TC,NC,AC,kC,jC],HC=(()=>{let i=class xs{_fMediator=h(D);_fComponentsStore=h(g);get _fSelectionChange(){return this._fComponentsStore.fDraggable.fSelectionChange}_fDraggableDataContext=h(S);handle(e){this._fDraggableDataContext.isSelectedChanged&&(this._emitSelectionChange(this._getSelection()),this._fDraggableDataContext.isSelectedChanged=!1,this._fMediator.send(new mt))}_getSelection(){return this._fMediator.send(new hn)}_emitSelectionChange(e){this._fSelectionChange.emit(new Yc(e.nodes,e.groups,e.connections))}static \u0275fac=function(t){return new(t||xs)};static \u0275prov=l({token:xs,factory:xs.\u0275fac})};return i=f([m(Hi)],i),i})(),el=class{},GC=(()=>{let i=class bs{_fComponentsStore=h(g);get _hostElement(){return this._fComponentsStore.fDraggable.hostElement}_fDraggableDataContext=h(S);handle(e){this._hostElement.classList.remove("f-dragging"),this._fDraggableDataContext.reset()}static \u0275fac=function(t){return new(t||bs)};static \u0275prov=l({token:bs,factory:bs.\u0275fac})};return i=f([m(el)],i),i})(),tl=class{event;constructor(n){this.event=n}},WC=(()=>{let i=class ws{_fComponentsStore=h(g);get _hostElement(){return this._fComponentsStore.fDraggable.hostElement}_fDraggableDataContext=h(S);handle(e){this._setDifferenceToDraggableItems(this._getDifferenceBetweenPointerAndPointerDown(e.event))}_setDifferenceToDraggableItems(e){this._fDraggableDataContext.draggableItems.forEach(t=>{t.onPointerMove(z({},e))})}_getDifferenceBetweenPointerAndPointerDown(e){return this._getPointerPositionInCanvas(e).div(this._fDraggableDataContext.onPointerDownScale).sub(this._fDraggableDataContext.onPointerDownPosition)}_getPointerPositionInCanvas(e){return A.fromPoint(e.getPosition()).elementTransform(this._hostElement)}static \u0275fac=function(t){return new(t||ws)};static \u0275prov=l({token:ws,factory:ws.\u0275fac})};return i=f([m(tl)],i),i})(),il=class{},UC=(()=>{let i=class Ds{_fDraggableDataContext=h(S);handle(e){this._fDraggableDataContext.reset()}static \u0275fac=function(t){return new(t||Ds)};static \u0275prov=l({token:Ds,factory:Ds.\u0275fac})};return i=f([m(il)],i),i})(),nl=class{},ol=class{},$C=(()=>{let i=class Es{_fMediator=h(D);_fComponentsStore=h(g);get _hostElement(){return this._fComponentsStore.fDraggable.hostElement}_fDraggableDataContext=h(S);handle(e){this._fDraggableDataContext.draggableItems.length>0&&(this._hostElement.classList.add("f-dragging"),this._fMediator.send(new Hi))}static \u0275fac=function(t){return new(t||Es)};static \u0275prov=l({token:Es,factory:Es.\u0275fac})};return i=f([m(ol)],i),i})(),YC=(()=>{let i=class Ss{_fMediator=h(D);_fDraggableDataContext=h(S);handle(e){this._callPrepareDragSequence(),this._fMediator.send(new ol)}_callPrepareDragSequence(){this._fDraggableDataContext.draggableItems.forEach(e=>{e.prepareDragSequence?.()})}static \u0275fac=function(t){return new(t||Ss)};static \u0275prov=l({token:Ss,factory:Ss.\u0275fac})};return i=f([m(nl)],i),i})(),rl=class{},XC=(()=>{let i=class Is{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fDraggable=void 0}static \u0275fac=function(t){return new(t||Is)};static \u0275prov=l({token:Is,factory:Is.\u0275fac})};return i=f([m(rl)],i),i})(),QC=[B_,HC,GC,WC,UC,YC,vv,$C,XC],sl=class{fComponent;constructor(n){this.fComponent=n}},ZC=(()=>{let i=class Ms{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fFlow=e.fComponent}static \u0275fac=function(t){return new(t||Ms)};static \u0275prov=l({token:Ms,factory:Ms.\u0275fac})};return i=f([m(sl)],i),i})(),Kc=class{},KC=(()=>{let i=class Fs{_fComponentsStore=h(g);handle(e){let t=this._fComponentsStore.fFlow;if(!t)throw new Error("Flow not found in store");return t}static \u0275fac=function(t){return new(t||Fs)};static \u0275prov=l({token:Fs,factory:Fs.\u0275fac})};return i=f([m(Kc)],i),i})(),mn=class{},qC=(()=>{let i=class Os{_fComponentsStore=h(g);handle(){return this._fComponentsStore.flowHost}static \u0275fac=function(t){return new(t||Os)};static \u0275prov=l({token:Os,factory:Os.\u0275fac})};return i=f([m(mn)],i),i})(),al=class{},JC=(()=>{let i=class Ps{fComponentsStore;constructor(e){this.fComponentsStore=e}handle(e){return this.fComponentsStore.fConnections.map(t=>({id:t.fId,fOutputId:t.fOutputId,fInputId:t.fInputId,fType:t.fType,fBehavior:t.fBehavior,isSelected:t.isSelected()}))}static \u0275fac=function(t){return new(t||Ps)(c(g))};static \u0275prov=l({token:Ps,factory:Ps.\u0275fac})};return i=f([m(al)],i),i})(),pn=class{type;constructor(n){this.type=n}},ey=(()=>{let i=class Rs{fComponentsStore;constructor(e){this.fComponentsStore=e}handle(e){return this.fComponentsStore.fNodes.filter(t=>t instanceof e.type).map(t=>({id:t.fId,parent:t.fParentId,position:t.position,size:t.size,fOutputs:this.getOutputs(t.hostElement),fInputs:this.getInputs(t.hostElement),isSelected:t.isSelected()}))}getOutputs(e){return this.fComponentsStore.fOutputs.filter(t=>e.contains(t.hostElement)).map(t=>({id:t.fId,fConnectableSide:t.fConnectableSide}))}getInputs(e){return this.fComponentsStore.fInputs.filter(t=>e.contains(t.hostElement)).map(t=>({id:t.fId,fConnectableSide:t.fConnectableSide}))}static \u0275fac=function(t){return new(t||Rs)(c(g))};static \u0275prov=l({token:Rs,factory:Rs.\u0275fac})};return i=f([m(pn)],i),i})(),ll=class{},ty=(()=>{let i=class Ts{fComponentsStore;fMediator;constructor(e,t){this.fComponentsStore=e,this.fMediator=t}handle(e){return{position:this.getCanvasPosition(this.fComponentsStore.fCanvas.transform),scale:this.fComponentsStore.fCanvas.transform.scale,nodes:this.fMediator.send(new pn(_l)),groups:this.fMediator.send(new pn(i_)),connections:this.fMediator.send(new al)}}getCanvasPosition(e){return b.sum(e.position,e.scaledPosition)}static \u0275fac=function(t){return new(t||Ts)(c(g),c(D))};static \u0275prov=l({token:Ts,factory:Ts.\u0275fac})};return i=f([m(ll)],i),i})(),iy=[ty,ey,JC],cl=class{},ny=(()=>{let i=class Ns{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fFlow=void 0}static \u0275fac=function(t){return new(t||Ns)};static \u0275prov=l({token:Ns,factory:Ns.\u0275fac})};return i=f([m(cl)],i),i})(),oy=[ZC,KC,qC,...iy,ny],qc=class{fComponent;constructor(n){this.fComponent=n}},ry=(()=>{let i=class As{_fComponentsStore=h(g);handle(e){}static \u0275fac=function(t){return new(t||As)};static \u0275prov=l({token:As,factory:As.\u0275fac})};return i=f([m(qc)],i),i})(),Jc=class{},sy=(()=>{let i=class ks{_fComponentsStore=h(g);handle(e){this._fComponentsStore.fFlow=void 0}static \u0275fac=function(t){return new(t||ks)};static \u0275prov=l({token:ks,factory:ks.\u0275fac})};return i=f([m(Jc)],i),i})(),ay=[ry,sy],gn=class{fComponent;constructor(n){this.fComponent=n}},ly=(()=>{let i=class Vs{_fComponentsStore=h(g);handle(e){this._fComponentsStore.addComponent(this._fComponentsStore.fNodes,e.fComponent)}static \u0275fac=function(t){return new(t||Vs)};static \u0275prov=l({token:Vs,factory:Vs.\u0275fac})};return i=f([m(gn)],i),i})(),ni=class{},cy=(()=>{let i=class Ls{_fComponentsStore=h(g);handle(e){return E.union(this._getNodesRects())}_getNodesRects(){return this._fComponentsStore.fNodes.map(e=>this._getElementRect(e.hostElement))}_getElementRect(e){return E.fromElement(e)}static \u0275fac=function(t){return new(t||Ls)};static \u0275prov=l({token:Ls,factory:Ls.\u0275fac})};return i=f([m(ni)],i),i})(),dl=class{},dy=(()=>{let i=class Bs{_fComponentsStore=h(g);handle(e){return E.union(this._getNodesRects())}_getNodesRects(){return this._fComponentsStore.fNodes.map(e=>this._getElementRect(e,E.fromElement(e.hostElement)))}_getElementRect(e,t){return E.initialize(e.position.x,e.position.y,t.width,t.height)}static \u0275fac=function(t){return new(t||Bs)};static \u0275prov=l({token:Bs,factory:Bs.\u0275fac})};return i=f([m(dl)],i),i})(),_n=class{fNode;rect;constructor(n,e){this.fNode=n,this.rect=e}},fy=(()=>{let i=class js{fBrowser;constructor(e){this.fBrowser=e}handle(e){return e.fNode.fIncludePadding?this.getPaddingData(e.fNode,e.rect):[0,0,0,0]}getPaddingData(e,t){let o=this.fBrowser.window.getComputedStyle(e.hostElement);return[this.fBrowser.toPixels(o.paddingLeft,t.width,t.height,o.fontSize),this.fBrowser.toPixels(o.paddingTop,t.width,t.height,o.fontSize),this.fBrowser.toPixels(o.paddingRight,t.width,t.height,o.fontSize),this.fBrowser.toPixels(o.paddingBottom,t.width,t.height,o.fontSize)]}static \u0275fac=function(t){return new(t||js)(c(ce))};static \u0275prov=l({token:js,factory:js.\u0275fac})};return i=f([m(_n)],i),i})(),ed=class{},hy=(()=>{let i=class zs{_fComponentsStore=h(g);handle(e){return this._fComponentsStore.fNodes}static \u0275fac=function(t){return new(t||zs)};static \u0275prov=l({token:zs,factory:zs.\u0275fac})};return i=f([m(ed)],i),i})(),vn=class{fComponent;destroyRef;constructor(n,e){this.fComponent=n,this.destroyRef=e}},uy=(()=>{let i=class Hs{_fMediator=h(D);handle(e){let{hostElement:t,connectors:o,stateChanges:r}=e.fComponent;new Ft(new Sc(t),r).pipe(pl(),rd(10)).listen(e.destroyRef,()=>{this._calculateConnectorsConnectableSide(o,t),this._fMediator.send(new Mt)})}_calculateConnectorsConnectableSide(e,t){e.forEach(o=>{o.fConnectableSide=new Pc().handle(new Rc(o,t))})}static \u0275fac=function(t){return new(t||Hs)};static \u0275prov=l({token:Hs,factory:Hs.\u0275fac})};return i=f([m(vn)],i),i})(),Cn=class{fComponent;constructor(n){this.fComponent=n}},my=(()=>{let i=class Gs{_fComponentsStore=h(g);handle(e){this._fComponentsStore.removeComponent(this._fComponentsStore.fNodes,e.fComponent)}static \u0275fac=function(t){return new(t||Gs)};static \u0275prov=l({token:Gs,factory:Gs.\u0275fac})};return i=f([m(Cn)],i),i})(),py=[ly,cy,dy,fy,hy,uv,uy,my],fl=class{position;constructor(n){this.position=n}},gy=(()=>{let i=class Ws{_fComponentsStore=h(g);get _transform(){return this._fComponentsStore.fCanvas.transform}handle(e){return A.fromPoint(e.position).elementTransform(this._fComponentsStore.flowHost).sub(this._transform.scaledPosition).sub(this._transform.position).div(this._transform.scale)}static \u0275fac=function(t){return new(t||Ws)};static \u0275prov=l({token:Ws,factory:Ws.\u0275fac})};return i=f([m(fl)],i),i})(),hl=class{},_y=(()=>{let i=class Us{fComponentsStore;fMediator;fBrowser;get fGroupsContainer(){return this.fComponentsStore.fCanvas.fGroupsContainer.nativeElement}get fNodesContainer(){return this.fComponentsStore.fCanvas.fNodesContainer.nativeElement}get fNodesContainerElements(){return Array.from(this.fNodesContainer.children)}constructor(e,t,o){this.fComponentsStore=e,this.fMediator=t,this.fBrowser=o}handle(e){this.getGroups().forEach(t=>{this.moveChildrenNodes(this.getSortedChildrenNodes(t))})}getGroups(){return this.fComponentsStore.fNodes.filter(e=>this.fGroupsContainer.contains(e.hostElement))}getSortedChildrenNodes(e){let t=this.fNodesContainerElements;return this.getChildrenNodes(e.fId).sort((o,r)=>t.indexOf(o)-t.indexOf(r))}getChildrenNodes(e){return this.fMediator.send(new gt(e)).filter(t=>this.fNodesContainer.contains(t.hostElement)).map(t=>t.hostElement)}moveChildrenNodes(e){let t=this.fBrowser.document.createDocumentFragment();e.forEach(o=>{t.appendChild(o)}),this.fNodesContainer.appendChild(t)}static \u0275fac=function(t){return new(t||Us)(c(g),c(D),c(ce))};static \u0275prov=l({token:Us,factory:Us.\u0275fac})};return i=f([m(hl)],i),i})(),yn=class{fItemsContainer;constructor(n){this.fItemsContainer=n}},vy=(()=>{let i=class $s{fComponentsStore;fMediator;fBrowser;fItemsContainer;get fItemsFromContainer(){return Array.from(this.fItemsContainer.children)}constructor(e,t,o){this.fComponentsStore=e,this.fMediator=t,this.fBrowser=o}handle(e){this.fItemsContainer=e.fItemsContainer,this.getItems().forEach(t=>{this.moveChildrenItems(this.getSortedChildrenItems(t),t)})}getItems(){return this.fComponentsStore.fNodes.filter(e=>this.fItemsContainer.contains(e.hostElement))}getSortedChildrenItems(e){let t=this.fItemsFromContainer,o=t.indexOf(e.hostElement);return this.getChildrenGroups(e.fId).filter(r=>t.indexOf(r)<o).sort((r,s)=>t.indexOf(r)-t.indexOf(s))}getChildrenGroups(e){return this.fMediator.send(new gt(e)).filter(t=>this.fItemsContainer.contains(t.hostElement)).map(t=>t.hostElement)}moveChildrenItems(e,t){let o=t.hostElement.nextElementSibling,r=this.fBrowser.document.createDocumentFragment();e.forEach(s=>{r.appendChild(s)}),this.fItemsContainer.insertBefore(r,o)}static \u0275fac=function(t){return new(t||$s)(c(g),c(D),c(ce))};static \u0275prov=l({token:$s,factory:$s.\u0275fac})};return i=f([m(yn)],i),i})(),ul=class{},Cy=(()=>{let i=class Ys{fMediator;fComponentsStore;constructor(e,t){this.fMediator=e,this.fComponentsStore=t}handle(e){this.fComponentsStore.fCanvas&&(this.fMediator.send(new yn(this.fComponentsStore.fCanvas.fGroupsContainer.nativeElement)),this.fMediator.send(new hl),this.fMediator.send(new yn(this.fComponentsStore.fCanvas.fNodesContainer.nativeElement)))}static \u0275fac=function(t){return new(t||Ys)(c(D),c(g))};static \u0275prov=l({token:Ys,factory:Ys.\u0275fac})};return i=f([m(ul)],i),i})();function xn(i,n){return n.document.createElementNS("http://www.w3.org/2000/svg",i)}function yy(){return/android|iPad|iPhone|iPod/i.test(navigator.userAgent||navigator.vendor||window.opera)}var xy=[...jg,...P_,...Mg,...L_,...QC,...oy,...ay,...py,gg,...zC,LC,Yg,gy,Cy,vy,_y,BC,VC];var by=0,hu=(()=>{class i{_fBrowser;_destroyRef=h(li);_elementReference=h(F);_stateChanges=new ht;get hostElement(){return this._elementReference.nativeElement}id=`f-pattern-${by++}`;color="rgba(0,0,0,0.1)";radius=20;_scaledRadius=20;_transform=ft.default();_position=b.initialize();_pattern;_circle;constructor(e){this._fBrowser=e,this._createPattern()}_createPattern(){this._pattern=xn("pattern",this._fBrowser),this._pattern.setAttribute("patternUnits","userSpaceOnUse"),this.hostElement.appendChild(this._pattern),this._circle=xn("circle",this._fBrowser),this._pattern.appendChild(this._circle)}ngOnInit(){this._listenStateChanges()}_listenStateChanges(){new Ft(this._stateChanges).pipe(pl()).listen(this._destroyRef,()=>this._redraw())}ngOnChanges(e){(e.radius||e.color)&&this._refresh()}_redraw(){this._calculatePattern(),this._redrawPattern(),this._redrawElement()}_calculatePattern(){this._position.x=this._transform.position.x+this._transform.scaledPosition.x,this._position.y=this._transform.position.y+this._transform.scaledPosition.y,this._scaledRadius=this.radius*this._transform.scale}_redrawPattern(){this._pattern.setAttribute("x",`${this._position.x}`),this._pattern.setAttribute("y",`${this._position.y}`),this._pattern.setAttribute("width",`${this._scaledRadius}`),this._pattern.setAttribute("height",`${this._scaledRadius}`)}_redrawElement(){this._circle.setAttribute("fill",this.color),this._circle.setAttribute("cx",`${this._scaledRadius/2}`),this._circle.setAttribute("cy",`${this._scaledRadius/2}`),this._circle.setAttribute("r",`${this._scaledRadius/this.radius}`)}setTransform(e){this._transform=e,this._refresh()}_refresh(){this._stateChanges.notify()}static \u0275fac=function(t){return new(t||i)(u(ce))};static \u0275cmp=T({type:i,selectors:[["f-circle-pattern"]],hostVars:1,hostBindings:function(t,o){t&2&&te("id",o.id)},inputs:{id:"id",color:"color",radius:"radius"},features:[X([{provide:Hh,useExisting:i}]),he],decls:0,vars:0,template:function(t,o){},encapsulation:2,changeDetection:0})}return i})(),wy=new P("F_BACKGROUND"),Dy=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275dir=O({type:i})}return i})(),uu=(()=>{class i extends Dy{_elementReference=h(F);get hostElement(){return this._elementReference.nativeElement}fBackgroundPattern;_fMediator=h(D);ngOnInit(){this._fMediator.send(new Qs(this))}ngAfterContentInit(){this._fMediator.send(new qs(this.fBackgroundPattern))}setTransform(e){this.fBackgroundPattern?.setTransform(e)}ngOnDestroy(){this._fMediator.send(new Js(this))}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ze(i)))(o||i)}})();static \u0275cmp=T({type:i,selectors:[["f-background"]],contentQueries:function(t,o,r){if(t&1&&_e(r,Hh,5),t&2){let s;I(s=M())&&(o.fBackgroundPattern=s.first)}},hostAttrs:[1,"f-component","f-background"],features:[X([{provide:wy,useExisting:i}]),ee],ngContentSelectors:lg,decls:2,vars:0,template:function(t,o){t&1&&(be(),Ae(),v(0,"svg"),Y(1),y())},styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%;left:0;top:0;transform-origin:0 0;pointer-events:none}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0})}return i})();var td=class{position;scale;constructor(n,e){this.position=n,this.scale=e}},Ey=new P("F_CANVAS"),Sy=(()=>{class i{transform=ft.default();getPosition(){return this.transform.position}setPosition(e){this.transform.position=e}emitCanvasChangeEvent(){this.fCanvasChange.emit(new td(b.sum(this.transform.position,this.transform.scaledPosition),this.transform.scale))}static \u0275fac=function(t){return new(t||i)};static \u0275dir=O({type:i})}return i})(),bl=(()=>{class i extends Sy{_elementReference=h(F);fCanvasChange=new H;set position(e){this._fMediator.send(new na(this.transform,e))}set scale(e){this._fMediator.send(new oa(this.transform,e))}get hostElement(){return this._elementReference.nativeElement}fGroupsContainer;fNodesContainer;fConnectionsContainer;_fMediator=h(D);ngOnInit(){this._fMediator.send(new ea(this))}redraw(){this._fMediator.send(new ki(this.transform)),this.hostElement.setAttribute("style",`transform: ${ft.toString(this.transform)}`),this._fMediator.send(new mt)}redrawWithAnimation(){this._fMediator.send(new ki(this.transform)),this.hostElement.setAttribute("style",`transition: transform ${yy()?80:150}ms ease-in-out; transform: ${ft.toString(this.transform)}`),Gh(this.hostElement,()=>this.redraw())}centerGroupOrNode(e,t=!0){this._fMediator.send(new ta(e,t))}fitToScreen(e=b.initialize(),t=!0){this._fMediator.send(new ia(e,t))}resetScaleAndCenter(e=!0){this._fMediator.send(new aa(e))}setZoom(e,t=b.initialize()){this._fMediator.send(new la(e,t))}resetZoom(){this._fMediator.send(new sa)}ngOnDestroy(){this._fMediator.send(new ra)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ze(i)))(o||i)}})();static \u0275cmp=T({type:i,selectors:[["f-canvas"]],viewQuery:function(t,o){if(t&1&&(V(cg,7),V(dg,7),V(fg,7)),t&2){let r;I(r=M())&&(o.fGroupsContainer=r.first),I(r=M())&&(o.fNodesContainer=r.first),I(r=M())&&(o.fConnectionsContainer=r.first)}},hostAttrs:[1,"f-component","f-canvas"],inputs:{position:"position",scale:"scale"},outputs:{fCanvasChange:"fCanvasChange"},exportAs:["fComponent"],features:[X([{provide:Ey,useExisting:i}]),ee],ngContentSelectors:ug,decls:12,vars:0,consts:[["fGroupsContainer",""],["fConnectionsContainer",""],["fNodesContainer",""]],template:function(t,o){t&1&&(be(hg),ci(0),v(1,"div",null,0),Y(3),y(),v(4,"div",null,1),Y(6,1),Y(7,2),Y(8,3),y(),v(9,"div",null,2),Y(11,4),y(),di())},styles:["[_nghost-%COMP%]{position:absolute;overflow:visible;width:100%;height:100%;left:0;top:0;transform-origin:0 0;pointer-events:none}.f-scaled-animate[_nghost-%COMP%]{transition:transform .09s}"],changeDetection:0})}return i})();var ml=class{hostElement;element;constructor(n,e){this.hostElement=e,this.element=n.document.createElement("div"),this.hostElement.appendChild(this.element),this.element.classList.add("f-line")}hide(){this.element.style.display="none"}show(){this.element.style.display="block"}draw(n){this.element.style.position="absolute",Object.keys(n).forEach(e=>{this.element.style[e]=n[e]+"px"})}},id=class{hostElement;fHorizontalLine;fVerticalLine;constructor(n,e){this.hostElement=e,this.fHorizontalLine=new ml(n,this.hostElement),this.fVerticalLine=new ml(n,this.hostElement),this.fHorizontalLine.hide(),this.fVerticalLine.hide()}drawVerticalLine(n,e,t){this.fVerticalLine.show(),this.fVerticalLine.draw({left:n*t.scale+t.position.x+t.scaledPosition.x,top:0,width:1,height:e.height})}drawHorizontalLine(n,e,t){this.fHorizontalLine.show(),this.fHorizontalLine.draw({left:0,top:n*t.scale+t.position.y+t.scaledPosition.y,width:e.width,height:1})}hideVerticalLine(){this.fVerticalLine.hide()}hideHorizontalLine(){this.fHorizontalLine.hide()}},Iy=new P("F_LINE_ALIGNMENT"),My=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275dir=O({type:i})}return i})(),mu=(()=>{class i extends My{elementReference;fDraggableDataContext;DEBOUNCE_TIME=10;fAlignThreshold=10;get hostElement(){return this.elementReference.nativeElement}lineService;size=It.initialize();draggedNodeRect=E.initialize();rects=[];_fMediator=h(D);_fCanvas;_debounceTimer=null;get _transform(){return this._fCanvas.transform}constructor(e,t,o){super(),this.elementReference=e,this.fDraggableDataContext=t,this.lineService=new id(o,this.hostElement)}ngAfterViewInit(){this._fCanvas=this._fMediator.send(new Vi),this.fDraggableDataContext.fLineAlignment=this}initialize(e,t){this.size=this._fMediator.send(new mn).getBoundingClientRect(),this.rects=[];let o=t.map(s=>this._fMediator.execute(new ve(s.hostElement,!1)));this.draggedNodeRect=E.union(o)||E.initialize();let r=e.filter(s=>!t.includes(s));this.rects=r.map(s=>this._fMediator.execute(new ve(s.hostElement,!1)))}handle(e){this._debounceTimer&&clearTimeout(this._debounceTimer),this._debounceTimer=setTimeout(()=>this.drawIntersectingLines(e),this.DEBOUNCE_TIME)}drawIntersectingLines(e){let t=this.findNearestCoordinate(e);t.xResult.value!==void 0?this.lineService.drawVerticalLine(t.xResult.value,this.size,this._transform):this.lineService.hideVerticalLine(),t.yResult.value!==void 0?this.lineService.drawHorizontalLine(t.yResult.value,this.size,this._transform):this.lineService.hideHorizontalLine()}findNearestCoordinate(e){let t=E.addPoint(this.draggedNodeRect,e);return Ph(this.rects,t,this.fAlignThreshold)}complete(){this.lineService.hideVerticalLine(),this.lineService.hideHorizontalLine(),this._debounceTimer&&(clearTimeout(this._debounceTimer),this._debounceTimer=null)}static \u0275fac=function(t){return new(t||i)(u(F),u(S),u(ce))};static \u0275cmp=T({type:i,selectors:[["f-line-alignment"]],hostAttrs:[1,"f-line-alignment","f-component"],inputs:{fAlignThreshold:"fAlignThreshold"},exportAs:["fComponent"],features:[X([{provide:Iy,useExisting:i}]),ee],decls:0,vars:0,template:function(t,o){},styles:["[_nghost-%COMP%]{display:block;position:absolute;left:0;top:0;width:100%;height:100%;overflow:hidden;pointer-events:none;-webkit-user-select:none;user-select:none}"]})}return i})();var Fy=new P("F_FLOW"),nd=class{},Oy=0,wl=(()=>{class i extends nd{fBrowser;_destroyRef=h(li);_fMediator=h(D);_elementReference=h(F);fId=`f-flow-${Oy++}`;get hostElement(){return this._elementReference.nativeElement}fLoaded=new H;_isLoaded=!1;constructor(e){super(),this.fBrowser=e}ngOnInit(){this._fMediator.send(new sl(this))}ngAfterContentInit(){this.fBrowser.isBrowser()&&(this._listenCountChanges(),this._listenDataChanges())}_listenCountChanges(){this._fMediator.send(new Ks).listen(this._destroyRef,()=>{this._fMediator.send(new ul)})}_listenDataChanges(){this._fMediator.send(new Zs).listen(this._destroyRef,()=>{this._fMediator.send(new _a),this._emitLoaded()})}_emitLoaded(){this._isLoaded||(this._isLoaded=!0,this.fLoaded.emit())}redraw(){this._fMediator.send(new Mt)}reset(){this._isLoaded=!1}getNodesBoundingBox(){return this._fMediator.send(new dl)}getSelection(){return this._fMediator.send(new hn)}getPositionInFlow(e){return this._fMediator.send(new fl(e))}getState(){return this._fMediator.send(new ll)}selectAll(){this._fMediator.send(new qa)}select(e,t){this._fMediator.send(new Ka(e,t))}clearSelection(){this._fMediator.send(new Qa)}ngOnDestroy(){this._fMediator.send(new cl)}static \u0275fac=function(t){return new(t||i)(u(ce))};static \u0275cmp=T({type:i,selectors:[["f-flow"]],hostAttrs:[1,"f-component","f-flow"],hostVars:1,hostBindings:function(t,o){t&2&&te("id",o.fId)},inputs:{fId:[C.None,"fFlowId","fId"]},outputs:{fLoaded:"fLoaded"},features:[X([D,...bg,S,vl,...xy,...PC,{provide:Fy,useExisting:i}]),ee],ngContentSelectors:pg,decls:7,vars:0,template:function(t,o){t&1&&(be(mg),ci(0),Y(1),Y(2,1),Y(3,2),Y(4,3),Y(5,4),Y(6,5),di())},styles:["[_nghost-%COMP%]{display:block;position:relative;width:100%;height:100%;overflow:hidden;pointer-events:all;-webkit-user-select:none;user-select:none;touch-action:none}"],changeDetection:0})}return i})();var Py=new P("F_ZOOM"),od=class{isEnabled=!1;_listeners=de.emptyListener();_fMediator=h(D);get _fFlowHostElement(){return this._fMediator.send(new mn)}get _fCanvas(){return this._fMediator.send(new Vi)}get _isDragStarted(){return this._fMediator.send(new Pa)}toggleZoom(){this.isEnabled?this._subscribe():this.dispose()}_subscribe(){this._listeners(),this._fFlowHostElement&&(this._fFlowHostElement.addEventListener("wheel",this._onWheel),this._fFlowHostElement.addEventListener("dblclick",this._onDoubleClick),this._listeners=()=>{this._fFlowHostElement.removeEventListener("wheel",this._onWheel),this._fFlowHostElement.removeEventListener("dblclick",this._onDoubleClick)})}getScale(){return this._fCanvas.transform.scale||1}_onWheel=n=>{n.preventDefault();let e=n.target;if(this._isDragStarted||e?.closest("[fLockedContext]"))return;let t=this.getScale(),o=n.deltaY>0?-1:1,r=this.step;t=t+r*o,t=Math.max(this.minimum,Math.min(t,this.maximum));let s=new A(n.clientX,n.clientY).elementTransform(this._fFlowHostElement);this._fCanvas.setZoom(t,s),this._fCanvas.redraw(),this._fCanvas.emitCanvasChangeEvent()};_onDoubleClick=n=>{n.preventDefault();let e=n.target;if(this._isDragStarted||o_(e)||e?.closest("[fLockedContext]"))return;let t=this.getScale(),o=1,r=this.dblClickStep;t=t+r*o,t=Math.max(this.minimum,Math.min(t,this.maximum));let s=new A(n.clientX,n.clientY).elementTransform(this._fFlowHostElement);this._fCanvas.setZoom(t,s),this._fCanvas.redrawWithAnimation(),this._fCanvas.emitCanvasChangeEvent()};_onZoomToCenter(n,e){let t=()=>{},o=E.fromElement(this._fFlowHostElement);this._onWheel({deltaY:n,preventDefault:t,clientX:e?.x||o.gravityCenter.x,clientY:e?.y||o.gravityCenter.y})}zoomIn(n){this._onZoomToCenter(-1,n)}zoomOut(n){this._onZoomToCenter(1,n)}reset(){this._fCanvas.resetZoom(),this._fCanvas.redraw(),this._fCanvas.emitCanvasChangeEvent()}dispose(){this._listeners(),this._listeners=de.emptyListener()}},Dl=(()=>{class i extends od{get fFlowZoom(){return this.isEnabled}set fFlowZoom(e){let t=uf(e);t!==this.isEnabled&&(this.isEnabled=t,this.toggleZoom())}minimum=.1;maximum=4;step=.1;dblClickStep=.5;ngAfterViewInit(){super.toggleZoom()}ngOnDestroy(){super.dispose()}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ze(i)))(o||i)}})();static \u0275dir=O({type:i,selectors:[["f-canvas","fZoom",""]],hostAttrs:[1,"f-zoom","f-component"],inputs:{fFlowZoom:[C.None,"fZoom","fFlowZoom"],minimum:[C.None,"fZoomMinimum","minimum"],maximum:[C.None,"fZoomMaximum","maximum"],step:[C.None,"fZoomStep","step"],dblClickStep:[C.None,"fZoomDblClickStep","dblClickStep"]},exportAs:["fComponent"],features:[X([{provide:Py,useExisting:i}]),ee]})}return i})();var oi=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Me({type:i});static \u0275inj=Ie({imports:[ui]})}return i})();var pu=(i,n)=>n.key;function Ry(i,n){if(i&1){let e=Ce();v(0,"button",8),G("click",function(){ne(e);let o=R();return oe(o.onToggleBodyClick())}),v(1,"mat-icon"),W(2,"expand_more"),y()()}if(i&2){let e=R();re("opened",e.isBodyVisible)}}function Ty(i,n){if(i&1){let e=Ce();v(0,"div",10)(1,"span"),W(2),y(),v(3,"div",11),G("click",function(){let o=ne(e).$implicit,r=R(2);return oe(r.onRemoveConnection(o.key))}),v(4,"mat-icon"),W(5,"close"),y()()()}if(i&2){let e=n.$implicit,t=R(2);w(2),ge(e.name),w(),N("fOutputId",e.key)("fOutputConnectableSide",t.eFConnectableSide.RIGHT)("isSelfConnectable",!1)}}function Ny(i,n){if(i&1&&(v(0,"div",7),B(1,"div",9),Oe(2,Ty,6,4,"div",10,pu),y()),i&2){let e=R();w(),N("formControl",e.form),w(),Pe(e.model.outputs)}}function Ay(i,n){if(i&1){let e=Ce();v(0,"div",13),G("click",function(){let o=ne(e).$implicit,r=R(2);return oe(r.onRemoveConnection(o.key))}),v(1,"mat-icon"),W(2,"close"),y()()}if(i&2){let e=n.$implicit,t=R(2);N("fOutputConnectableSide",t.eFConnectableSide.BOTTOM)("fOutputId",e.key)("isSelfConnectable",!1)}}function ky(i,n){if(i&1&&(v(0,"footer"),Oe(1,Ay,3,3,"div",12,pu),y()),i&2){let e=R();w(),Pe(e.outputs)}}var gu=(()=>{class i{constructor(e){this.changeDetectorRef=e,this.subscription$=pe.EMPTY,this.valueChange=new H,this.removeConnection=new H,this.isBodyVisible=!1,this.eFConnectableSide=U,this.outputs=[],this.form=new ct}ngOnInit(){this.form=new ct(this.model?.value),this.isBodyVisible=this.model?.isExpanded||!1,this.subscription$=this.subscribeToFormChanges()}subscribeToFormChanges(){return this.form.valueChanges.subscribe(e=>{this.valueChange.emit(e),setTimeout(()=>{this.outputs=(this.model?.outputs||[]).slice().reverse()})})}ngOnChanges(){this.outputs=(this.model?.outputs||[]).slice().reverse()}onRemoveConnection(e){this.removeConnection.emit(e)}onToggleBodyClick(){this.isBodyVisible=!this.isBodyVisible,this.model.isExpanded=this.isBodyVisible,this.changeDetectorRef.markForCheck()}ngOnDestroy(){this.subscription$.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)(u(Re))}}static{this.\u0275cmp=T({type:i,selectors:[["workflow-node"]],hostVars:2,hostBindings:function(t,o){t&2&&yt("border-top-color",o.model.color)},inputs:{model:"model"},outputs:{valueChange:"valueChange",removeConnection:"removeConnection"},standalone:!0,features:[he,K],decls:12,vars:6,consts:[["fDragHandle",""],[1,"node-icon"],[1,"node-info"],[1,"node-title"],[1,"node-description"],[1,"flex-space"],[1,"toggle-body-button",3,"opened"],[1,"node-body"],[1,"toggle-body-button",3,"click"],["formBuilder","",3,"formControl"],[1,"output-item"],["fNodeOutput","",3,"click","fOutputId","fOutputConnectableSide","isSelfConnectable"],["fNodeOutput","",3,"fOutputConnectableSide","fOutputId","isSelfConnectable"],["fNodeOutput","",3,"click","fOutputConnectableSide","fOutputId","isSelfConnectable"]],template:function(t,o){t&1&&(v(0,"header",0)(1,"mat-icon",1),W(2),y(),v(3,"div",2)(4,"span",3),W(5),y(),v(6,"div",4),W(7),y()(),B(8,"div",5),$(9,Ry,3,2,"button",6),y(),$(10,Ny,4,1,"div",7)(11,ky,3,0,"footer")),t&2&&(w(2),ge(o.model.icon),w(3),ge(o.model.name),w(2),ge(o.model.description),w(2),Z(9,o.model.isExpandable?9:-1),w(),Z(10,o.isBodyVisible?10:-1),w(),Z(11,o.isBodyVisible?-1:11))},dependencies:[oi,Qh,Wh,kn,Sh,We,Ge,Le],styles:["[_nghost-%COMP%]{display:block;background-color:#fff;border-radius:4px;padding:0 16px;border:1px solid var(--gray12);border-top:4px solid transparent}[_nghost-%COMP%]   .f-node-input[_ngcontent-%COMP%]{width:100%;margin-top:-4px;height:10px}[_nghost-%COMP%]   header[_ngcontent-%COMP%]{padding:16px 0;display:flex;justify-content:flex-start;align-items:flex-start;gap:8px;cursor:move}[_nghost-%COMP%]   header[_ngcontent-%COMP%]   .node-icon[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px;min-width:16px}[_nghost-%COMP%]   header[_ngcontent-%COMP%]   .node-info[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   header[_ngcontent-%COMP%]   .node-title[_ngcontent-%COMP%]{display:block;margin-bottom:4px;line-height:12px;font-size:12px;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   header[_ngcontent-%COMP%]   .node-description[_ngcontent-%COMP%]{font-size:12px;color:var(--gray6);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   header[_ngcontent-%COMP%]   .toggle-body-button[_ngcontent-%COMP%]{background:none;width:24px;height:24px;border:none;margin:0;padding:0;cursor:pointer}[_nghost-%COMP%]   header[_ngcontent-%COMP%]   .toggle-body-button.opened[_ngcontent-%COMP%]{transform:rotate(180deg)}.node-body[_ngcontent-%COMP%]{display:block;padding-bottom:16px}.node-body[_ngcontent-%COMP%]   .output-item[_ngcontent-%COMP%]{width:calc(100% + 32px);display:flex;align-items:center;justify-content:space-between;margin-left:-16px;border-top:1px solid var(--gray12);height:32px;padding:0 16px;font-size:12px}footer[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:flex-end}footer[_ngcontent-%COMP%]   .f-node-output[_ngcontent-%COMP%]{margin-bottom:-8px}.f-node-output[_ngcontent-%COMP%]{width:16px;height:16px;background-color:var(--gray13);border-radius:4px;border:1px solid var(--gray12);color:var(--gray4)}.f-node-output[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:12px;width:12px;height:12px;color:inherit;padding:1px;display:none}.f-node-output.f-node-output-connected[_ngcontent-%COMP%]{cursor:pointer;border-color:var(--blue4);background-color:var(--blue4);color:var(--gray12)}.f-node-output.f-node-output-connected[_ngcontent-%COMP%]:hover{background-color:var(--blue2)}.f-node-output.f-node-output-connected[_ngcontent-%COMP%]:active{background-color:var(--blue3)}.f-node-output.f-node-output-connected[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:block}"]})}}return i})();var md=(()=>{class i{constructor(e){this.store=e}handle(e){let t=e.connectionKeys||[];e.nodeKeys.forEach(s=>{let a=this.findAllConnectionsForNode(e.flow,s);t.push(...a),this.removeNode(e.flow,s)});let o=t.map(s=>this.removeConnection(e.flow,s)).filter(s=>s!==void 0),r=JSON.parse(JSON.stringify(e.flow));return this.store.dispatch(new mf(r.key,e.nodeKeys,o)),r}findAllConnectionsForNode(e,t){let o=e.nodes.find(s=>s.key===t),r=[];if(o){o.outputs.forEach(a=>{let d=e.connections.filter(p=>p.from===a.key).map(p=>p.key);d.length&&r.push(...d)});let s=e.connections.filter(a=>a.to===o.input).map(a=>a.key);s.length&&r.push(...s)}return r}removeConnection(e,t){let o=e.connections.findIndex(s=>s.key===t);if(o===-1)return;let r=e.connections[o].from;return o>-1&&e.connections.splice(o,1),r}removeNode(e,t){let o=e.nodes.findIndex(r=>r.key===t);o>-1&&e.nodes.splice(o,1)}static{this.\u0275fac=function(t){return new(t||i)(c(we))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var bn=class{constructor(n,e,t){this.flow=n,this.nodeKeys=e,this.connectionKeys=t}};var _u=(()=>{class i{constructor(e){this.store=e}handle(e){let t=this.getOutputNode(e.flow,e.outputKey),o=t.outputs.find(s=>s.key===e.outputKey),r=JSON.parse(JSON.stringify(e.flow));return r.connections.push(this.createConnection(e.outputKey,e.inputKey,o.name)),this.store.dispatch(new Ln(r.key,t.key,e.outputKey,e.inputKey)),r}getOutputNode(e,t){let o=e.nodes.find(r=>r.outputs.some(s=>s.key===t));if(!o)throw new Error("Node not found");return o}createConnection(e,t,o){return{key:jt(),from:e,to:t,name:o}}static{this.\u0275fac=function(t){return new(t||i)(c(we))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var El=class{constructor(n,e,t){this.flow=n,this.outputKey=e,this.inputKey=t}};var vu=(()=>{class i{constructor(e){this.store=e}handle(e){let t=this.getOutputNode(e.flow,e.outputKey),o=JSON.parse(JSON.stringify(e.flow)),r=o.connections.find(s=>s.from===e.outputKey&&s.to===e.oldInputKey);return r&&(r.to=e.newInputKey),this.store.dispatch(new Ln(o.key,t.key,e.outputKey,e.newInputKey)),o}getOutputNode(e,t){let o=e.nodes.find(r=>r.outputs.some(s=>s.key===t));if(!o)throw new Error("Node not found");return o}static{this.\u0275fac=function(t){return new(t||i)(c(we))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Sl=class{constructor(n,e,t,o){this.flow=n,this.outputKey=e,this.oldInputKey=t,this.newInputKey=o}};var Il=class{handle(n){return this.map(n.entity)}map(n){return n.outputs.filter(t=>!!t.connectedTo).map(t=>({key:jt(),from:t.key,to:t.connectedTo,name:t.name}))}};var Ml=class{constructor(n){this.entity=n}};var Cu=(()=>{class i{constructor(e){this.store=e}handle(e){let t=JSON.parse(JSON.stringify(e.flow)),o=t.nodes.findIndex(d=>d.key===e.node.key);t.nodes[o]=e.node;let r=this.findOutputsNumberValue(t.nodes[o].value);r&&(t.nodes[o].outputs=this.mergeOutputsWithNumber(t,t.nodes[o],r));let s=t.nodes[o],a=s.outputs.map(d=>({key:d.key,name:d.name,connectedTo:t.connections.find(p=>p.from===d.key)?.to||null}));return this.store.dispatch(new Cf(e.flow.key,s.key,s.position,a,s.value)),t}findOutputsNumberValue(e){let t,o=e?.groups.find(r=>r.controls.some(s=>s.type===bt.OUTPUTS_SELECT));return o&&(t=o.controls.find(s=>s.type===bt.OUTPUTS_SELECT)?.value),t}mergeOutputsWithNumber(e,t,o){let r=t.outputs.slice(0,o);if(t.outputs.slice(o).forEach(a=>{e.connections=e.connections.filter(d=>d.from!==a.key)}),r.length<o)for(let a=r.length;a<o;a++)r.push({key:`output-${a}`,name:`Output ${a}`});return r}static{this.\u0275fac=function(t){return new(t||i)(c(we))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Fl=class{constructor(n,e){this.flow=n,this.node=e}};var _t={[Fe.Start]:{name:"Start",icon:"play_arrow",color:"#39b372",isExpandable:!1},[Fe.CallAPI]:{name:"Call API",icon:"api",color:"#f37d44",isExpandable:!0},[Fe.Message]:{name:"Message",icon:"chat",color:"#2676ff",isExpandable:!0},[Fe.OpenForm]:{name:"Open Form",icon:"assignment",color:"#AF94FF",isExpandable:!0},[Fe.OpenUrl]:{name:"Open Url",icon:"open_in_new",color:"#ffb62a",isExpandable:!0},[Fe.SetState]:{name:"Set State",icon:"edit_note",color:"#ff859b",isExpandable:!0},[Fe.Function]:{name:"Function",icon:"functions",color:"#ff859b",isExpandable:!0}};var Ol=class{handle(n){return this.map(n.entity)}map(n){return{key:n.key,icon:_t[n.type].icon,color:_t[n.type].color,name:_t[n.type].name,description:n.description||"",isExpanded:n.isExpanded||!1,isExpandable:_t[n.type].isExpandable,input:n.input,outputs:n.outputs.map(t=>({key:t.key,name:t.name})),type:n.type,position:n.position,value:n.value}}};var Pl=class{constructor(n){this.entity=n}};var Rl=class{handle(n){return this.map(n.entity)}map(n){let e=this.mapNodes(n),t=this.mapConnections(n);return{key:n.key,nodes:e,connections:t}}mapNodes(n){return n.nodes.map(t=>new Ol().handle(new Pl(t)))}mapConnections(n){return n.nodes.reduce((t,o)=>{let r=new Il().handle(new Ml(o));return t.concat(r)},[])}};var Tl=class{constructor(n){this.entity=n}};var yu=(()=>{class i{constructor(e){this.store=e}handle(e){let t=this.getFlow(e.key);return new Rl().handle(new Tl(t))}getFlow(e){let o=this.store.selectSnapshot(r=>r.flows.flows).find(r=>r.key===e);if(!o)throw new Error(`Flow with key ${e} not found`);return o}static{this.\u0275fac=function(t){return new(t||i)(c(we))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Nl=class{constructor(n){this.key=n}};var pd=class{handle(n){let t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.classList.add("f-animation","f-animated-connection"),t.setAttribute("d",n.element.getAttribute("d")),n.element.parentElement.appendChild(t),t}},gd=class{constructor(n){this.element=n}},_d=class{constructor(n){this.animationBuilder=n}handle(n){let e=new pd().handle(new gd(n.element)),t=e.getTotalLength();e.style.strokeDasharray=t+" "+t,e.style.strokeDashoffset=String(t);let r=this.animationBuilder.build([Te({strokeDashoffset:t}),st(n.duration+"ms",Te({strokeDashoffset:0}))]).create(e);return new ot(s=>{r.onDone(()=>{s.next(e),s.complete()}),r.play()})}},vd=class{constructor(n,e){this.element=n,this.duration=e}},Cd=class{handle(n){let e=document.createElement("div");return e.classList.add("f-animation","f-animated-node"),e.style.position="absolute",e.style.width=`${n.element.clientWidth}px`,e.style.height="0px",e.style.top="0px",e.style.left="0px",e.style.zIndex="1",n.element.appendChild(e),e}},yd=class{constructor(n){this.element=n}},xd=class{constructor(n){this.animationBuilder=n}handle(n){let e=new Cd().handle(new yd(n.element)),o=this.animationBuilder.build([Te({height:"0px"}),st(n.duration+"ms",Te({height:`${n.element.offsetHeight}px`}))]).create(e);return new ot(r=>{o.onDone(()=>{r.next(e),r.complete()}),o.play()})}},bd=class{constructor(n,e){this.element=n,this.duration=e}},wd=class{constructor(n){this.animationBuilder=n}handle(n){let e;return n.element instanceof SVGPathElement?e=this.animateConnection(n):e=this.animateNode(n),e}animateConnection(n){return new _d(this.animationBuilder).handle(new vd(n.element,n.duration))}animateNode(n){return new xd(this.animationBuilder).handle(new bd(n.element,n.duration))}},Dd=class{constructor(n,e){this.element=n,this.duration=e}},Ed=class{constructor(n,e){this.flowId=n,this.items=e}},Sd=class{constructor(n){this.document=n,this.allNodes=[],this.allConnections=[]}handle(n){if(!n.flowId)throw new Error("Flow id is required");let e=this.getFlowElement(n.flowId);return this.allNodes=this.getAllNodes(e),this.allConnections=this.getAllConnections(e),n.items.map(o=>o.map(r=>({element:r.isConnection?this.getConnectionElement(r.id):this.getNodeElement(r.id),duration:r.duration})))}getAllNodes(n){return Array.from(n.querySelectorAll("[fNode]"))}getAllConnections(n){return Array.from(n.getElementsByTagName("f-connection"))}getFlowElement(n){let e=this.document.getElementById(n);if(!e)throw new Error(`FFlowComponent with id ${n} not found`);return e}getNodeElement(n){let e=this.allNodes.find(t=>t.dataset.fNodeId===n);if(!e)throw new Error(`FNodeDirective with id ${n} not found`);return e}getConnectionElement(n){let e=this.allConnections.find(o=>o.id===n);if(!e)throw new Error(`FConnectionComponent with id ${n} not found`);let t=e.querySelector(".f-connection-path");if(!t)throw new Error(`FConnectionComponent with id ${n} has no path element`);return t}},xu=(()=>{class i{constructor(e,t){this.animationBuilder=e,this.document=t}animate(e,t){return new ot(o=>{setTimeout(()=>{let r=new Sd(this.document).handle(new Ed(e,t.items));this.animateSequentially(r,t,o)},0)})}animateSequentially(e,t,o){let r=t.duration/e.length,s=[];wn(e).pipe(Rd((a,d)=>Dn(a.map(p=>this.animateElement(p.element,p.duration||r).pipe(Nd(_=>{s.push(_)})))).pipe(Ll(()=>{t.removeOverlayAfterRowComplete&&(s=this.removeCreatedElements(s)),o.next({completeRowIndex:d})}))),Ll(()=>{t.removeOverlayAfterRowComplete||(s=this.removeCreatedElements(s)),o.next({completeAll:!0}),o.complete()})).subscribe()}animateElement(e,t){return new wd(this.animationBuilder).handle(new Dd(e,t))}removeCreatedElements(e){return e.forEach(t=>t.remove()),[]}}return i.\u0275fac=function(e){return new(e||i)(c(df),c(me))},i.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var bu=(()=>{class i{constructor(e){this.fFlowAnimatorService=e}handle(e){this.fFlowAnimatorService.animate(e.flow.key,this.buildAnimationConfiguration(e.flow)).subscribe()}buildAnimationConfiguration(e){let t=[],o=e.nodes.find(s=>s.type===Fe.Start);t.push([{id:o.key}]);let r=this.getConfiguration(o,e);return t.push(...r),{items:t,duration:t.length*2e3,removeOverlayAfterRowComplete:!0}}getConfiguration(e,t){let o=[],r=this.getConnectionsRow(t.connections,e);if(r.length){o.push(r);let s=this.getNodesRow(t.nodes,r);s.length>0&&(o.push(s),s.forEach(a=>{let d=t.nodes.find(_=>_.key===a.id),p=this.getConfiguration(d,t);o.push(...p)}))}return o}getConnectionsRow(e,t){return t.outputs.filter(s=>!!e.find(a=>a.from===s.key)).map(s=>{let a=e.find(d=>d.from===s.key);return{id:a.key,isConnection:!0,outputKey:a.from,inputKey:a.to}})}getNodesRow(e,t){return t.map(r=>({id:e.find(a=>a.input===r.inputKey).key}))}static{this.\u0275fac=function(t){return new(t||i)(c(xu))}}static{this.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Al=class{constructor(n){this.flow=n}};function Ly(i,n){if(i&1&&(v(0,"button",1),W(1),y()),i&2){let e=n.$implicit;yt("color",e.color),N("matTooltip",e.name)("fData",e.type)("fDisabled",e.disabled),w(),Vt(" ",e.icon," ")}}var wu=(()=>{class i{constructor(){this.nodes=Object.keys(_t).map(e=>ye(z({},_t[e]),{type:e,disabled:!1}))}ngOnChanges(){this.limitNodes()}limitNodes(){this.nodes.forEach(e=>{e.type===Fe.Start&&(e.disabled=this.viewModel.nodes.some(t=>t.type===Fe.Start))})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["workflow-palette"]],inputs:{viewModel:"viewModel"},standalone:!0,features:[he,K],decls:2,vars:0,consts:[["icon-button","","fExternalItem","","matTooltipPosition","right",3,"matTooltip","color","fData","fDisabled"],["icon-button","","fExternalItem","","matTooltipPosition","right",3,"matTooltip","fData","fDisabled"]],template:function(t,o){t&1&&Oe(0,Ly,2,6,"button",0,In),t&2&&Pe(o.nodes)},dependencies:[Yt,oi,lu,ao],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start;background-color:var(--gray14);border:1px solid var(--gray12);padding:8px 4px;border-radius:4px;position:absolute;left:16px;top:16px;gap:8px;z-index:10}button[_ngcontent-%COMP%]{border:1px solid var(--gray12);width:32px;height:32px;padding:7px;border-radius:4px;background-color:var(--gray14)}button[_ngcontent-%COMP%]:hover{background-color:var(--gray13)!important}button.f-external-item-disabled[_ngcontent-%COMP%]{background-color:var(--gray13)!important;cursor:unset}.f-external-item[_ngcontent-%COMP%]{z-index:20}"],changeDetection:0})}}return i})();var Du=(i,n)=>n.key;function jy(i,n){if(i&1&&(v(0,"div",10),W(1),y()),i&2){let e=R().$implicit;w(),Vt(" ",e.name," ")}}function zy(i,n){if(i&1&&(v(0,"f-connection",4),Ae(),v(1,"svg",6),B(2,"path",7),y(),v(3,"svg",9),B(4,"path",7),y(),$(5,jy,2,1,"div",10),y()),i&2){let e=n.$implicit,t=R(2);N("fBehavior",t.cBehavior)("fConnectionId",e.key)("fType",t.cType)("fOutputId",e.from)("fInputId",e.to),w(),N("type",t.eMarkerType.END)("height",5)("width",5)("refX",4)("refY",2.5),w(2),N("type",t.eMarkerType.SELECTED_END)("height",5)("width",5)("refX",4)("refY",2.5),w(2),Z(5,e.name?5:-1)}}function Hy(i,n){if(i&1){let e=Ce();v(0,"workflow-node",11),G("valueChange",function(o){let r=ne(e).$implicit,s=R(2);return oe(s.onValueChanged(r,o))})("removeConnection",function(o){ne(e);let r=R(2);return oe(r.onRemoveConnection(o))})("fNodePositionChange",function(o){let r=ne(e).$implicit,s=R(2);return oe(s.onNodePositionChanged(o,r))}),y()}if(i&2){let e=n.$implicit,t=R(2);N("fNodeId",e.key)("model",e)("fInputId",e.input)("fInputDisabled",!e.input)("fInputConnectableSide",t.eConnectableSide.TOP)("fNodePosition",e.position)}}function Gy(i,n){if(i&1){let e=Ce();v(0,"workflow-action-panel",0),G("request",function(o){ne(e);let r=R();return oe(r.onActionPanelEvent(o))}),y(),B(1,"workflow-palette",1),v(2,"f-flow",2),G("fLoaded",function(){ne(e);let o=R();return oe(o.onLoaded())})("fCreateConnection",function(o){ne(e);let r=R();return oe(r.onCreateConnection(o))})("fReassignConnection",function(o){ne(e);let r=R();return oe(r.onReassignConnection(o))})("fCreateNode",function(o){ne(e);let r=R();return oe(r.onCreateNode(o))}),v(3,"f-background"),B(4,"f-circle-pattern"),y(),B(5,"f-line-alignment")(6,"f-selection-area"),v(7,"f-canvas",3),Oe(8,zy,6,16,"f-connection",4,Du),v(10,"f-connection-for-create",5),Ae(),v(11,"svg",6),B(12,"path",7),y()(),Oe(13,Hy,1,6,"workflow-node",8,Du),y()()}if(i&2){let e=R();w(),N("viewModel",e.viewModel),w(),N("fFlowId",e.viewModel.key),w(6),Pe(e.viewModel.connections),w(2),N("fType",e.cType),w(),N("type",e.eMarkerType.END)("height",5)("width",5)("refX",4)("refY",2.5),w(2),Pe(e.viewModel.nodes)}}var TE=(()=>{class i{get routeKeyChange$(){return this.router.events.pipe(Qe(new Lt(0,"","")),Se(e=>e instanceof Lt),rt(()=>this.activatedRoute.snapshot.params.key),ai(),rt(()=>!0))}constructor(e,t,o,r,s,a){this.store=e,this.router=t,this.injector=o,this.activatedRoute=r,this.changeDetectorRef=s,this.fPlatform=a,this.subscriptions$=new pe,this.eMarkerType=yl,this.eConnectableSide=U,this.cBehavior=Xe.FIXED,this.cType=ut.SEGMENT,this.hasChanges$=new Q}ngOnInit(){this.subscriptions$.add(this.subscribeReloadEvents())}subscribeReloadEvents(){return ze(this.hasChanges$,this.routeKeyChange$).subscribe(e=>{let t=this.activatedRoute.snapshot.params.key;try{this.viewModel=this.injector.get(yu).handle(new Nl(t))}catch(o){console.error(o),this.viewModel=void 0}e&&this.fFlowComponent?.reset(),this.changeDetectorRef.detectChanges()})}ngAfterViewInit(){this.onLoaded()}onLoaded(){this.fCanvasComponent?.fitToScreen(new A(300,300),!1)}onCreateNode(e){this.store.dispatch(new vf(this.viewModel.key,e.data,e.rect)).pipe(Ne(1)).subscribe(t=>{this.hasChanges$.next()})}onNodePositionChanged(e,t){t.position=e,this.store.dispatch(new _f(this.viewModel.key,t.key,e))}onCreateConnection(e){e.fInputId&&(this.viewModel=this.injector.get(_u).handle(new El(this.viewModel,e.fOutputId,e.fInputId)),this.changeDetectorRef.detectChanges())}onReassignConnection(e){e.newFInputId&&(this.viewModel=this.injector.get(vu).handle(new Sl(this.viewModel,e.fOutputId,e.oldFInputId,e.newFInputId)),this.changeDetectorRef.detectChanges())}onRemoveConnection(e){let t=this.viewModel.connections.find(o=>o.from===e);this.viewModel=this.injector.get(md).handle(new bn(this.viewModel,[],[t.key])),this.changeDetectorRef.detectChanges()}onRemoveItems(){let e=this.fFlowComponent.getSelection();this.viewModel=this.injector.get(md).handle(new bn(this.viewModel,e.nodes,e.connections)),this.changeDetectorRef.detectChanges()}onValueChanged(e,t){let o=this.fFlowComponent.getSelection();e.value=t,this.viewModel=this.injector.get(Cu).handle(new Fl(this.viewModel,e)),this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.fFlowComponent.select(o.nodes,o.connections)})}onActionPanelEvent(e){switch(e){case Ve.TEST_CALL:this.injector.get(bu).handle(new Al(this.viewModel));break;case Ve.DELETE_SELECTED:this.onRemoveItems();break;case Ve.SELECT_ALL:this.fFlowComponent.selectAll();break;case Ve.ZOOM_IN:this.fZoomDirective.zoomIn();break;case Ve.ZOOM_OUT:this.fZoomDirective.zoomOut();break;case Ve.FIT_TO_SCREEN:this.fCanvasComponent.fitToScreen();break;case Ve.ONE_TO_ONE:this.fCanvasComponent.resetScaleAndCenter();break}}onKeyDown(e){if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))switch(e.keyCode){case 8:case 46:this.onRemoveItems();break;case 107:this.isCommandButton(e)&&this.fZoomDirective.zoomIn();break;case 109:case 189:this.isCommandButton(e)&&this.fZoomDirective.zoomOut();break;case 65:this.isCommandButton(e)&&this.fFlowComponent.selectAll();break}}isCommandButton(e){return this.fPlatform.getOS()===Ue.MAC_OS?e.metaKey:e.ctrlKey}ngOnDestroy(){this.subscriptions$.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)(u(we),u(Pn),u(Ke),u(Yd),u(Re),u(Ni))}}static{this.\u0275cmp=T({type:i,selectors:[["workflow-editor"]],viewQuery:function(t,o){if(t&1&&(V(wl,5),V(bl,5),V(Dl,5)),t&2){let r;I(r=M())&&(o.fFlowComponent=r.first),I(r=M())&&(o.fCanvasComponent=r.first),I(r=M())&&(o.fZoomDirective=r.first)}},hostAttrs:["tabindex","-1"],hostBindings:function(t,o){t&1&&G("keydown",function(s){return o.onKeyDown(s)})},standalone:!0,features:[K],decls:1,vars:1,consts:[[3,"request"],[3,"viewModel"],["fDraggable","",3,"fLoaded","fCreateConnection","fReassignConnection","fCreateNode","fFlowId"],["fZoom",""],[3,"fBehavior","fConnectionId","fType","fOutputId","fInputId"],[3,"fType"],["id","normal_end","viewBox","0 0 700 700","fMarker","",3,"type","height","width","refX","refY"],["d","M0,0L700,350L0,700L150,350z"],["fNode","","fNodeInput","",3,"fNodeId","model","fInputId","fInputDisabled","fInputConnectableSide","fNodePosition"],["id","selected_end","viewBox","0 0 700 700","fMarker","",3,"type","height","width","refX","refY"],["fConnectionCenter",""],["fNode","","fNodeInput","",3,"valueChange","removeConnection","fNodePositionChange","fNodeId","model","fInputId","fInputDisabled","fInputConnectableSide","fNodePosition"]],template:function(t,o){t&1&&$(0,Gy,15,8),t&2&&Z(0,o.viewModel?0:-1)},dependencies:[oi,uu,hu,bl,Dl,eu,Cl,Jh,tu,$h,wl,mu,_l,fu,du,gu,Fh,wu,Uf],styles:["[_nghost-%COMP%]{position:relative;display:block;width:100%;height:100%;outline:none}.connection-panel[_ngcontent-%COMP%]{position:absolute;width:240px;display:flex;flex-direction:column;padding:12px;border-radius:4px;background-color:var(--gray14);border:1px solid var(--gray12);top:60px;right:16px;z-index:20}"],changeDetection:0})}}return i})();var Wy=(i,n)=>n.key;function Uy(i,n){if(i&1){let e=Ce();v(0,"div",3)(1,"span"),W(2),y(),B(3,"div",4),v(4,"button",1),G("click",function(o){let r=ne(e).$implicit,s=R();return oe(s.onDelete(r,o))}),W(5,"delete"),y()()}if(i&2){let e=n.$implicit;N("routerLink",e.key),w(2),ge(e.name)}}var Id="flow",Eu=(()=>{class i{constructor(e,t){this.store=e,this.router=t,this.subscriptions$=new pe,this.searchControl=new ct(""),this.entities=[],this.entities$=this.searchControl.valueChanges.pipe(Qe(""),Nt(o=>si(this.entities.filter(r=>r.name.toLowerCase().includes(o?.toLowerCase()||"")))))}ngOnInit(){this.getData(),this.subscriptions$.add(this.subscribeOnRouteChanges())}getData(){let e=this.store.selectSnapshot(yf.summaryList).reverse();!e||!e.length?this.onCreate():(this.entities=e,this.filterEntities())}filterEntities(){this.searchControl.setValue(this.searchControl.value)}subscribeOnRouteChanges(){return this.router.events.pipe(Qe(new Lt(1,"","")),Se(e=>e instanceof Lt)).subscribe(()=>{this.router.url.split("/").pop()?.toLowerCase()!==Id?this.filterEntities():this.toDefaultFlow()})}toDefaultFlow(){this.entities.length>0&&this.navigateToEntity(this.entities[0].key)}onCreate(){let e=jt();this.store.dispatch(new pf(e,Id+Date.now())).pipe(Ne(1)).subscribe(()=>{this.navigateToEntity(e),this.getData()})}onDelete(e,t){t.preventDefault(),t.stopPropagation(),this.store.dispatch(new gf(e.key)).pipe(Ne(1)).subscribe(()=>{e.key===this.router.url.split("/").pop()&&this.toDefaultFlow(),this.getData()})}navigateToEntity(e){this.router.navigateByUrl(`/${Id}/`+e)}ngOnDestroy(){this.subscriptions$.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)(u(we),u(Pn))}}static{this.\u0275cmp=T({type:i,selectors:[["workflow-list"]],standalone:!0,features:[K],decls:8,vars:3,consts:[["placeholder","Type in to search...",1,"toolbar-search",3,"formControl"],["icon-button","",3,"click"],[1,"list"],["routerLinkActive","active",1,"explorer-panel-item",3,"routerLink"],[1,"flex-space"]],template:function(t,o){t&1&&(v(0,"header"),B(1,"input",0),v(2,"button",1),G("click",function(){return o.onCreate()}),W(3,"add"),y()(),v(4,"div",2),Oe(5,Uy,6,2,"div",3,Wy),Bd(7,"async"),y()),t&2&&(w(),N("formControl",o.searchControl),w(4),Pe(jd(7,1,o.entities$)))},dependencies:[$d,Qd,Zd,We,lt,Ge,Le,Yt],styles:["[_nghost-%COMP%]{display:block;width:380px;height:100%;background-color:var(--gray13);border-right:1px solid var(--gray12)}header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 6px 6px 16px;height:49px;border-bottom:1px solid var(--gray12)}header[_ngcontent-%COMP%]   .toolbar-search[_ngcontent-%COMP%]{margin-right:6px;background-color:transparent;outline:none;border:none;min-height:28px;width:100%;display:flex;justify-content:flex-start;align-items:center;color:var(--gray1)}.list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;list-style:none;padding:12px 6px;margin:0;overflow:hidden;overflow-y:auto;height:calc(100% - 41px)}.list[_ngcontent-%COMP%]   .explorer-panel-item[_ngcontent-%COMP%]{width:100%;outline:none;-webkit-user-select:none;user-select:none;border:1px solid transparent;background-color:transparent;height:28px;min-height:28px;display:flex;justify-content:flex-start;align-items:center;color:var(--gray5);padding-left:12px;cursor:pointer;border-radius:2px}.list[_ngcontent-%COMP%]   .explorer-panel-item[_ngcontent-%COMP%]:hover{background-color:var(--gray12)}.list[_ngcontent-%COMP%]   .explorer-panel-item.active[_ngcontent-%COMP%]{color:var(--gray2);background-color:var(--gray11)}"],changeDetection:0})}}return i})();var UE=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["cc-call-workflow"]],standalone:!0,features:[K],decls:2,vars:0,template:function(t,o){t&1&&B(0,"workflow-list")(1,"router-outlet")},dependencies:[Eu,Xd],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%}"],changeDetection:0})}}return i})();export{md as BulkRemoveHandler,bn as BulkRemoveRequest,UE as CcCallWorkflowComponent,Cu as ChangeNodeHandler,Fl as ChangeNodeRequest,_u as CreateConnectionHandler,El as CreateConnectionRequest,yu as DetailsFlowHandler,Nl as DetailsFlowRequest,Il as MapToConnectionViewModelHandler,Ml as MapToConnectionViewModelRequest,Rl as MapToFlowViewModelHandler,Tl as MapToFlowViewModelRequest,Ol as MapToNodeViewModelHandler,Pl as MapToNodeViewModelRequest,_t as NODE_STATIC_MAP,vu as ReassignConnectionHandler,Sl as ReassignConnectionRequest,bu as TestCallHandler,Al as TestCallRequest,Fh as WorkflowActionPanelComponent,TE as WorkflowEditorComponent,Eu as WorkflowListComponent,gu as WorkflowNodeComponent,wu as WorkflowPaletteComponent};
